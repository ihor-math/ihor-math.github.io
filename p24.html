   <!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     <title>24. –†–æ–∑–≤‚Äô—è–∑—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º –ª—ñ–Ω—ñ–π–Ω–∏—Ö –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å –º–∞—Ç—Ä–∏—á–Ω–∏–º –º–µ—Ç–æ–¥–æ–º</title><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
         :root {
            --bg-gradient: linear-gradient(135deg, #556B2F, #6B8E23);
--bg-hover: linear-gradient(135deg, #6B8E23, #808000);
--math-color: #FFFF00;
--text-color: #FFFFFF;

        }
        *, *:before, *:after {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            background: var(--bg-gradient);
            font-family: 'Roboto', sans-serif;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: start;
            min-height: 100dvh;
            font-size: 1rem;
        }
        .title-box {
            margin-top: 60px;
            padding: 25px 40px;
            background: var(--bg-gradient);
            border-radius: 25px;
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2);
            max-width: 90%;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .title-box h1 {
            margin: 0;
            font-size: 1.6rem;
            color: #fff0f5;
            font-family: 'Lora', serif;
        }
        .section-container {
            margin-top: 40px;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        .section {
            width: 250px;
            height: 220px;
            background: var(--bg-gradient);
            border-radius: 20px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            cursor: pointer;
            text-decoration: none;
            color: var(--text-color);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .section:hover {
            background: var(--bg-hover);
        }
        .section img {
            width: 60px;
            height: 60px;
            margin-bottom: 15px;
            object-fit: cover;
            border-radius: 8px;
            filter: brightness(1.2);
        }
        .section h2 {
            font-size: 1.25rem;
            color: var(--text-color);
            margin: 0;
            font-family: 'Lora', serif;
        }
        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 40px auto;
            max-width: 1000px;
            padding: 0 20px;
        }
        .nav-button {
            display: flex;
            align-items: center;
            background: var(--bg-gradient);
            color: var(--text-color);
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 1.125rem;
            font-weight: bold;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);
            border: 2px solid #ffff00;
            line-height: 1.2;
        }
        .nav-button:hover {
            background: #4b5320;
        }
        .nav-button svg {
            margin-right: 8px;
            fill: currentColor;
            width: 20px;
            height: 20px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 5%;
            left: 5%;
            width: 95%;
            height: 95%;
            background: #6b8e23;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            overflow: hidden;
            flex-direction: column;
        }
        .modal-content {
            padding: 20px;
            overflow-y: auto;
            flex-grow: 1;
            background: #4b5320;
            border-radius: 10px;
            margin: 10px;
            width: 100%;
            color: var(--text-color);
        }
        #trainerModal .modal-content {
            display: flex;
            flex-direction: column;
            justify-content: start;
            align-items: center;
            padding: 20px;
        }
        .modal-header {
            display: flex;
            justify-content: flex-end;
            background: #4b5320;
            padding: 8px 10px;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }
        .close-btn {
            background: var(--text-color);
            color: #2C3E50;
            border: none;
            border-radius: 6px;
            padding: 5px 15px;
            font-size: 1rem;
            cursor: pointer;
        }
        .close-btn:hover {
            background: #eedc82;
        }
        #modalOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .tab-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab-button {
            background: var(--bg-gradient);
            color: #ffff00;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 10px 20px;
            font-family: 'Lora', serif;
            font-size: 1.125rem;
            font-weight: 700;
            cursor: pointer;
            text-align: left;
            position: relative;
        }
        .tab-button::after {
            content: '‚ñ∂';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1rem;
            color: #ffcc00;
        }
        .tab-button.active::after {
            content: '‚ñº';
        }
        .tab-button.active {
            background: var(--bg-hover);
            color: #fff0f5;
            font-weight: 700;
        }
        .tab-button:hover {
            background: #b8860b;
            color: #ffd1dc;
        }
        .tab-content {
            display: none;
            padding: 20px;
            border-radius: 10px;
            background: #4b5320;
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        .tab-content.active {
            display: block;
        }
        #theoryModal .modal-content p {
            text-align: justify;
            color: var(--text-color);
            font-size: 1.125rem;
            line-height: 1.6;
            white-space: normal;
        }
        #theoryModal .modal-content h3 {
            font-family: 'Lora', serif;
            font-size: 1.5rem;
            color: #9B59B6;
            margin-bottom: 15px;
            text-align: center;
        }
        #theoryModal .modal-content .example-title {
            color: #ff8c00;
            font-weight: bold;
            font-size: 1.25rem;
            margin-bottom: 10px;
        }
        #theoryModal .modal-content .example-solution {
            color: #ff8c00;
            font-weight: bold;
            font-size: 1.125rem;
            text-align: left;
            margin: 15px 0;
        }
        #theoryModal .modal-content li {
            color: var(--text-color);
            padding-left: 20px;
            margin-left: 10px;
            max-width: calc(100% - 30px);
            white-space: normal;
            text-align: justify;
            position: relative;
            font-size: 1.125rem;
        }
        .MathJax, mjx-container, mjx-math, mjx-mrow {
            color: var(--math-color) !important;
            font-size: 1.3rem !important;
        }
        mjx-msub {
            font-size: 1.1em !important;
        }
        mjx-container[jax="CHTML"][display="true"] {
            display: block !important;
            text-align: center !important;
            overflow-x: auto !important;
            overflow-y: hidden !important;
            white-space: nowrap;
            max-width: 100%;
            margin: 0 auto !important;
            padding: 5px;
            -webkit-overflow-scrolling: touch;
        }
        .flashcard-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .flashcard {
            perspective: 1000px;
            width: 100%;
            height: 230px;
            cursor: pointer;
            outline: none;
        }
        .flashcard-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    border-radius: 15px;
    will-change: transform; /* –û–ø—Ç–∏–º—ñ–∑—É—î–º–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∞–Ω—ñ–º–∞—Ü—ñ—ó */
}
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            border-radius: 15px;
            box-sizing: border-box;
            background: #6b8e23;
            color: var(--text-color);
        }
        .flashcard-back {
            transform: rotateY(180deg);
            background: #4f7942;
            color: var(--math-color);
            text-align: justify;
        }
        .flashcard-front p, .flashcard-back p {
            font-size: 1.4rem;
            margin: 0;
            font-family: 'Lora', serif;
            line-height: 1.5;
            text-align: center;
        }
        .flashcard-back p {
            font-family: 'Roboto', sans-serif;
            font-size: 1.4rem;
            line-height: 1.6;
            text-align: left;
            white-space: normal;
        }
        .flashcard-back li {
            color: var(--math-color);
            padding-left: 20px;
            margin-left: 10px;
            max-width: calc(100% - 30px);
            white-space: normal;
            text-align: justify;
            position: relative;
            font-size: 1.125rem;
        }
        .trainer-container {
            width: 95%;
            max-width: 95%;
            padding: 25px;
            text-align: center;
            background: linear-gradient(135deg, #2e1065, #6b21a8);
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(236, 72, 153, 0.5);
            position: relative;
            min-height: 600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            overflow-y: auto;
                                        box-sizing: border-box;
        }
        .solution {
            color: #ff8c00;
            font-weight: bold;
            text-align: center;
            display: block;
        }
        .trainer-question {
            font-size: clamp(18px, 3vw, 20px);
            color: #f0e7ff;
            margin-bottom: 25px;
        }
        .trainer-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, auto);
            gap: 15px;
            max-width: 750px;
            margin: 25px auto;
            justify-items: center;
            align-items: stretch;
        }
        .trainer-option {
    background: linear-gradient(135deg, #1e40af, #3b82f6);
    color: #f0e7ff;
    padding: 12px;
    border-radius: 10px;
    cursor: pointer;
    font-size: clamp(18px, 3vw, 20px);
    text-align: center;
    border: 2px solid rgba(167, 139, 250, 0.5);
    transition: background 0.3s ease, transform 0.2s ease;
    width: 100%;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 80px;
}
.trainer-option mjx-container {
    font-size: 0.9em !important;
    text-align: center !important;
}
        .trainer-option:hover {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            transform: scale(1.03);
        }
        .trainer-option.selected {
            background: linear-gradient(135deg, #a78bfa, #c026d3);
            border-color: #facc15;
        }
            .trainer-option mjx-container[display="true"] {
    display: block !important;
    text-align: center !important;
    margin: 0 auto !important;
}
        .trainer-submit {
            background: linear-gradient(135deg, #22c55e, #86efac);
            color: #1e1e5f;
            border: none;
            border-radius: 10px;
            padding: 12px 25px;
            font-size: clamp(18px, 2.8vw, 20px);
            cursor: pointer;
            margin-top: 25px;
            transition: background 0.3s ease, transform 0.2s ease;
        }
        .trainer-submit:hover {
            background: linear-gradient(135deg, #86efac, #4ade80);
            transform: scale(1.05);
        }
        .trainer-feedback.correct {
            color: #3498DB !important;
            background: rgba(232, 245, 233, 0.95) !important;
            opacity: 1 !important;
            display: block !important;
        }
        .trainer-feedback.wrong {
            color: #E74C3C !important;
            background: rgba(255, 235, 238, 0.95) !important;
            opacity: 1 !important;
            display: block !important;
        }
          /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Å–º—É–≥–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–ª—è .trainer-container */
.trainer-container::-webkit-scrollbar {
    width: 12px; /* –®–∏—Ä–∏–Ω–∞ —Å–º—É–≥–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
}

.trainer-container::-webkit-scrollbar-track {
    background: rgba(167, 139, 250, 0.2); /* –ü—Ä–æ–∑–æ—Ä–∏–π —Ñ–æ–Ω —Ç—Ä–µ–∫—É –∑ –ª–µ–≥–∫–∏–º —Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–º –≤—ñ–¥—Ç—ñ–Ω–∫–æ–º */
    border-radius: 10px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—è –∫—Ä–∞—ó–≤ —Ç—Ä–µ–∫—É */
    margin: 5px; /* –í—ñ–¥—Å—Ç—É–ø–∏ –¥–ª—è –µ—Å—Ç–µ—Ç–∏—á–Ω–æ–≥–æ –≤–∏–≥–ª—è–¥—É */
}

.trainer-container::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #d81b60, #f06292); /* –ì—Ä–∞–¥—ñ—î–Ω—Ç –≤—ñ–¥ —Ç–µ–º–Ω–æ-—Ä–æ–∂–µ–≤–æ–≥–æ –¥–æ —Å–≤—ñ—Ç–ª–æ-—Ä–æ–∂–µ–≤–æ–≥–æ */
    border-radius: 10px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—è –±—ñ–≥—É–Ω–∫–∞ */
    border: 2px solid rgba(167, 139, 250, 0.3); /* –û–±–≤–µ–¥–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç—É */
}

.trainer-container::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #f06292, #d81b60); /* –ó–º—ñ–Ω–∞ –≥—Ä–∞–¥—ñ—î–Ω—Ç–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ */
}

/* –°—Ç–∏–ª—ñ –¥–ª—è Firefox */
.trainer-container {
    scrollbar-width: thin; /* –¢–æ–Ω–∫–∞ —Å–º—É–≥–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
    scrollbar-color: #f06292 rgba(167, 139, 250, 0.2); /* –ö–æ–ª—ñ—Ä –±—ñ–≥—É–Ω–∫–∞ —ñ —Ç—Ä–µ–∫—É */
}  
       .question-circle {
    width: clamp(100px, 16vw, 130px);
    height: clamp(100px, 16vw, 130px);
    min-width: clamp(100px, 16vw, 130px); /* –î–æ–¥–∞–Ω–æ */
    min-height: clamp(100px, 16vw, 130px); /* –î–æ–¥–∞–Ω–æ */
    max-width: clamp(100px, 16vw, 130px); /* –î–æ–¥–∞–Ω–æ */
    max-height: clamp(100px, 16vw, 130px); /* –î–æ–¥–∞–Ω–æ */
    aspect-ratio: 1/1;
    background: linear-gradient(135deg, #d81b60, #f06292);
    border-radius: 50%;
    color: var(--math-color);
    font-family: 'Lora', serif;
    font-weight: 700;
    margin: 0 auto 25px;
    border: 3px dashed #a78bfa;
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
    padding: 0;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: clamp(1.0rem, 2.5vw, 1.1rem);
    text-align: center;
    white-space: nowrap;
    line-height: 1.2;
    overflow: hidden;
}
        .question-circle span {
    font-size: inherit;
    font-family: inherit;
    font-weight: inherit;
    color: inherit;
    margin: 0;
    padding: 0;
    text-align: center;
    display: flex; /* –ó–º—ñ–Ω–µ–Ω–æ –∑ inline-flex –Ω–∞ flex */
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}
       .question-circle mjx-container,
.question-circle .MathJax {
    display: none !important; /* –£–∂–µ —î, –∞–ª–µ –∑–∞–ª–∏—à–∞—î–º–æ –¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ */
}
    .trainer-input {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 20px 0;
    width: 100%;
    max-width: 300px;
}
.trainer-input label {
    font-family: 'Lora', serif;
    font-size: clamp(1.1rem, 2.5vw, 1.2rem);
    color: var(--math-color);
    margin-bottom: 10px;
    text-align: center;
}
.answer-input {
    background: #34495E;
    color: var(--text-color);
    border: 2px solid rgba(167, 139, 250, 0.5);
    border-radius: 8px;
    padding: 10px;
    font-size: clamp(1rem, 2.2vw, 1.1rem);
    font-family: 'Roboto', sans-serif;
    width: 100%;
    max-width: 180px;
    text-align: center;
    box-sizing: border-box;
}
.answer-input:focus {
    outline: none;
    border-color: #facc15;
    background: #4a5568;
}
.answer-input::placeholder {
    color: rgba(255, 255, 255, 0.6);
}
            #questionText {
            font-family: 'Lora', serif;
            font-size: clamp(1.2rem, 3vw, 1.3rem);
            color: #fffff0;
            font-weight: 700;
            line-height: 1.4;
            margin: 15px 0;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        #questionsModal mjx-container {
            font-size: clamp(24px, 3.2vw, 26px) !important;
            color: #ffff00 !important;
            max-width: 100%;
            box-sizing: border-box;
            overflow: hidden;
        }
        #questionsModal .card-front mjx-container,
        #questionsModal .card-back mjx-container {
            display: inline !important;
            margin: 0 0.3em !important;
            padding: 0 !important;
            vertical-align: -0.1em !important;
        }
        #questionsModal .card-back mjx-container[display="true"] {
            display: block !important;
            text-align: center !important;
            margin: 4px auto;
            padding: 4px;
        }
        .answer-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 20px 0;
            justify-items: center;
        }
        .answer-button {
            background: #34495E;
            color: var(--text-color);
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-family: 'Roboto', sans-serif;
            font-size: 1.25rem;
            cursor: pointer;
            width: 100%;
            max-width: 300px;
            text-align: center;
        }
        .answer-button:hover:not(:disabled) {
            background: #9B59B6;
        }
        .answer-button.selected {
            background: #3498DB;
        }
        .answer-button.correct {
            background: #3498DB;
        }
        .answer-button.wrong {
            background: #E74C3C;
        }
        .answer-button:disabled {
            background: #7F8C8D;
            cursor: not-allowed;
        }
        .answer-button .MathJax, .answer-button mjx-container, .answer-button mjx-math, .answer-button mjx-mrow {
            color: var(--math-color) !important;
            font-size: 1.3rem !important;
        }
        /* –û–Ω–æ–≤–ª–µ–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è .result-message */
.result-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5rem;
    font-family: 'Lora', serif;
    font-weight: bold;
    text-align: center;
    padding: 20px 40px;
    border-radius: 12px;
    min-width: 300px;
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    opacity: 0;
    transition: opacity 0.1s ease; /* –ó–º–µ–Ω—à–µ–Ω–æ –¥–æ 0.1—Å –¥–ª—è —à–≤–∏–¥–∫–æ—ó –∞–Ω—ñ–º–∞—Ü—ñ—ó */
    z-index: 1001;
    display: none;
}
.result-message.correct {
    color: #3498DB;
    background: rgba(232, 245, 233, 0.95);
    opacity: 1;
}
.result-message.wrong {
    color: #E74C3C;
    background: rgba(255, 235, 238, 0.95);
    opacity: 1;
}
            .system-equation {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 10px 0;
    font-size: clamp(1.1rem, 2.5vw, 1.2rem);
    color: var(--math-color);
}

.system-equation mjx-container {
    font-size: 1.2rem !important;
}

.system-equation .answer-input {
    margin-left: 10px;
    width: 80px;
    max-width: 80px;
    font-size: clamp(1rem, 2vw, 1.1rem);
}
            /* –î–ª—è –≤—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ */
#systemEquations.trainer-options.question-4,
#systemEquations.trainer-options.question-5 {
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-width: 100%;
    align-items: center;
}

.trainer-inputs {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.trainer-input {
    width: 100%;
    max-width: 600px;
    min-height: 60px;
    box-sizing: border-box;
}

.input-row {
    display: flex;
    flex-direction: column !important; /* –ü—Ä–∏–º—É—Å–æ–≤–æ –∫–æ–ª–æ–Ω–∫–∞ */
    align-items: flex-start;
    gap: 5px;
    width: 100%;
}

.label-text {
    font-family: 'Lora', serif;
    font-size: clamp(1.1rem, 2.5vw, 1.2rem);
    color: var(--math-color);
    text-align: left;
}

.latex-input {
    display: flex;
    align-items: center;
    gap: 10px;
}

.latex-text {
    font-family: 'Lora', serif;
    font-size: clamp(1.1rem, 2.5vw, 1.2rem);
    color: var(--math-color);
    white-space: nowrap;
}

.latex-input .answer-input {
    background: #34495E;
    color: var(--text-color);
    border: 2px solid rgba(167, 139, 250, 0.5);
    border-radius: 8px;
    padding: 8px; /* –ó–±—ñ–ª—å—à–µ–Ω–æ –∑ 6px –¥–ª—è –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–æ—Å—Ç—ñ */
    font-size: clamp(1rem, 2.2vw, 1.1rem); /* –ó–±—ñ–ª—å—à–µ–Ω–æ –¥–ª—è –∫—Ä–∞—â–æ—ó —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ */
    font-family: 'Roboto', sans-serif;
    max-width: 170px; /* –ó–±—ñ–ª—å—à–µ–Ω–æ –∑ 120px */
    text-align: center;
    box-sizing: border-box;
}


.latex-input .answer-input:focus {
    outline: none;
    border-color: #facc15;
    background: #4a5568;
    animation: none; /* –í–∏–¥–∞–ª—è—î–º–æ –º–æ–∂–ª–∏–≤—ñ –∞–Ω—ñ–º–∞—Ü—ñ—ó */
}

.latex-input .answer-input::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

/* –ö–æ–Ω—Ç—Ä–æ–ª—å MathJax */
.latex-text mjx-container {
    display: inline-block !important;
    vertical-align: middle !important;
    margin: 0 !important;
}


/* –í–∏–¥–∞–ª—è—î–º–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–Ω—ñ —Å—Ç–∏–ª—ñ */
.system-equation .answer-input {
    display: none; /* –ê–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏, —è–∫—â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è */
}

/* –ü–µ—Ä–µ–∫—Ä–∏–≤–∞—î–º–æ —Å—Ç–∞—Ä—ñ —Å—Ç–∏–ª—ñ –¥–ª—è .input-row */
#systemEquations.trainer-options.question-4 .input-row,
#systemEquations.trainer-options.question-5 .input-row {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
}

/* –í–∏–¥–∞–ª—è—î–º–æ –º–æ–∂–ª–∏–≤—ñ –∞–Ω—ñ–º–∞—Ü—ñ—ó –±–ª–∏–º–∞–Ω–Ω—è */
.label-text, .latex-text, .latex-input .answer-input {
    animation: none !important;
    transition: none !important;
}
    

/* –ë–∞–∑–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è completion-message (–¥–ª—è –¥–µ—Å–∫—Ç–æ–ø—É) */
.completion-message {
    display: none; /* –ü—Ä–∏—Ö–æ–≤–∞–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #d0f0c0; /* –°–≤—ñ—Ç–ª–æ-–∑–µ–ª–µ–Ω–∏–π —Ñ–æ–Ω */
    border-radius: 10px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    padding: 20px;
    width: 80%;
    max-width: 500px;
    text-align: center;
    z-index: 1100; /* –í–∏—â–µ –∑–∞ .trainer-container */
    flex-direction: column;
    gap: 15px;
    align-items: center;
}

.completion-message.active {
    display: flex; /* –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ —è–∫ flex, –∫–æ–ª–∏ –∞–∫—Ç–∏–≤–Ω–µ */
}

.completion-message h2 {
    margin: 0;
    font-size: 1.5rem;
    color: #333;
}

.completion-message p {
    margin: 10px 0;
    font-size: 1rem;
    color: #333;
}

.completion-message .completion-emoji {
    width: clamp(100px, 18vw, 140px);
    height: clamp(100px, 18vw, 140px);
    margin: 0 auto 20px;
    border-radius: 50%;
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    border: 3px dashed #b3372c;
    display: flex;
    justify-content: center;
    align-items: center;
}

.completion-message .completion-emoji::after {
    content: 'üéâ';
    font-size: clamp(50px, 10vw, 70px);
    color: #c41e3a;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
}

.completion-message button {
    padding: 10px 20px;
    background: #6b8e23;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.2s;
}

.completion-message button:hover {
    background: #556b2f;
}
       
        #resetTrainerBtn {
            display: block;
            margin: 20px auto;
            padding: 12px 24px;
            font-size: 18px;
            font-weight: bold;
            color: var(--text-color);
            background: #E74C3C;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        #resetTrainerBtn:hover {
            background: #9B59B6;
        }
        .video-card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 20px;
        }
        .video-card {
            width: 350px;
            height: 250px;
            background: var(--bg-gradient);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            color: var(--text-color);
        }
        .video-card:hover {
            background: var(--bg-hover);
        }
        .video-card img {
            width: 40px;
            height: 40px;
            margin-bottom: 8px;
            object-fit: cover;
            border-radius: 6px;
        }
        .video-player-container {
            width: 80vw;
            max-width: 960px;
            aspect-ratio: 16 / 9;
            margin: 20px auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .video-player-container iframe {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: block;
            border: none;
        }
        .video-card h3 {
            font-size: clamp(16px, 2.5vw, 18px);
            font-weight: 600;
            color: var(--text-color);
        }
        .glow-title {
            font-family: 'Lora', serif;
            font-size: 1.5rem;
            color: var(--math-color);
            text-align: center;
            margin-bottom: 20px;
        }
        .math-loading {
            visibility: hidden;
            opacity: 0;
        }
        .math-loaded {
            visibility: visible;
            opacity: 1;
        }
        .answer-select {
            background: #34495E;
            color: var(--text-color);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px;
            font-family: 'Roboto', sans-serif;
            font-size: 1.2rem;
            cursor: pointer;
            width: 150px;
            margin-left: 5px;
        }
        .answer-select:hover:not(:disabled) {
            background: #9B59B6;
        }
        .answer-select:disabled {
            background: #7F8C8D;
            cursor: not-allowed;
        }
        .answer-options label {
            font-family: 'Lora', serif;
            font-size: 1.2rem;
            color: var(--math-color);
            margin-right: 5px;
        }
        #systemText {
            margin: 20px 0;
            font-size: 1.3rem;
            color: var(--math-color);
            text-align: center;
        }
        #systemText mjx-container[jax="CHTML"][display="true"] {
            display: block !important;
            text-align: center !important;
            margin: 0 auto !important;
        }
        .trainer-option.disabled {
            background: #7F8C8D;
            cursor: not-allowed;
        }
        .trainer-option.correct {
            background: linear-gradient(135deg, #22c55e, #86efac);
            border-color: #facc15;
        }
        .trainer-option.wrong {
            background: linear-gradient(135deg, #E74C3C, #ff6b6b);
            border-color: #facc15;
        }
           

       /* –û–±'—î–¥–Ω–∞–Ω—ñ –º–µ–¥—ñ–∞-–∑–∞–ø–∏—Ç–∏ –¥–ª—è max-width: 768px */
@media (max-width: 768px) {
    .title-box {
        margin-top: 40px;
        padding: 15px 20px;
    }

    .title-box h1 {
        font-size: 1.5rem;
    }

    .section-container {
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }

    .section {
        width: 80%;
        height: 180px;
    }

    .section h2 {
        font-size: 1.125rem;
    }

    .nav-button {
        font-size: 0.9rem;
        padding: 8px 16px;
    }

    .tab-button {
        font-size: 1rem;
        padding: 8px 16px;
    }

    .tab-content {
        padding: 15px;
    }

    .modal {
        top: 2%;
        left: 2%;
        width: 96%;
        height: 96%;
    }

    .trainer-container {
        width: 95%;
        padding: 4vw;
    }

   .trainer-options {
        display: flex !important;
        flex-direction: column !important;
        gap: 15px;
        max-width: 100%;
        align-items: center;
    }

    .trainer-options .trainer-option {
        width: 100%;
        max-width: 500px;
        min-height: 80px;
        font-size: clamp(16px, 2.8vw, 18px);
        box-sizing: border-box;
        text-align: center;
    }
    .trainer-input {
        max-width: 250px;
    }

    .answer-input {
        font-size: clamp(0.9rem, 2vw, 1rem);
        max-width: 150px;
    }

    .question-circle {
        width: clamp(80px, 15vw, 100px);
        height: clamp(80px, 15vw, 100px);
        font-size: clamp(1rem, 2.5vw, 1.25rem);
    }

    .video-card-container {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
    }

    .video-card {
        width: 260px;
        height: 160px;
        margin: 5px;
    }

    .video-card img {
        width: 40px;
        height: 40px;
        margin-bottom: 6px;
    }

    .video-player-container {
        width: 80vw;
        max-width: 600px;
        aspect-ratio: 16 / 9;
    }

    .video-card h3 {
        font-size: clamp(14px, 2.5vw, 16px);
    }

    .flashcard {
        height: 180px;
    }

    .flashcard-front p,
    .flashcard-back p {
        font-size: 1.125rem;
    }

    .flashcard-front,
    .flashcard-back {
        padding: 15px;
    }
    .answer-select {
        font-size: 1rem;
        width: 120px;
    }

    .answer-options label {
        font-size: 1rem;
    }

    #questionText {
        font-size: clamp(1.25rem, 3vw, 1.5rem);
    }

    #questionText .MathJax,
    #questionText mjx-container,
    #questionText mjx-math,
    #questionText mjx-mrow {
        font-size: clamp(1.1rem, 2.5vw, 1.3rem) !important;
    }

    .system-equation {
        font-size: clamp(1rem, 2.2vw, 1.1rem);
    }

    .system-equation .answer-input {
        width: 60px;
        font-size: clamp(0.9rem, 1.8vw, 1rem);
    }

    mjx-container[jax="CHTML"][display="true"] {
        display: block !important;
        text-align: center !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        white-space: nowrap;
        max-width: 100%;
        margin: 0 auto !important;
        padding: 8px;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: #f06292 rgba(167, 139, 250, 0.2);
    }

    mjx-container[jax="CHTML"][display="true"]::-webkit-scrollbar {
        height: 10px;
    }

    mjx-container[jax="CHTML"][display="true"]::-webkit-scrollbar-track {
        background: rgba(167, 139, 250, 0.2);
        border-radius: 10px;
        margin: 5px;
    }

    mjx-container[jax="CHTML"][display="true"]::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #d81b60, #f06292);
        border-radius: 10px;
        border: 2px solid rgba(167, 139, 250, 0.3);
    }

    mjx-container[jax="CHTML"][display="true"]::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #f06292, #d81b60);
    }
        #trainerModal.modal {
        top: 1%;
        left: 1%;
        width: 98%;
        height: 98%;
        border-radius: 10px; /* –ó–º–µ–Ω—à—É—î–º–æ —Ä–∞–¥—ñ—É—Å –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö, —â–æ–± –≤–∏–≥–ª—è–¥–∞–ª–æ –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–æ */
        overflow-y: auto; /* –î–æ–∑–≤–æ–ª—è—î–º–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
        -webkit-overflow-scrolling: touch; /* –ü–ª–∞–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –Ω–∞ iOS */
    }

    #trainerModal .modal-content {
        padding: 15px;
        margin: 5px;
        width: calc(100% - 10px); /* –í—Ä–∞—Ö–æ–≤—É—î–º–æ –≤—ñ–¥—Å—Ç—É–ø–∏ */
        box-sizing: border-box;
        min-height: calc(100% - 50px); /* –í—Ä–∞—Ö–æ–≤—É—î–º–æ –≤–∏—Å–æ—Ç—É –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
    }

    #trainerModal .trainer-container {
        width: 100%;
        max-width: 100%;
        padding: 10px;
        min-height: auto; /* –î–æ–∑–≤–æ–ª—è—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ –≤–º—ñ—Å—Ç—É */
        overflow-y: visible; /* –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ –æ–±—Ä—ñ–∑–∞–Ω–Ω—é –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ */
    }

    #trainerModal .trainer-options {
        gap: 10px;
        max-width: 100%;
        align-items: center;
    }

    #trainerModal .trainer-option {
        width: 100%;
        max-width: 100%;
        min-height: 70px;
        padding: 8px;
        font-size: clamp(14px, 2.5vw, 16px);
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    #trainerModal mjx-container[jax="CHTML"][display="true"] {
        font-size: 0.85em !important; /* –ó–º–µ–Ω—à—É—î–º–æ —Ä–æ–∑–º—ñ—Ä –º–∞—Ç—Ä–∏—Ü—å –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö */
        padding: 4px;
        max-width: 100%;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
        margin: 0 auto !important;
    }

    #trainerModal .question-circle {
        width: clamp(80px, 14vw, 90px);
        height: clamp(80px, 14vw, 90px);
        font-size: clamp(0.9rem, 2.2vw, 1rem);
    }

    #trainerModal .trainer-question {
        font-size: clamp(16px, 2.8vw, 18px);
    }
    .completion-message {
        width: 90%;
        max-width: 400px;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .completion-message h2 {
        font-size: clamp(1.2rem, 3vw, 1.4rem);
    }

    .completion-message p {
        font-size: clamp(0.9rem, 2.5vw, 1rem);
    }

    .completion-message .completion-emoji {
        font-size: clamp(2rem, 5vw, 2.2rem);
    }

    .completion-message button {
        padding: 8px 16px;
        font-size: clamp(0.85rem, 2.3vw, 0.95rem);
    }

    /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ —Ä–µ—à—Ç—É –≤–º—ñ—Å—Ç—É, –∫–æ–ª–∏ completion-message –∞–∫—Ç–∏–≤–Ω–µ */
    .completion-message.active ~ * {
        display: none;
    }
}

/* –û–±'—î–¥–Ω–∞–Ω—ñ –º–µ–¥—ñ–∞-–∑–∞–ø–∏—Ç–∏ –¥–ª—è max-width: 480px */
@media (max-width: 480px) {
    .title-box {
        margin-top: 20px;
        padding: 10px 15px;
    }

    .title-box h1 {
        font-size: 1.25rem;
    }

    .section {
        width: 90%;
        height: 150px;
    }

    .section img {
        width: 50px;
        height: 50px;
    }

    .section h2 {
        font-size: 1rem;
    }

    .video-card-container {
        gap: 10px;
        padding: 10px;
    }

    .video-card {
        width: 90%;
        max-width: 260px;
        height: 140px;
        margin: 5px;
    }

    .video-card img {
        width: 30px;
        height: 30px;
        margin-bottom: 5px;
    }

    .video-card h3 {
        font-size: clamp(12px, 2.5vw, 14px);
    }

    .video-player-container {
        width: 80vw;
        max-width: 400px;
        aspect-ratio: 16 / 9;
    }

    #theoryModal .modal-content h3 {
        font-size: 1.25rem;
    }

    .example-title {
        font-size: 1.0rem;
    }

    .example-solution {
        font-size: 1.0rem;
    }

    .MathJax, mjx-container, mjx-math, mjx-mrow {
        font-size: 1.0rem !important;
    }

    .trainer-options.question-2 {
        display: flex;
        flex-direction: column;
        gap: 10px;
        max-width: 100%;
    }

    .trainer-options.question-2 .trainer-option {
        width: 100%;
        max-width: 400px;
        min-height: 70px;
        font-size: clamp(14px, 2.5vw, 16px);
        padding: 10px;
    }

    .trainer-input {
        max-width: 200px;
    }

    .answer-input {
        font-size: clamp(0.8rem, 1.8vw, 0.9rem);
        max-width: 120px;
    }

    .question-circle {
        width: clamp(70px, 14vw, 90px);
        height: clamp(70px, 14vw, 90px);
        font-size: clamp(0.9rem, 2.2vw, 1rem);
    }

    .question-circle h3 {
        font-size: clamp(0.9rem, 2.5vw, 1.0rem);
    }

    #questionText {
        font-size: clamp(1rem, 2.5vw, 1.25rem);
    }

    #questionText .MathJax,
    #questionText mjx-container,
    #questionText mjx-math,
    #questionText mjx-mrow {
        font-size: clamp(0.9rem, 2.2vw, 1.1rem) !important;
    }

    .answer-button {
        font-size: 1.0rem;
    }

    .answer-select {
        font-size: 0.9rem;
        width: 100px;
    }

    .answer-options label {
        font-size: 0.9rem;
    }

    #systemText {
        font-size: 0.9rem;
    }
.flashcard {
        height: 200px;
    }

    .flashcard-front p,
    .flashcard-back p {
        font-size: 1.1rem;
    }

    .flashcard-front,
    .flashcard-back {
        padding: 8px;
    }

       .system-equation {
        font-size: clamp(0.9rem, 2vw, 1rem);
    }

    .system-equation .answer-input {
        width: 50px;
        font-size: clamp(0.8rem, 1.6vw, 0.9rem);
    }
     #trainerModal.modal {
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 8px; /* –©–µ –º–µ–Ω—à–∏–π —Ä–∞–¥—ñ—É—Å –¥–ª—è –¥—É–∂–µ –º–∞–ª–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤ */
        box-shadow: none; /* –í–∏–¥–∞–ª—è—î–º–æ —Ç—ñ–Ω—å –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ—Å—Ç–æ—Ä—É */
    }

    #trainerModal .modal-content {
        padding: 10px;
        margin: 0;
        width: 100%;
        min-height: calc(100% - 40px); /* –í—Ä–∞—Ö–æ–≤—É—î–º–æ –º–µ–Ω—à–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
    }

    #trainerModal .trainer-container {
        padding: 8px;
        width: 100%;
        max-width: 100%;
        border-radius: 8px;
    }

    #trainerModal .trainer-option {
        min-height: 60px;
        padding: 6px;
        font-size: clamp(12px, 2.3vw, 14px);
    }

    #trainerModal mjx-container[jax="CHTML"][display="true"] {
        font-size: 0.8em !important; /* –©–µ –º–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä –¥–ª—è –º–∞–ª–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤ */
        padding: 3px;
    }

    #trainerModal .question-circle {
        width: clamp(70px, 13vw, 80px);
        height: clamp(70px, 13vw, 80px);
        font-size: clamp(0.8rem, 2vw, 0.9rem);
    }

    #trainerModal .trainer-question {
        font-size: clamp(14px, 2.5vw, 16px);
    }
    .completion-message {
        width: 95%;
        max-width: 350px;
        padding: 12px;
        border-radius: 6px;
    }

    .completion-message h2 {
        font-size: clamp(1.1rem, 2.8vw, 1.3rem);
    }

    .completion-message p {
        font-size: clamp(0.85rem, 2.3vw, 0.95rem);
    }

    .completion-message .completion-emoji {
        font-size: clamp(1.8rem, 4.5vw, 2rem);
    }

    .completion-message button {
        padding: 7px 14px;
        font-size: clamp(0.8rem, 2.2vw, 0.9rem);
    }
}
    </style>
</head>
<body>
    <div class="title-box">
        <h1>24. –†–æ–∑–≤‚Äô—è–∑—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º –ª—ñ–Ω—ñ–π–Ω–∏—Ö –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å –º–∞—Ç—Ä–∏—á–Ω–∏–º –º–µ—Ç–æ–¥–æ–º</h1>
    </div>
    <div class="section-container">
        <div class="section" id="openTheoryBtn">
            <img src="https://img.icons8.com/fluency/96/book-shelf.png" alt="–ö–Ω–∏–≥–∞">
            <h2>–¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ</h2>
        </div>
        <div class="section" id="openVideoBtn">
            <img src="https://img.icons8.com/fluency/96/video.png" alt="–í—ñ–¥–µ–æ">
            <h2>–í—ñ–¥–µ–æ–º–∞—Ç–µ—Ä—ñ–∞–ª–∏</h2>
        </div>
        <div class="section" id="openQuestionsBtn">
            <img src="https://img.icons8.com/fluency/96/flipboard.png" alt="–ö–∞—Ä—Ç–∫–∏">
            <h2>–ü–∏—Ç–∞–Ω–Ω—è —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</h2>
        </div>
        <div class="section" id="openTrainerBtn">
            <img src="https://img.icons8.com/fluency/96/flash-on.png" alt="–¢—Ä–µ–Ω–∞–∂–µ—Ä">
            <h2>–¢—Ä–µ–Ω–∞–∂–µ—Ä</h2>
        </div>
    </div>
    <div class="navigation-buttons">
        <a class="nav-button" href='tema6.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
            –î–æ —Ç–µ–º–∏ 6
        </a>
        <a class="nav-button" href='index.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            –ù–∞ –≥–æ–ª–æ–≤–Ω—É
        </a>
    </div>
    <div id="modalOverlay"></div>
    
    <div id="theoryModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-header">
            <button class="close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç" id="closeTheoryBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="tab-container">
                <button class="tab-button" data-tab="matrix-representation" aria-expanded="false">–ú–∞—Ç—Ä–∏—á–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏. –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–∑–≤‚Äô—è–∑—É–≤–∞–Ω–Ω—è</button>
<div id="matrix-representation" class="tab-content">
    <p>–ú–∞—Ç—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ —î –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º —Ä–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º –ª—ñ–Ω—ñ–π–Ω–∏—Ö –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å (–°–õ–ê–†), –æ—Å–∫—ñ–ª—å–∫–∏ –¥–æ–∑–≤–æ–ª—è—î –∫–æ–º–ø–∞–∫—Ç–Ω–æ –∑–∞–ø–∏—Å–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É —É –≤–∏–≥–ª—è–¥—ñ –º–∞—Ç—Ä–∏—Ü—å. –£ —Ü—å–æ–º—É –ø—É–Ω–∫—Ç—ñ —Ä–æ–∑–≥–ª—è–¥–∞—î—Ç—å—Å—è —Ä–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è –°–õ–ê–† –º–µ—Ç–æ–¥–æ–º –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ, –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ —Ä–æ–∑–≤‚Äô—è–∑—É–≤–∞–Ω–Ω—é –º–∞—Ç—Ä–∏—á–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å —Ç–∏–ø—É \( A \cdot X = B \) (–¥–∏–≤. –ü—Ä–∏–∫–ª–∞–¥ 5.14, ¬ß5, –ø.20). –î–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Ü—å–æ–≥–æ –º–µ—Ç–æ–¥—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–º—ñ—Ç–∏ –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏ –≤–∏–∑–Ω–∞—á–Ω–∏–∫–∏, –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—ñ –º–∞—Ç—Ä–∏—Ü—ñ —Ç–∞ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –º–∞—Ç—Ä–∏—á–Ω–µ –º–Ω–æ–∂–µ–Ω–Ω—è.</p>
      <p><span class="solution">–ú–∞—Ç—Ä–∏—á–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏</span></p>
    <p>–†–æ–∑–≥–ª—è–Ω–µ–º–æ —Å–∏—Å—Ç–µ–º—É –∑ —Ç—Ä—å–æ–º–∞ —Ä—ñ–≤–Ω—è–Ω–Ω—è–º–∏:</p>
    <p class="math-equation center">\[ \begin{cases} a_{11}x + a_{12}y + a_{13}z = b_1 \\ a_{21}x + a_{22}y + a_{23}z = b_2 \\ a_{31}x + a_{32}y + a_{33}z = b_3 \end{cases} \tag{6.7} \]</p>
    <p>–¶—é —Å–∏—Å—Ç–µ–º—É –º–æ–∂–Ω–∞ –∑–∞–ø–∏—Å–∞—Ç–∏ —É –≤–∏–≥–ª—è–¥—ñ:</p>
    <p class="math-equation center">\[ A \cdot X = B, \tag{6.8} \]</p>
    <p>–¥–µ:</p>
    <p class="math-equation center">\[ A = \begin{pmatrix} a_{11} & a_{12} & a_{13} \\ a_{21} & a_{22} & a_{23} \\ a_{31} & a_{32} & a_{33} \end{pmatrix}, \quad X = \begin{pmatrix} x \\ y \\ z \end{pmatrix}, \quad B = \begin{pmatrix} b_1 \\ b_2 \\ b_3 \end{pmatrix}. \]</p>
    <p>–¢–∞–∫–∏–º —á–∏–Ω–æ–º, —Å–∏—Å—Ç–µ–º—É (6.7) –º–æ–∂–Ω–∞ –∑–∞–ø–∏—Å–∞—Ç–∏ —É –∫–æ–º–ø–∞–∫—Ç–Ω—ñ–π –º–∞—Ç—Ä–∏—á–Ω—ñ–π —Ñ–æ—Ä–º—ñ:</p>
    <p class="math-equation center">\[ \begin{pmatrix} a_{11} & a_{12} & a_{13} \\ a_{21} & a_{22} & a_{23} \\ a_{31} & a_{32} & a_{33} \end{pmatrix} \cdot \begin{pmatrix} x \\ y \\ z \end{pmatrix} = \begin{pmatrix} b_1 \\ b_2 \\ b_3 \end{pmatrix} \tag{6.9} \]</p>
    <p><span class="solution">–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–∑–≤‚Äô—è–∑—É–≤–∞–Ω–Ω—è</span></p>
    <li><strong> 1) –û–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–∏–∑–Ω–∞—á–Ω–∏–∫–∞ –º–∞—Ç—Ä–∏—Ü—ñ \( A \).</strong>
            <p>–Ø–∫—â–æ –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \) –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é (\( |A| = 0 \)), —Ç–æ–¥—ñ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ–º–∞—î —î–¥–∏–Ω–æ–≥–æ —Ä–æ–∑–≤‚Äô—è–∑–∫—É (–∞–±–æ –Ω–µ—Å—É–º—ñ—Å–Ω–∞, –∞–±–æ –º–∞—î –±–µ–∑–ª—ñ—á —Ä–æ–∑–≤‚Äô—è–∑–∫—ñ–≤).</p>
            <p>–Ø–∫—â–æ –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \) –Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é (\( |A| \neq 0 \)), —Ç–æ–¥—ñ —ñ—Å–Ω—É—î —î–¥–∏–Ω–∞ –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è.</p>
        </li>
        <li><strong> 2) –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ \( A^{-1} \).</strong>
            <p>–û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é:</p>
            <p class="math-equation center">\[ A^{-1} = \frac{1}{|A|} \cdot \tilde{A}^T, \]</p>
            <p>–¥–µ \( \tilde{A}^T \) ‚Äì —Ç—Ä–∞–Ω—Å–ø–æ–Ω–æ–≤–∞–Ω–∞ —Å–æ—é–∑–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è.</p>
        </li>
        <li><strong> 3) –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —Ä–æ–∑–≤‚Äô—è–∑–∫—É.</strong>
            <p>–ü–æ–º–Ω–æ–∂–∏–≤—à–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( A^{-1} \) –Ω–∞ –º–∞—Ç—Ä–∏—Ü—é-—Å—Ç–æ–≤–ø–µ—Ü—å \( B \), –æ—Ç—Ä–∏–º—É—î–º–æ —Ä–æ–∑–≤‚Äô—è–∑–æ–∫ —Å–∏—Å—Ç–µ–º–∏:</p>
            <p class="math-equation center">\[ X = A^{-1} \cdot B. \tag{6.10} \]</p>
        </li>
</div>
               <button class="tab-button" data-tab="matrix-three" aria-expanded="false">–ü—Ä–∏–∫–ª–∞–¥</button>
<div id="matrix-three" class="tab-content">
    <p><strong><span class="example-title">–ü—Ä–∏–∫–ª–∞–¥ 6.3.</span></strong> –†–æ–∑–≤‚Äô—è–∑–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É —Ä—ñ–≤–Ω—è–Ω—å –º–∞—Ç—Ä–∏—á–Ω–∏–º –º–µ—Ç–æ–¥–æ–º:</p>
    <p class="math-equation center">\[ \begin{cases} 2x + y - z = 0 \\ x + y + z = 3 \\ x - y = 1 \end{cases} \]</p>
    <p><span class="solution">–†–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è</span></p>
    <p>–ó–∞–ø–∏—à–µ–º–æ —Å–∏—Å—Ç–µ–º—É —É –≤–∏–≥–ª—è–¥—ñ –º–∞—Ç—Ä–∏—á–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è–Ω–Ω—è \( A \cdot X = B \), –¥–µ</p>
    <p class="math-equation center">\[ A = \begin{pmatrix} 2 & 1 & -1 \\ 1 & 1 & 1 \\ 1 & -1 & 0 \end{pmatrix}, \quad X = \begin{pmatrix} x \\ y \\ z \end{pmatrix}, \quad B = \begin{pmatrix} 0 \\ 3 \\ 1 \end{pmatrix}. \]</p>
    <p>–û–±—á–∏—Å–ª–∏–º–æ –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \):</p>
    <p class="math-equation center">\[ |A| = \begin{vmatrix} 2 & 1 & -1 \\ 1 & 1 & 1 \\ 1 & -1 & 0 \end{vmatrix} = 0 + 1 + 1 + 1 - 0 + 2 = 5 \neq 0. \]</p>
    <p>–û—Å–∫—ñ–ª—å–∫–∏ \( |A| \neq 0 \), —Ç–æ–¥—ñ –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è \( A^{-1} \) —ñ—Å–Ω—É—î.</p>
    <p>–ó–Ω–∞—Ö–æ–¥–∏–º–æ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( A^{-1} \):</p>
    <p>–û–±—á–∏—Å–ª–∏–º–æ –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω—ñ –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º–∞—Ç—Ä–∏—Ü—ñ \( A \):</p>
   <p class="math-equation center">\[ A_{11} = (-1)^{1+1} \cdot \begin{vmatrix} 1 & 1 \\ -1 & 0 \end{vmatrix} = 1, \]</p>
    <p class="math-equation center">\[ A_{12} = (-1)^{1+2} \cdot \begin{vmatrix} 1 & 1 \\ 1 & 0 \end{vmatrix} = 1, \]</p>
    <p class="math-equation center">\[ A_{13} = (-1)^{1+3} \cdot \begin{vmatrix} 1 & 1 \\ 1 & -1 \end{vmatrix} = -2, \]</p>
    <p>&nbsp;</p>
    <p class="math-equation center">\[ A_{21} = (-1)^{2+1} \cdot \begin{vmatrix} 1 & -1 \\ -1 & 0 \end{vmatrix} = 1, \]</p>
    <p class="math-equation center">\[ A_{22} = (-1)^{2+2} \cdot \begin{vmatrix} 2 & -1 \\ 1 & 0 \end{vmatrix} = 1, \]</p>
    <p class="math-equation center">\[ A_{23} = (-1)^{2+3} \cdot \begin{vmatrix} 2 & 1 \\ 1 & -1 \end{vmatrix} = 3, \]</p>
    <p>&nbsp;</p>
    <p class="math-equation center">\[ A_{31} = (-1)^{3+1} \cdot \begin{vmatrix} 1 & -1 \\ 1 & 1 \end{vmatrix} = 2, \]</p>
    <p class="math-equation center">\[ A_{32} = (-1)^{3+2} \cdot \begin{vmatrix} 2 & -1 \\ 1 & 1 \end{vmatrix} = -3, \]</p>
    <p class="math-equation center">\[ A_{33} = (-1)^{3+3} \cdot \begin{vmatrix} 2 & 1 \\ 1 & 1 \end{vmatrix} = 1. \]</p>
    <p>–ó–∞–ø–∏—à–µ–º–æ —Å–æ—é–∑–Ω—É –º–∞—Ç—Ä–∏—Ü—é:</p>
    <p class="math-equation center">\[ \tilde{A} = \begin{pmatrix} 1 & 1 & -2 \\ 1 & 1 & 3 \\ 2 & -3 & 1 \end{pmatrix}. \]</p>
    <p>–¢—Ä–∞–Ω—Å–ø–æ–Ω—É—î–º–æ —ó—ó:</p>
    <p class="math-equation center">\[ \tilde{A}^T = \begin{pmatrix} 1 & 1 & 2 \\ 1 & 1 & -3 \\ -2 & 3 & 1 \end{pmatrix}. \]</p>
    <p>–û—Ç–∂–µ, –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –º–∞—î –≤–∏–≥–ª—è–¥:</p>
    <p class="math-equation center">\[ A^{-1} = \frac{1}{|A|} \cdot \tilde{A}^T = \frac{1}{5} \begin{pmatrix} 1 & 1 & 2 \\ 1 & 1 & -3 \\ -2 & 3 & 1 \end{pmatrix}. \]</p>
    <p>–ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —Ä–æ–∑–≤‚Äô—è–∑–∫—É —Å–∏—Å—Ç–µ–º–∏ –∑–Ω–∞–π–¥–µ–º–æ –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é (6.10) \( X = A^{-1} \cdot B \), –º–∞—î–º–æ:</p>
    <p class="math-equation center">\[ \begin{pmatrix} x \\ y \\ z \end{pmatrix} = \frac{1}{5} \begin{pmatrix} 1 & 1 & 2 \\ 1 & 1 & -3 \\ -2 & 3 & 1 \end{pmatrix} \cdot \begin{pmatrix} 0 \\ 3 \\ 1 \end{pmatrix} = \frac{1}{5} \begin{pmatrix} 1 \cdot 0 + 1 \cdot 3 + 2 \cdot 1 \\ 1 \cdot 0 + 1 \cdot 3 + (-3) \cdot 1 \\ (-2) \cdot 0 + 3 \cdot 3 + 1 \cdot 1 \end{pmatrix} = \frac{1}{5} \begin{pmatrix} 5 \\ 0 \\ 10 \end{pmatrix} = \begin{pmatrix} 1 \\ 0 \\ 2 \end{pmatrix}. \]</p>
    <p class="example-solution">–í—ñ–¥–ø–æ–≤—ñ–¥—å. \( (1; 0; 2) \).</p>
    <p>–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:</p>
    <p class="math-equation center">\[ \begin{cases} 2 \cdot 1 + 0 - 2 = 2 - 2 = 0 \\ 1 + 0 + 2 = 3 \\ 1 - 0 = 1 \end{cases} \]</p>
    <p>–†–æ–∑–≤‚Äô—è–∑–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.</p>
     <p><strong><span class="example-title">–ó–∞—É–≤–∞–∂–µ–Ω–Ω—è:</span></strong> <em> –Ø–∫—â–æ \( |A| = 0 \), –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ –Ω–µ —ñ—Å–Ω—É—î, —Ç–æ–º—É —Å–∏—Å—Ç–µ–º—É —Å–ª—ñ–¥ —Ä–æ–∑–≤‚Äô—è–∑—É–≤–∞—Ç–∏ —ñ–Ω—à–∏–º –º–µ—Ç–æ–¥–æ–º ‚Äì –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –º–µ—Ç–æ–¥–æ–º –ì–∞—É—Å–∞ (—Ä–æ–∑–≥–ª—è–¥–∞—î—Ç—å—Å—è —É –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –ø—É–Ω–∫—Ç—ñ, –ø. 25). –ö—Ä—ñ–º —Ç–æ–≥–æ, –¥–ª—è —Å–∏—Å—Ç–µ–º –ª—ñ–Ω—ñ–π–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å —ñ–∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∑–º—ñ–Ω–Ω–∏—Ö –º–µ—Ç–æ–¥ –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ —î –º–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º, —ñ –≤ —Ç–∞–∫–∏—Ö
     –≤–∏–ø–∞–¥–∫–∞—Ö —Ç–∞–∫–æ–∂ –¥–æ—Ü—ñ–ª—å–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ –ì–∞—É—Å–∞.</em></p>
</div>
            </div>
        </div>
    </div>
    <div id="videoModal" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <h2 class="glow-title">–û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–µ–æ</h2>
            <div class="video-card-container">
                <div class="video-card" data-video="1">
                    <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞">
                    <h3>–ó–∞–ø–∏—Å —Å–∏—Å—Ç–µ–º —Ä—ñ–≤–Ω—è–Ω—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–∞—Ç—Ä–∏—Ü—å</h3>
                </div>
                <div class="video-card" data-video="2">
                    <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞">
                    <h3>–ú–∞—Ç—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ —Ä–æ–∑–≤‚Äô—è–∑—É–≤–∞–Ω–Ω—è –°–õ–ê–†</h3>
                </div>
                            </div>
        </div>
    </div>
    <div id="videoPlayerModal1" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoPlayerBtn1">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="video-player-container">
                <iframe id="youtubePlayer1" width="100%" data-src="https://www.youtube.com/embed/Gz6v38UyS4c" src="https://www.youtube.com/embed/UVHweVUrgUM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    <div id="videoPlayerModal2" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoPlayerBtn2">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="video-player-container">
                <iframe id="youtubePlayer2" width="100%" data-src="https://www.youtube.com/embed/9R7W1WV6ye8" src="https://www.youtube.com/embed/zm55sT12X2w" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    
    <div id="questionsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="questionsTitle">
    <div class="modal-header">
        <button class="close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è" id="closeQuestionsBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="flashcard-container">
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>1. –©–æ —Ç–∞–∫–µ –º–∞—Ç—Ä–∏—á–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –ª—ñ–Ω—ñ–π–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–¶–µ –∑–∞–ø–∏—Å —Å–∏—Å—Ç–µ–º–∏ —É –≤–∏–≥–ª—è–¥—ñ –º–∞—Ç—Ä–∏—á–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è–Ω–Ω—è \( A \cdot X = B \), –¥–µ \( A \) ‚Äì –º–∞—Ç—Ä–∏—Ü—è, —â–æ –º—ñ—Å—Ç–∏—Ç—å –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ –∑–º—ñ–Ω–Ω–∏—Ö; \( X \) ‚Äì –º–∞—Ç—Ä–∏—Ü—è-—Å—Ç–æ–≤–ø–µ—Ü—å, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Å–∞–º—ñ –∑–º—ñ–Ω–Ω—ñ; \( B \) ‚Äì –º–∞—Ç—Ä–∏—Ü—è-—Å—Ç–æ–≤–ø–µ—Ü—å, —â–æ –º—ñ—Å—Ç–∏—Ç—å –≤—ñ–ª—å–Ω—ñ —á–ª–µ–Ω–∏.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>2. –ó–∞ —è–∫–æ—ó —É–º–æ–≤–∏ —Å–∏—Å—Ç–µ–º–∞ –º–∞—î —î–¥–∏–Ω–∏–π —Ä–æ–∑–≤‚Äô—è–∑–æ–∫ —É –º–∞—Ç—Ä–∏—á–Ω–æ–º—É –º–µ—Ç–æ–¥—ñ?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–Ø–∫—â–æ –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç—ñ–≤ \( |A| \neq 0 \), —Ç–æ–¥—ñ —ñ—Å–Ω—É—î –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è \( A^{-1} \) —ñ —Å–∏—Å—Ç–µ–º–∞ –º–∞—î —î–¥–∏–Ω–∏–π —Ä–æ–∑–≤‚Äô—è–∑–æ–∫.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>3. –Ø–∫ –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–ó–∞ —Ñ–æ—Ä–º—É–ª–æ—é \( A^{-1} = \frac{1}{|A|} \cdot \tilde{A}^T \), –¥–µ \( \tilde{A}^T \) ‚Äì —Ç—Ä–∞–Ω—Å–ø–æ–Ω–æ–≤–∞–Ω–∞ —Å–æ—é–∑–Ω–∞ (–ø—Ä–∏—î–¥–Ω–∞–Ω–∞) –º–∞—Ç—Ä–∏—Ü—è.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>4. –Ø–∫ –∑–Ω–∞–π—Ç–∏ —Ä–æ–∑–≤‚Äô—è–∑–æ–∫ —Å–∏—Å—Ç–µ–º–∏ –º–µ—Ç–æ–¥–æ–º –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–û–±—á–∏—Å–ª–∏—Ç–∏ –¥–æ–±—É—Ç–æ–∫ \( X = A^{-1} \cdot B \).</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>5. –©–æ —Ä–æ–±–∏—Ç–∏, —è–∫—â–æ \( |A| = 0 \)?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –Ω–µ —ñ—Å–Ω—É—î. –°–∏—Å—Ç–µ–º–∞ –∞–±–æ –Ω–µ—Å—É–º—ñ—Å–Ω–∞ (–Ω–µ–º–∞—î —Ä–æ–∑–≤‚Äô—è–∑–∫—ñ–≤), –∞–±–æ –º–∞—î –±–µ–∑–ª—ñ—á —Ä–æ–∑–≤‚Äô—è–∑–∫—ñ–≤. –£ —Ç–∞–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —ñ–Ω—à—ñ –º–µ—Ç–æ–¥–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –º–µ—Ç–æ–¥ –ì–∞—É—Å–∞).</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>6. –ß–æ–º—É –º–µ—Ç–æ–¥ –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Å–∏—Å—Ç–µ–º?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–ë–æ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ –¥–ª—è –≤–µ–ª–∏–∫–æ—ó —Ä–æ–∑–º—ñ—Ä–Ω–æ—Å—Ç—ñ —î —Å–∫–ª–∞–¥–Ω–∏–º —ñ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º; –ø—Ä–æ—Å—Ç—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ –ì–∞—É—Å–∞.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  <div id="trainerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="trainerTitle">
    <div class="modal-header">
        <button class="close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ —Ç—Ä–µ–Ω–∞–∂–µ—Ä" id="closeTrainerBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="trainer-container" id="trainerContent">
            <div class="question-circle" id="questionCircle"><span>–ü–∏—Ç–∞–Ω–Ω—è 1</span></div>
            <div class="trainer-question" id="questionText">–í–∫–∞–∂—ñ—Ç—å –≤—ñ–ª—å–Ω—ñ —á–ª–µ–Ω–∏ –∑–∞–¥–∞–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –ª—ñ–Ω—ñ–π–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å:</div>
            <div id="systemText"></div>
            <div class="trainer-options" id="optionsContainer"></div>
            <div class="system-equations" id="systemEquations" style="display: none;"></div>
            <div class="trainer-input" id="inputContainer" style="display: none;">
                <label for="determinantInput" class="trainer-question">–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–∑–Ω–∞—á–Ω–∏–∫–∞:</label>
                <input type="text" inputmode="numeric" pattern="-?[0-9]*" id="determinantInput" class="answer-input" placeholder="–í–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ" aria-label="–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–∑–Ω–∞—á–Ω–∏–∫–∞">
                <label for="xInput" class="trainer-question" style="display: none;">–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è \(x\):</label>
                <input type="text" inputmode="numeric" pattern="-?[0-9]*" id="xInput" class="answer-input" placeholder="–í–≤–µ–¥—ñ—Ç—å \(x\)" style="display: none;" aria-label="–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è x">
                <label for="yInput" class="trainer-question" style="display: none;">–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è \(y\):</label>
                <input type="text" inputmode="numeric" pattern="-?[0-9]*" id="yInput" class="answer-input" placeholder="–í–≤–µ–¥—ñ—Ç—å \(y\)" style="display: none;" aria-label="–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è y">
            </div>
            <button class="trainer-submit" id="submitAnswer" aria-label="–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–±—Ä–∞–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
            <div class="trainer-feedback result-message" id="feedback"></div>
            <div class="completion-message" id="completionMessage" style="display: none;">
                <div class="completion-emoji"></div>
                <h2>–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</h2>
                <p>–ú–æ–ª–æ–¥–µ—Ü—å!</p>
                <button id="resetTrainerBtn" aria-label="–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
            </div>
        </div>
    </div>
</div>
       <script>
document.addEventListener('DOMContentLoaded', function () {
    const elements = {
    openTheoryBtn: document.getElementById('openTheoryBtn'),
    openVideoBtn: document.getElementById('openVideoBtn'),
    openQuestionsBtn: document.getElementById('openQuestionsBtn'),
    openTrainerBtn: document.getElementById('openTrainerBtn'),
    theoryModal: document.getElementById('theoryModal'),
    videoModal: document.getElementById('videoModal'),
    questionsModal: document.getElementById('questionsModal'),
    trainerModal: document.getElementById('trainerModal'),
    closeTheoryBtn: document.getElementById('closeTheoryBtn'),
    closeVideoBtn: document.getElementById('closeVideoBtn'),
    closeQuestionsBtn: document.getElementById('closeQuestionsBtn'),
    closeTrainerBtn: document.getElementById('closeTrainerBtn'),
    closeVideoPlayerBtn1: document.getElementById('closeVideoPlayerBtn1'),
    closeVideoPlayerBtn2: document.getElementById('closeVideoPlayerBtn2'),
    videoPlayerModal1: document.getElementById('videoPlayerModal1'),
    videoPlayerModal2: document.getElementById('videoPlayerModal2'),
    modalOverlay: document.getElementById('modalOverlay'),
    questionCircle: document.getElementById('questionCircle'),
    questionText: document.getElementById('questionText'),
    systemText: document.getElementById('systemText'),
    optionsContainer: document.getElementById('optionsContainer'),
    inputContainer: document.getElementById('inputContainer'),
    determinantInput: document.getElementById('determinantInput'),
    systemEquations: document.getElementById('systemEquations'),
    submitAnswer: document.getElementById('submitAnswer'),
    feedback: document.getElementById('feedback'),
    completionMessage: document.getElementById('completionMessage'),
    resetTrainerBtn: document.getElementById('resetTrainerBtn'),
    youtubePlayer1: document.getElementById('youtubePlayer1'),
    youtubePlayer2: document.getElementById('youtubePlayer2'),
    trainerContainer: document.getElementById('trainerContent'),
    correctAnswers: document.getElementById('correctAnswers'),
    totalQuestions: document.getElementById('totalQuestions')
};

    // –õ–æ–≥—ñ–∫–∞ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ —Ç–µ–æ—Ä—ñ—ó
    const tabButtons = elements.theoryModal?.querySelectorAll('.tab-button');
    const tabContents = elements.theoryModal?.querySelectorAll('.tab-content');

    function closeAllTabs() {
        tabButtons?.forEach(btn => {
            btn.classList.remove('active');
            btn.setAttribute('aria-expanded', 'false');
        });
        tabContents?.forEach(content => {
            content.classList.remove('active');
        });
    }

    function toggleTab(tabId, button) {
        const targetContent = elements.theoryModal?.querySelector(`#${tabId}`);
        if (!targetContent) return;

        const isActive = button.classList.contains('active');
        closeAllTabs();

        if (!isActive) {
            button.classList.add('active');
            button.setAttribute('aria-expanded', 'true');
            targetContent.classList.add('active');
            if (window.MathJax && MathJax.typesetPromise) {
                MathJax.typesetPromise([targetContent]).then(() => {
                    elements.theoryModal.querySelector('.modal-content').scrollTop = 0;
                });
            }
        }
    }

    tabButtons?.forEach(button => {
        button.addEventListener('click', () => {
            const tabId = button.getAttribute('data-tab');
            toggleTab(tabId, button);
        });
    });

    closeAllTabs();

    // –õ–æ–≥—ñ–∫–∞ –¥–ª—è YouTube-–≤—ñ–¥–µ–æ
    let players = {};
    const playerIds = {
        'youtubePlayer1': 'Gz6v38UyS4c',
        'youtubePlayer2': '9R7W1WV6ye8'
    };

    const playerSrcs = {
        'youtubePlayer1': elements.youtubePlayer1?.getAttribute('data-src') || '',
        'youtubePlayer2': elements.youtubePlayer2?.getAttribute('data-src') || ''
    };

    function loadYouTubeAPI() {
        if (!window.YT) {
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }
    }

    window.onYouTubeIframeAPIReady = function() {
        Object.keys(playerIds).forEach(playerId => {
            const element = elements[playerId];
            if (element) {
                players[playerId] = new YT.Player(playerId, {
                    videoId: playerIds[playerId],
                    playerVars: { 'autoplay': 0, 'controls': 1, 'rel': 0, 'showinfo': 0 },
                    events: {
                        'onReady': event => {
                            event.target.cueVideoById({ videoId: playerIds[playerId], startSeconds: 0 });
                        }
                    }
                });
            }
        });
    };

    loadYouTubeAPI();

    function stopAllVideos() {
        Object.keys(players).forEach(playerId => {
            const player = players[playerId];
            const element = elements[playerId];
            if (player && typeof player.stopVideo === 'function') {
                player.stopVideo();
            }
            if (element) {
                element.src = '';
                const parent = element.parentNode;
                const newIframe = document.createElement('iframe');
                newIframe.id = playerId;
                newIframe.setAttribute('data-src', playerSrcs[playerId]);
                newIframe.setAttribute('frameborder', '0');
                newIframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                newIframe.setAttribute('allowfullscreen', '');
                parent.replaceChild(newIframe, element);
                elements[playerId] = newIframe;
                players[playerId] = new YT.Player(playerId, {
                    videoId: playerIds[playerId],
                    playerVars: { 'autoplay': 0, 'controls': 1, 'rel': 0, 'showinfo': 0 },
                    events: {
                        'onReady': event => event.target.cueVideoById({ videoId: playerIds[playerId], startSeconds: 0 })
                    }
                });
            }
        });
    }

    function openVideoPlayerModal(videoModal, playerId) {
        stopAllVideos();
        toggleModal(elements.videoModal, false);
        toggleModal(videoModal, true);
        const element = elements[playerId];
        if (element && !element.src) {
            element.src = playerSrcs[playerId];
        }
        if (players[playerId] && typeof players[playerId].loadVideoById === 'function') {
            players[playerId].loadVideoById({ videoId: playerIds[playerId], startSeconds: 0 });
        }
    }

    function toggleModal(modal, show) {
        if (!modal) return;
        const allModals = [
            elements.theoryModal,
            elements.videoModal,
            elements.questionsModal,
            elements.trainerModal,
            elements.videoPlayerModal1,
            elements.videoPlayerModal2,
            elements.videoPlayerModal3
        ].filter(Boolean);
        allModals.forEach(m => {
            if (m && m !== modal) m.style.display = 'none';
        });
        modal.style.display = show ? 'flex' : 'none';
        elements.modalOverlay.style.display = show ? 'block' : 'none';
        document.body.style.overflow = show ? 'hidden' : 'auto';
        if (show) {
            const closeBtn = modal.querySelector('.close-btn');
            if (closeBtn) closeBtn.focus();
            if (modal === elements.trainerModal) resetTrainer();
        }
    }

    elements.openTheoryBtn?.addEventListener('click', () => toggleModal(elements.theoryModal, true));
    elements.openVideoBtn?.addEventListener('click', () => toggleModal(elements.videoModal, true));
    elements.openQuestionsBtn?.addEventListener('click', () => toggleModal(elements.questionsModal, true));
    elements.openTrainerBtn?.addEventListener('click', () => toggleModal(elements.trainerModal, true));
    elements.closeTheoryBtn?.addEventListener('click', () => toggleModal(elements.theoryModal, false));
    elements.closeVideoBtn?.addEventListener('click', () => toggleModal(elements.videoModal, false));
    elements.closeQuestionsBtn?.addEventListener('click', () => toggleModal(elements.questionsModal, false));
    elements.closeTrainerBtn?.addEventListener('click', () => toggleModal(elements.trainerModal, false));
    elements.closeVideoPlayerBtn1?.addEventListener('click', () => {
        stopAllVideos();
        toggleModal(elements.videoPlayerModal1, false);
        toggleModal(elements.videoModal, true);
    });
    elements.closeVideoPlayerBtn2?.addEventListener('click', () => {
        stopAllVideos();
        toggleModal(elements.videoPlayerModal2, false);
        toggleModal(elements.videoModal, true);
    });
        elements.modalOverlay?.addEventListener('click', () => {
        stopAllVideos();
        toggleModal(elements.theoryModal, false);
        toggleModal(elements.videoModal, false);
        toggleModal(elements.questionsModal, false);
        toggleModal(elements.trainerModal, false);
        toggleModal(elements.videoPlayerModal1, false);
        toggleModal(elements.videoPlayerModal2, false);
           });
    document.addEventListener('keydown', e => {
        if (e.key === 'Escape') {
            stopAllVideos();
            toggleModal(elements.theoryModal, false);
            toggleModal(elements.videoModal, false);
            toggleModal(elements.questionsModal, false);
            toggleModal(elements.trainerModal, false);
            toggleModal(elements.videoPlayerModal1, false);
            toggleModal(elements.videoPlayerModal2, false);
                    }
    });

    document.querySelectorAll('.flashcard').forEach(card => {
        card.addEventListener('click', () => {
            card.classList.toggle('flipped');
            if (window.MathJax && MathJax.typesetPromise) {
                MathJax.typesetPromise([card]);
            }
        });
        card.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                card.classList.toggle('flipped');
                if (window.MathJax && MathJax.typesetPromise) {
                    MathJax.typesetPromise([card]);
                }
            }
        });
    });

    document.querySelectorAll('.video-card').forEach(card => {
        card.addEventListener('click', () => {
            const videoNumber = card.getAttribute('data-video');
            const videoModal = elements[`videoPlayerModal${videoNumber}`];
            const playerId = `youtubePlayer${videoNumber}`;
            if (videoModal && playerId) openVideoPlayerModal(videoModal, playerId);
        });
    });

    // –õ–æ–≥—ñ–∫–∞ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞
    let currentQuestion = 1;
let selectedOption = null;
let currentSystem = null;
let correctAnswer = null;
let correctAnswersCount = 0;
let totalQuestionsAnswered = 0;

    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

   function generateSystem2x2() {
    let coefficients, constants, det, x, y, isCoprime;
    do {
        x = getRandomInt(-3, 3);
        y = getRandomInt(-3, 3);
        coefficients = Array(2).fill().map(() => Array(2).fill(0));
        do {
            coefficients[0][0] = getRandomInt(-5, 5); // a
            coefficients[0][1] = getRandomInt(-5, 5); // b
            coefficients[1][0] = getRandomInt(-5, 5); // c
            coefficients[1][1] = getRandomInt(-5, 5); // d
            det = coefficients[0][0] * coefficients[1][1] - coefficients[0][1] * coefficients[1][0]; // ad - bc
        } while (det !== 1 && det !== -1 || coefficients.some(row => row.every(coef => coef === 0)));
        constants = [
            coefficients[0][0] * x + coefficients[0][1] * y,
            coefficients[1][0] * x + coefficients[1][1] * y
        ];
        const equation1 = [coefficients[0][0], coefficients[0][1], constants[0]];
        const equation2 = [coefficients[1][0], coefficients[1][1], constants[1]];
        isCoprime = gcdArray(equation1) === 1 && gcdArray(equation2) === 1;
    } while (constants[0] === 0 || constants[1] === 0 || Math.abs(constants[0]) > 20 || Math.abs(constants[1]) > 20 || !isCoprime);

    const [a, b] = coefficients[0];
    const [c, d] = coefficients[1];
    const inverse = [
        [d / det, -b / det],
        [-c / det, a / det]
    ].map(row => row.map(val => Math.round(val)));

    return {
        coefficients,
        constants,
        determinants: { delta: det },
        roots: { x, y },
        inverse
    };
}
        function generateSystem3x3() {
    let coefficients, constants, det, isCoprime;
    const isDeterminantZero = Math.random() < 0.5; // 50% —à–∞–Ω—Å, —â–æ det = 0

    if (isDeterminantZero) {
        // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ –∑ det(A) = 0
        let a1, a2, a3;
        do {
            // –ü–µ—Ä—à–µ —Ä—ñ–≤–Ω—è–Ω–Ω—è: –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ –≤—ñ–¥ -3 –¥–æ 3
            a1 = [
                getRandomInt(-3, 3),
                getRandomInt(-3, 3),
                getRandomInt(-3, 3)
            ];
            while (a1.every(coef => coef === 0)) {
                a1 = [
                    getRandomInt(-3, 3),
                    getRandomInt(-3, 3),
                    getRandomInt(-3, 3)
                ];
            }

            // –î—Ä—É–≥–µ —Ä—ñ–≤–Ω—è–Ω–Ω—è: –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ –≤—ñ–¥ -5 –¥–æ 5
            a2 = [
                getRandomInt(-5, 5),
                getRandomInt(-5, 5),
                getRandomInt(-5, 5)
            ];
            while (a2.every(coef => coef === 0)) {
                a2 = [
                    getRandomInt(-5, 5),
                    getRandomInt(-5, 5),
                    getRandomInt(-5, 5)
                ];
            }

            // –¢—Ä–µ—Ç—î —Ä—ñ–≤–Ω—è–Ω–Ω—è: –ª—ñ–Ω—ñ–π–Ω–∞ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è a1 —ñ a2 –¥–ª—è det = 0
            let k1 = getRandomInt(-3, 3);
            let k2 = getRandomInt(-3, 3);
            while (k1 === 0 && k2 === 0) { // –£–Ω–∏–∫–∞—î–º–æ —Ç—Ä–∏–≤—ñ–∞–ª—å–Ω–æ—ó –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó
                k1 = getRandomInt(-3, 3);
                k2 = getRandomInt(-3, 3);
            }
            a3 = [
                k1 * a1[0] + k2 * a2[0],
                k1 * a1[1] + k2 * a2[1],
                k1 * a1[2] + k2 * a2[2]
            ];

            coefficients = [a1, a2, a3];

            // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–ª—å–Ω–∏—Ö —á–ª–µ–Ω—ñ–≤
            constants = [
                getRandomInt(-10, 10),
                getRandomInt(-10, 10),
                0 // –ë—É–¥–µ –æ–±—á–∏—Å–ª–µ–Ω–æ –Ω–∏–∂—á–µ
            ];
            while (constants[0] === 0 || constants[1] === 0) {
                constants[0] = getRandomInt(-10, 10);
                constants[1] = getRandomInt(-10, 10);
            }
            constants[2] = k1 * constants[0] + k2 * constants[1]; // b3 = k1 * b1 + k2 * b2

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±–º–µ–∂–µ–Ω—å –Ω–∞ –≤—ñ–ª—å–Ω—ñ —á–ª–µ–Ω–∏
            if (constants.some(b => Math.abs(b) > 20 || b === 0)) continue;

            // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–∏–∑–Ω–∞—á–Ω–∏–∫–∞
            det = a1[0] * (a2[1] * a3[2] - a2[2] * a3[1]) -
                  a1[1] * (a2[0] * a3[2] - a2[2] * a3[0]) +
                  a1[2] * (a2[0] * a3[1] - a2[1] * a3[0]);

            const equation1 = [...a1, constants[0]];
            const equation2 = [...a2, constants[1]];
            const equation3 = [...a3, constants[2]];
            isCoprime = gcdArray(equation1) === 1 && gcdArray(equation2) === 1 && gcdArray(equation3) === 1;
        } while (Math.abs(det) > 0.01 || !isCoprime);
    } else {
        // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ –∑ det(A) ‚â† 0
        let x, y, z;
        do {
            x = getRandomInt(-3, 3);
            y = getRandomInt(-3, 3);
            z = getRandomInt(-3, 3);
            coefficients = Array(3).fill().map(() => Array(3).fill(0));
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    coefficients[i][j] = getRandomInt(-5, 5);
                    while (coefficients[i][j] === 0) {
                        coefficients[i][j] = getRandomInt(-5, 5);
                    }
                }
            }
            constants = [
                coefficients[0][0] * x + coefficients[0][1] * y + coefficients[0][2] * z,
                coefficients[1][0] * x + coefficients[1][1] * y + coefficients[1][2] * z,
                coefficients[2][0] * x + coefficients[2][1] * y + coefficients[2][2] * z
            ];
            const [a1, a2, a3] = coefficients;
            det = a1[0] * (a2[1] * a3[2] - a2[2] * a3[1]) -
                  a1[1] * (a2[0] * a3[2] - a2[2] * a3[0]) +
                  a1[2] * (a2[0] * a3[1] - a2[1] * a3[0]);
            const equation1 = [...a1, constants[0]];
            const equation2 = [...a2, constants[1]];
            const equation3 = [...a3, constants[2]];
            isCoprime = gcdArray(equation1) === 1 && gcdArray(equation2) === 1 && gcdArray(equation3) === 1;
        } while (det === 0 || !isCoprime || constants.some(b => b === 0 || Math.abs(b) > 20));
    }

    return {
        coefficients,
        constants,
        determinants: { delta: det }
    };
}
       
            // –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—ñ –∑ –∫—Ä—É–≥–ª–∏–º–∏ –¥—É–∂–∫–∞–º–∏
function matrixToLatexWithParentheses(matrix) {
    if (matrix.length === 2) {
        return `\\begin{pmatrix} ${matrix[0][0]} & ${matrix[0][1]} \\\\ ${matrix[1][0]} & ${matrix[1][1]} \\end{pmatrix}`;
    } else {
        return `\\begin{pmatrix} ${matrix[0][0]} & ${matrix[0][1]} & ${matrix[0][2]} \\\\ ${matrix[1][0]} & ${matrix[1][1]} & ${matrix[1][2]} \\\\ ${matrix[2][0]} & ${matrix[2][1]} & ${matrix[2][2]} \\end{pmatrix}`;
    }
}
        // –î–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è–Ω—å (–≤–∂–µ —î —É –≤–∞—à–æ–º—É –∫–æ–¥—ñ)
function formatEquation(a, b, c, d = null) {
    let parts = [];
    if (a !== 0) {
        parts.push(a === 1 ? 'x' : a === -1 ? '-x' : `${a}x`);
    }
    if (b !== 0) {
        let yPart = b === 1 ? 'y' : b === -1 ? '-y' : `${b}y`;
        if (parts.length > 0) {
            yPart = b > 0 ? ` + ${yPart}` : ` - ${Math.abs(b) === 1 ? 'y' : Math.abs(b) + 'y'}`;
        }
        parts.push(yPart);
    }
    if (d !== null && c !== 0) {
        let zPart = c === 1 ? 'z' : c === -1 ? '-z' : `${c}z`;
        if (parts.length > 0) {
            zPart = c > 0 ? ` + ${zPart}` : ` - ${Math.abs(c) === 1 ? 'z' : Math.abs(c) + 'z'}`;
        }
        parts.push(zPart);
    }
    if (parts.length === 0) parts.push('0');
    return `${parts.join('')} = ${d !== null ? d : c}`;
}
        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Ä—ñ–≤–Ω—è–Ω—å —É LaTeX (–≤–∂–µ —î —É –≤–∞—à–æ–º—É –∫–æ–¥—ñ)
function systemToLatex(system, withInputs = false) {
    const size = system.coefficients.length;
    let latex = '\\begin{cases} ';
    let plainText = '';
    for (let i = 0; i < size; i++) {
        let equation = '';
        let plainEquation = '';
        let isFirstTerm = true;
        for (let j = 0; j < size; j++) {
            let coef = system.coefficients[i][j];
            let varName = ['x', 'y', 'z'][j];
            if (coef !== 0) {
                let sign = isFirstTerm ? (coef < 0 ? '-' : '') : (coef > 0 ? '+' : '-');
                if (Math.abs(coef) === 1) {
                    equation += `${sign}${varName}`;
                    plainEquation += `${sign}${varName}`;
                } else {
                    equation += `${sign}${Math.abs(coef)}${varName}`;
                    plainEquation += `${sign}${Math.abs(coef)}${varName}`;
                }
                isFirstTerm = false;
            }
        }
        if (withInputs) {
            equation += ` = \\text{ } \\input{input_b${i}}`;
            plainEquation += ` = `;
        } else {
            equation += ` = ${system.constants[i]}`;
            plainEquation += ` = ${system.constants[i]}`;
        }
        latex += equation.replace(/^\+/, '');
        plainText += plainEquation.replace(/^\+/, '') + '\n';
        if (i < size - 1) latex += ' \\\\ ';
    }
    latex += ' \\end{cases}';
    elements.systemText.dataset.plainText = plainText;
    return latex;
}

// –î–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –ù–°–î (–≤–∂–µ —î —É –≤–∞—à–æ–º—É –∫–æ–¥—ñ)
function gcd(a, b) {
    return b === 0 ? Math.abs(a) : gcd(b, a % b);
}

function gcdArray(arr) {
    return arr.reduce((a, b) => gcd(a, Math.abs(b)), Math.abs(arr[0]));
}

function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}


    // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–∏—Ç–∞–Ω–Ω—è 1 (–æ–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –≤–∞—à–æ–º—É –Ω–æ–≤–æ–º—É –ø–∏—Ç–∞–Ω–Ω—é)
function generateQuestion1() {
    currentSystem = generateSystem2x2(); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏ 2x2
    const [a1, a2] = currentSystem.coefficients; // –ú–∞—Ç—Ä–∏—Ü—è A (2x2)
    const [b1, b2] = currentSystem.constants; // –ú–∞—Ç—Ä–∏—Ü—è B
    const roots = currentSystem.roots; // –ö–æ—Ä–µ–Ω—ñ x, y

    // –ü—Ä–∞–≤–∏–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä—ñ–≤–Ω—è–Ω—å
    const correctSystem = `\\begin{cases} ${formatEquation(a1[0], a1[1], b1)} \\\\ ${formatEquation(a2[0], a2[1], b2)} \\end{cases}`;
    const correctSystemPlain = `${formatEquation(a1[0], a1[1], b1)}\n${formatEquation(a2[0], a2[1], b2)}`;

    // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    let wrongSystems = [];
    while (wrongSystems.length < 3) {
        let wrongSystem, wrongSystemPlain, comment;
        const rand = Math.floor(Math.random() * 3); // –í–∏–±—ñ—Ä —Ç–∏–ø—É –ø–æ–º–∏–ª–∫–∏

        if (rand === 0) {
            // –ü–æ–º–∏–ª–∫–∞ —Ç–∏–ø—É: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ (–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–æ -x + 3y = -5, 2x + 4y = -5)
            const wrongA1 = [a1[0], getRandomInt(-5, 5)]; // –ó–º—ñ–Ω—é—î–º–æ a1[1]
            const wrongA2 = [getRandomInt(-5, 5), a2[1]]; // –ó–º—ñ–Ω—é—î–º–æ a2[0]
            while (wrongA1[1] === a1[1] || wrongA2[0] === a2[0] || wrongA1[1] === 0 || wrongA2[0] === 0) {
                wrongA1[1] = getRandomInt(-5, 5);
                wrongA2[0] = getRandomInt(-5, 5);
            }
            wrongSystem = `\\begin{cases} ${formatEquation(wrongA1[0], wrongA1[1], b1)} \\\\ ${formatEquation(wrongA2[0], wrongA2[1], b2)} \\end{cases}`;
            wrongSystemPlain = `${formatEquation(wrongA1[0], wrongA1[1], b1)}\n${formatEquation(wrongA2[0], wrongA2[1], b2)}`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else if (rand === 1) {
            // –ü–æ–º–∏–ª–∫–∞ —Ç–∏–ø—É: –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –∑–Ω–∞–∫ —É –≤—ñ–ª—å–Ω–æ–º—É —á–ª–µ–Ω—ñ (–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–æ 3x + 4y = 5)
            wrongSystem = `\\begin{cases} ${formatEquation(a1[0], a1[1], b1)} \\\\ ${formatEquation(a2[0], a2[1], -b2)} \\end{cases}`;
            wrongSystemPlain = `${formatEquation(a1[0], a1[1], b1)}\n${formatEquation(a2[0], a2[1], -b2)}`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else {
            // –ü–æ–º–∏–ª–∫–∞ —Ç–∏–ø—É: –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –∑–Ω–∞–∫ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∞ –ø—Ä–∏ y (–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–æ 3x - 4y = -5)
            wrongSystem = `\\begin{cases} ${formatEquation(a1[0], a1[1], b1)} \\\\ ${formatEquation(a2[0], -a2[1], b2)} \\end{cases}`;
            wrongSystemPlain = `${formatEquation(a1[0], a1[1], b1)}\n${formatEquation(a2[0], -a2[1], b2)}`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        }
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —É–Ω—ñ–∫–∞–ª—å–Ω–∞ —ñ –Ω–µ –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é
        if (
            wrongSystem !== correctSystem &&
            !wrongSystems.some(ws => ws.text === wrongSystem)
        ) {
            wrongSystems.push({ text: wrongSystem, plainText: wrongSystemPlain, isCorrect: false, comment });
        }
    }
    // –§–æ—Ä–º—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    const options = [
        { text: correctSystem, plainText: correctSystemPlain, isCorrect: true, comment: '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' },
        ...wrongSystems
    ];

    return shuffleArray(options);
}

  // –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è generateQuestion2
function generateQuestion2() {
    currentSystem = generateSystem2x2();
    const [a1, a2] = currentSystem.coefficients; // –ú–∞—Ç—Ä–∏—Ü—è A: [[a1[0], a1[1]], [a2[0], a2[1]]]
    const [b1, b2] = currentSystem.constants; // –ú–∞—Ç—Ä–∏—Ü—è B: [b1, b2]

    // –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: A, X, B
    const correctAnswer = `A = ${matrixToLatexWithParentheses([a1, a2])}, \\quad X = \\begin{pmatrix} x \\\\ y \\end{pmatrix}, \\quad B = \\begin{pmatrix} ${b1} \\\\ ${b2} \\end{pmatrix}`;
    const correctPlainText = `A = [${a1.join(', ')}; ${a2.join(', ')}], X = [x; y], B = [${b1}; ${b2}]`;

    // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    let wrongAnswers = [];
    while (wrongAnswers.length < 3) {
        let wrongAnswer, wrongPlainText, comment;
        const rand = Math.floor(Math.random() * 3); // –í–∏–±—ñ—Ä —Ç–∏–ø—É –ø–æ–º–∏–ª–∫–∏

        if (rand === 0) {
            // –ü–æ–º–∏–ª–∫–∞ 1: –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ —Ä—ñ–≤–Ω—è–Ω—å –∑–∞–ø–∏—Å–∞–Ω—ñ —è–∫ —Å—Ç–æ–≤–ø—Ü—ñ –≤ A
            const wrongA = [[a1[0], a2[0]], [a1[1], a2[1]]]; // –¢—Ä–∞–Ω—Å–ø–æ–Ω—É–≤–∞–Ω–Ω—è A
            wrongAnswer = `A = ${matrixToLatexWithParentheses(wrongA)}, \\quad X = \\begin{pmatrix} x \\\\ y \\end{pmatrix}, \\quad B = \\begin{pmatrix} ${b1} \\\\ ${b2} \\end{pmatrix}`;
            wrongPlainText = `A = [${wrongA[0].join(', ')}; ${wrongA[1].join(', ')}], X = [x; y], B = [${b1}; ${b2}]`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else if (rand === 1) {
            // –ü–æ–º–∏–ª–∫–∞ 2: –ü–æ–º—ñ–Ω—è–Ω—ñ –º—ñ—Å—Ü—è–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –º–∞—Ç—Ä–∏—Ü—ñ B
            wrongAnswer = `A = ${matrixToLatexWithParentheses([a1, a2])}, \\quad X = \\begin{pmatrix} x \\\\ y \\end{pmatrix}, \\quad B = \\begin{pmatrix} ${b2} \\\\ ${b1} \\end{pmatrix}`;
            wrongPlainText = `A = [${a1.join(', ')}; ${a2.join(', ')}], X = [x; y], B = [${b2}; ${b1}]`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else {
            // –ü–æ–º–∏–ª–∫–∞ 3: –û–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç –º–∞—Ç—Ä–∏—Ü—ñ A –∑ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–º –∑–Ω–∞–∫–æ–º
            const wrongA = [a1.slice(), a2.slice()];
            const changeIndex = Math.floor(Math.random() * 4); // –í–∏–±—ñ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ A
            if (changeIndex === 0) wrongA[0][0] = -wrongA[0][0];
            else if (changeIndex === 1) wrongA[0][1] = -wrongA[0][1];
            else if (changeIndex === 2) wrongA[1][0] = -wrongA[1][0];
            else wrongA[1][1] = -wrongA[1][1];
            wrongAnswer = `A = ${matrixToLatexWithParentheses(wrongA)}, \\quad X = \\begin{pmatrix} x \\\\ y \\end{pmatrix}, \\quad B = \\begin{pmatrix} ${b1} \\\\ ${b2} \\end{pmatrix}`;
            wrongPlainText = `A = [${wrongA[0].join(', ')}; ${wrongA[1].join(', ')}], X = [x; y], B = [${b1}; ${b2}]`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        }

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
        if (
            wrongAnswer !== correctAnswer &&
            !wrongAnswers.some(wa => wa.text === wrongAnswer)
        ) {
            wrongAnswers.push({ text: wrongAnswer, plainText: wrongPlainText, isCorrect: false, comment });
        }
    }

    // –§–æ—Ä–º—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    const options = [
        { text: correctAnswer, plainText: correctPlainText, isCorrect: true, comment: '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' },
        ...wrongAnswers
    ];

    return shuffleArray(options);
}

   // –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è generateQuestion3
function generateQuestion3() {
    currentSystem = generateSystem3x3();
    const { coefficients, constants, determinants: { delta: det } } = currentSystem;

    // –í–∏–∑–Ω–∞—á–∞—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å
    const isSolvable = Math.abs(det) > 0.01;
    const correctAnswerText = isSolvable ? '–¢–∞–∫' : '–ù—ñ';
    const correctComment = '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!';

    // –§–æ—Ä–º—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    const options = [
        { 
            text: '\\text{–¢–∞–∫}', // –ü—Ä—è–º–∏–π —à—Ä–∏—Ñ—Ç
            plainText: '–¢–∞–∫', // –î–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —ñ –∑–∞–ø–∞—Å–Ω–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É
            isCorrect: isSolvable, 
            comment: isSolvable ? correctComment : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!'
        },
        { 
            text: '\\text{–ù—ñ}', 
            plainText: '–ù—ñ',
            isCorrect: !isSolvable, 
            comment: !isSolvable ? correctComment : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!'
        },
        { 
            text: '\\text{–ù–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏}', 
            plainText: '–ù–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏',
            isCorrect: false, 
            comment: '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!'
        }
    ];

    return {
        question: '–ß–∏ –º–æ–∂–Ω–∞ —Ä–æ–∑–≤‚Äô—è–∑–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É —Ä—ñ–≤–Ω—è–Ω—å –º–∞—Ç—Ä–∏—á–Ω–∏–º –º–µ—Ç–æ–¥–æ–º –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é \\( X = A^{-1} \\cdot B \\)?',
        options: shuffleArray(options),
        correctAnswer: correctAnswerText
    };
}
                 
    // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–∏—Ç–∞–Ω–Ω—è 4
function generateQuestion4() {
    currentSystem = generateSystem2x2();
    if (!currentSystem || !currentSystem.coefficients || !currentSystem.constants || !currentSystem.inverse) {
        console.error('–ü–æ–º–∏–ª–∫–∞: generateSystem2x2 –ø–æ–≤–µ—Ä–Ω—É–≤ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—É —Å–∏—Å—Ç–µ–º—É', currentSystem);
        return null;
    }
    const { coefficients, inverse } = currentSystem;
    const [a1, a2] = coefficients;
    const [a, b] = a1;
    const [c, d] = a2;
    const [inv11, inv12] = inverse[0];
    const [inv21, inv22] = inverse[1];

    // –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
    const correctLatex = `A = \\begin{pmatrix} ${a} & ${b} \\\\ ${c} & ${d} \\end{pmatrix}, \\quad A^{-1} = \\begin{pmatrix} ${inv11} & ${inv12} \\\\ ${inv21} & ${inv22} \\end{pmatrix}`;
    const correctPlainText = `A = [${a1.join(', ')}; ${a2.join(', ')}], A^(-1) = [${inverse[0].join(', ')}; ${inverse[1].join(', ')}]`;
    console.log('generateQuestion4: correctLatex:', correctLatex);

    // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    let wrongAnswers = [];
    while (wrongAnswers.length < 3) {
        let wrongA, wrongA_inv, latex, plainText, comment;
        const rand = wrongAnswers.length;
        if (rand === 0) {
            // –ü–æ–º–∏–ª–∫–∞ 1: –ó–º—ñ–Ω–∞ –∑–Ω–∞–∫—É –≤ –¥—Ä—É–≥–æ–º—É —Å—Ç–æ–≤–ø—Ü—ñ A^{-1}
            wrongA = coefficients;
            wrongA_inv = [
                [inv11, -inv12],
                [inv21, -inv22]
            ];
            latex = `A = \\begin{pmatrix} ${a} & ${b} \\\\ ${c} & ${d} \\end{pmatrix}, \\quad A^{-1} = \\begin{pmatrix} ${inv11} & ${-inv12} \\\\ ${inv21} & ${-inv22} \\end{pmatrix}`;
            plainText = `A = [${a1.join(', ')}; ${a2.join(', ')}], A^(-1) = [${wrongA_inv[0].join(', ')}; ${wrongA_inv[1].join(', ')}]`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else if (rand === 1) {
            // –ü–æ–º–∏–ª–∫–∞ 2: –ó–º—ñ–Ω–∞ —á–∏—Å–ª–∞ –≤ –ø–µ—Ä—à–æ–º—É —Å—Ç–æ–≤–ø—Ü—ñ A^{-1}
            const newInv11 = inv11 + (inv11 >= 0 ? 1 : -1);
            const newInv21 = inv21 + (inv21 >= 0 ? 1 : -1);
            wrongA = coefficients;
            wrongA_inv = [
                [newInv11, inv12],
                [newInv21, inv22]
            ];
            latex = `A = \\begin{pmatrix} ${a} & ${b} \\\\ ${c} & ${d} \\end{pmatrix}, \\quad A^{-1} = \\begin{pmatrix} ${newInv11} & ${inv12} \\\\ ${newInv21} & ${inv22} \\end{pmatrix}`;
            plainText = `A = [${a1.join(', ')}; ${a2.join(', ')}], A^(-1) = [${wrongA_inv[0].join(', ')}; ${wrongA_inv[1].join(', ')}]`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else {
            // –ü–æ–º–∏–ª–∫–∞ 3: –ó–º—ñ–Ω–∞ –∑–Ω–∞–∫—É –≤ –¥—Ä—É–≥–æ–º—É —Å—Ç–æ–≤–ø—Ü—ñ A
            wrongA = [
                [a, -b],
                [c, -d]
            ];
            wrongA_inv = inverse;
            latex = `A = \\begin{pmatrix} ${a} & ${-b} \\\\ ${c} & ${-d} \\end{pmatrix}, \\quad A^{-1} = \\begin{pmatrix} ${inv11} & ${inv12} \\\\ ${inv21} & ${inv22} \\end{pmatrix}`;
            plainText = `A = [${wrongA[0].join(', ')}; ${wrongA[1].join(', ')}], A^(-1) = [${inverse[0].join(', ')}; ${inverse[1].join(', ')}]`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        }
        if (!wrongAnswers.some(wa => wa.text === latex)) {
            wrongAnswers.push({ text: latex, plainText, isCorrect: false, comment });
        }
    }

    // –§–æ—Ä–º—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    const options = [
        { text: correctLatex, plainText: correctPlainText, isCorrect: true, comment: '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' },
        ...wrongAnswers
    ];

    return {
        question: '–í–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É –ø–∞—Ä—É ¬´–≥–æ–ª–æ–≤–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —Å–∏—Å—Ç–µ–º–∏ \\( A \\) —Ç–∞ —ó—ó –æ–±–µ—Ä–Ω–µ–Ω–∞ \\( A^{-1} \\)¬ª:',
        systemLatex: systemToLatex(currentSystem),
        options: shuffleArray(options),
        correctAnswer: { A: coefficients, A_inv: inverse }
    };
}

// –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–∏—Ç–∞–Ω–Ω—è 5
function generateQuestion5() {
    currentSystem = generateSystem2x2();
    if (!currentSystem || !currentSystem.coefficients || !currentSystem.constants || !currentSystem.inverse) {
        console.error('–ü–æ–º–∏–ª–∫–∞: generateSystem2x2 –ø–æ–≤–µ—Ä–Ω—É–≤ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—É —Å–∏—Å—Ç–µ–º—É', currentSystem);
        return null;
    }
    const { coefficients, constants, inverse } = currentSystem;
    const [a1, a2] = coefficients;
    const [a, b] = a1;
    const [c, d] = a2;
    const [b1, b2] = constants;

    // –ü—Ä–∞–≤–∏–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞: A * X = B
    const correctSystem = {
        coefficients,
        constants
    };
    const correctLatex = systemToLatex(correctSystem);
    const correctPlainText = `${formatEquation(a, b, b1)}\n${formatEquation(c, d, b2)}`;

    // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Å–∏—Å—Ç–µ–º–∏
    let wrongAnswers = [];
    while (wrongAnswers.length < 3) {
        let wrongCoefficients, wrongConstants, latex, plainText, comment;
        const rand = wrongAnswers.length;
        if (rand === 0) {
            // –ü–æ–º–∏–ª–∫–∞ 1: –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç—ñ–≤ —ñ –∑–º—ñ–Ω–∞ –∑–Ω–∞–∫—ñ–≤
            wrongCoefficients = [
                [2 * a, -b],
                [-a, b]
            ];
            wrongConstants = [b1, b2];
            latex = systemToLatex({ coefficients: wrongCoefficients, constants: wrongConstants });
            plainText = `${formatEquation(wrongCoefficients[0][0], wrongCoefficients[0][1], wrongConstants[0])}\n${formatEquation(wrongCoefficients[1][0], wrongCoefficients[1][1], wrongConstants[1])}`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else if (rand === 1) {
            // –ü–æ–º–∏–ª–∫–∞ 2: –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏—Ö —á–∞—Å—Ç–∏–Ω
            wrongCoefficients = [
                [a, 2 * b],
                [c, a]
            ];
            wrongConstants = [b2, b1];
            latex = systemToLatex({ coefficients: wrongCoefficients, constants: wrongConstants });
            plainText = `${formatEquation(wrongCoefficients[0][0], wrongCoefficients[0][1], wrongConstants[0])}\n${formatEquation(wrongCoefficients[1][0], wrongCoefficients[1][1], wrongConstants[1])}`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        } else {
            // –ü–æ–º–∏–ª–∫–∞ 3: –ó–º—ñ–Ω–∞ –∑–Ω–∞–∫—ñ–≤ —ñ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç—ñ–≤
            wrongCoefficients = [
                [a, -b],
                [2 * c, b]
            ];
            wrongConstants = [b1, b2];
            latex = systemToLatex({ coefficients: wrongCoefficients, constants: wrongConstants });
            plainText = `${formatEquation(wrongCoefficients[0][0], wrongCoefficients[0][1], wrongConstants[0])}\n${formatEquation(wrongCoefficients[1][0], wrongCoefficients[1][1], wrongConstants[1])}`;
            comment = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
        }
        if (!wrongAnswers.some(wa => wa.text === latex)) {
            wrongAnswers.push({ text: latex, plainText, isCorrect: false, comment });
        }
    }

    // –§–æ—Ä–º—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    const options = [
        { text: correctLatex, plainText: correctPlainText, isCorrect: true, comment: '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' },
        ...wrongAnswers
    ];

    // –ú–∞—Ç—Ä–∏—Ü—è A^{-1} —ñ –≤–µ–∫—Ç–æ—Ä B –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    const [inv1, inv2] = inverse;
    const inverseLatex = `A^{-1} = \\begin{pmatrix} ${inv1[0]} & ${inv1[1]} \\\\ ${inv2[0]} & ${inv2[1]} \\end{pmatrix}, \\quad B = \\begin{pmatrix} ${b1} \\\\ ${b2} \\end{pmatrix}`;
    const inversePlainText = `A^(-1) = [${inv1.join(', ')}; ${inv2.join(', ')}], B = [${b1}; ${b2}]`;

    return {
        question: '–ó–∞–¥–∞–Ω–æ –º–∞—Ç—Ä–∏—Ü—ñ: \\[' + inverseLatex + '.\\] –í–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É —Å–∏—Å—Ç–µ–º—É –ª—ñ–Ω—ñ–π–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å \\( A \\cdot X = B \\):',
        systemLatex: '', // –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ –≤ options, —Ç–æ–º—É systemLatex –ø–æ—Ä–æ–∂–Ω—ñ–π
        options: shuffleArray(options),
        correctAnswer: correctSystem,
        inverseLatex,
        inversePlainText
    };
}

// –û–Ω–æ–≤–ª–µ–Ω–Ω—è resetTrainer –¥–ª—è –ø‚Äô—è—Ç–∏ –ø–∏—Ç–∞–Ω—å
function resetTrainer() {
    console.log('resetTrainer –≤–∏–∫–ª–∏–∫–∞–Ω–æ');
    currentQuestion = 1;
    currentSystem = null;
    selectedOption = null;
    correctAnswer = null;
    correctAnswersCount = 0; // –°–∫–∏–¥–∞—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    totalQuestionsAnswered = 0; // –°–∫–∏–¥–∞—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∑–∞–≥–∞–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    if (elements.correctAnswers) elements.correctAnswers.textContent = correctAnswersCount;
    if (elements.totalQuestions) elements.totalQuestions.textContent = totalQuestionsAnswered;
    elements.questionCircle.style.display = 'block';
    elements.questionText.style.display = 'block';
    elements.systemText.style.display = 'block';
    elements.optionsContainer.style.display = 'grid';
    elements.inputContainer.style.display = 'none';
    elements.systemEquations.style.display = 'none';
    elements.submitAnswer.style.display = 'block';
    elements.completionMessage.style.display = 'none';
    elements.trainerContainer.scrollTop = 0;
    displayQuestion();
}
// –û–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è displayQuestion (–ª–∏—à–µ —á–∞—Å—Ç–∏–Ω–∞ –¥–ª—è currentQuestion === 3 –∑–º—ñ–Ω–µ–Ω–∞)
function displayQuestion() {
    console.log('displayQuestion –≤–∏–∫–ª–∏–∫–∞–Ω–æ, currentQuestion:', currentQuestion);

    if (!elements.questionCircle || !elements.questionText || !elements.systemText ||
        !elements.optionsContainer || !elements.inputContainer || !elements.systemEquations ||
        !elements.determinantInput || !elements.submitAnswer || !elements.feedback ||
        !elements.completionMessage || !elements.trainerContainer || !elements.resetTrainerBtn) {
        console.error('–û–¥–∏–Ω –∞–±–æ –∫—ñ–ª—å–∫–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ –≤ DOM');
        elements.questionText.textContent = '–ü–æ–º–∏–ª–∫–∞: –µ–ª–µ–º–µ–Ω—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ';
        return;
    }

    selectedOption = null;
    correctAnswer = null;
    elements.optionsContainer.innerHTML = '';
    elements.inputContainer.style.display = 'none';
    elements.systemEquations.innerHTML = '';
    elements.systemEquations.style.display = 'none';
    elements.systemText.innerHTML = '';
    elements.determinantInput.value = '';
    elements.submitAnswer.disabled = true;
    elements.feedback.style.opacity = '0';
    elements.feedback.style.display = 'none';
    elements.completionMessage.style.display = 'none';
    elements.optionsContainer.classList.remove('question-1', 'question-2', 'question-3', 'question-4', 'question-5');
    elements.questionCircle.innerHTML = `<span>–ü–∏—Ç–∞–Ω–Ω—è ${currentQuestion}</span>`;
    elements.questionCircle.style.width = 'clamp(100px, 16vw, 130px)';
    elements.questionCircle.style.height = 'clamp(100px, 16vw, 130px)';

    let options;
    if (currentQuestion === 1) {
        elements.questionText.innerHTML = '–í–∏–±–µ—Ä—ñ—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä—ñ–≤–Ω—è–Ω—å, —è–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ä—ñ–≤–Ω–æ—Å—Ç—ñ \\( A \\cdot X = B \\):';
        options = generateQuestion1();
        if (!options) {
            console.error('–ü–æ–º–∏–ª–∫–∞: generateQuestion1 –Ω–µ –ø–æ–≤–µ—Ä–Ω—É–≤ –¥–∞–Ω–∏—Ö');
            elements.questionText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è';
            return;
        }
        if (!currentSystem) {
            console.error('–ü–æ–º–∏–ª–∫–∞: currentSystem –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 1');
            elements.systemText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏';
            return;
        }
        const [a1, a2] = currentSystem.coefficients;
        const [b1, b2] = currentSystem.constants;
        elements.systemText.innerHTML = `\\[ A = ${matrixToLatexWithParentheses([a1, a2])}, \\quad X = \\begin{pmatrix} x \\\\ y \\end{pmatrix}, \\quad B = \\begin{pmatrix} ${b1} \\\\ ${b2} \\end{pmatrix} \\]`;
        elements.optionsContainer.style.display = 'grid';
        elements.inputContainer.style.display = 'none';
        elements.systemEquations.style.display = 'none';
        elements.optionsContainer.classList.add('question-1');
        options.forEach((opt, index) => {
            const option = document.createElement('div');
            option.className = 'trainer-option';
            option.innerHTML = `\\[${opt.text}\\]`;
            option.setAttribute('data-index', index);
            option.setAttribute('data-plaintext', opt.plainText);
            option.addEventListener('click', () => {
                document.querySelectorAll('.trainer-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedOption = opt;
                elements.submitAnswer.disabled = false;
            });
            elements.optionsContainer.appendChild(option);
        });
        elements.systemText.dataset.plainText = `A = [${a1.join(', ')}; ${a2.join(', ')}], X = [x; y], B = [${b1}; ${b2}]`;
    } else if (currentQuestion === 2) {
        elements.questionText.innerHTML = '–ó–∞–ø–∏—Å–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É —Ä—ñ–≤–Ω—è–Ω—å —É –≤–∏–≥–ª—è–¥—ñ –º–∞—Ç—Ä–∏—á–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è–Ω–Ω—è \\( A \\cdot X = B \\):';
        options = generateQuestion2();
        if (!options) {
            console.error('–ü–æ–º–∏–ª–∫–∞: generateQuestion2 –Ω–µ –ø–æ–≤–µ—Ä–Ω—É–≤ –¥–∞–Ω–∏—Ö');
            elements.questionText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è';
            return;
        }
        if (!currentSystem) {
            console.error('–ü–æ–º–∏–ª–∫–∞: currentSystem –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 2');
            elements.systemText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏';
            return;
        }
        elements.systemText.innerHTML = `\\[${systemToLatex(currentSystem)}\\]`;
        elements.optionsContainer.style.display = 'grid';
        elements.inputContainer.style.display = 'none';
        elements.systemEquations.style.display = 'none';
        elements.optionsContainer.classList.add('question-2');
        options.forEach((opt, index) => {
            const option = document.createElement('div');
            option.className = 'trainer-option';
            option.innerHTML = `\\[${opt.text}\\]`;
            option.setAttribute('data-index', index);
            option.setAttribute('data-plaintext', opt.plainText);
            option.addEventListener('click', () => {
                document.querySelectorAll('.trainer-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedOption = opt;
                elements.submitAnswer.disabled = false;
            });
            elements.optionsContainer.appendChild(option);
        });
        elements.systemText.dataset.plainText = currentSystem.coefficients.map((row, i) => 
            `${formatEquation(row[0], row[1], currentSystem.constants[i])}`).join('\n');
    } else if (currentQuestion === 3) {
        const q3 = generateQuestion3();
        if (!q3 || !q3.options || !q3.correctAnswer) {
            console.error('–ü–æ–º–∏–ª–∫–∞: generateQuestion3 –Ω–µ –ø–æ–≤–µ—Ä–Ω—É–≤ –¥–∞–Ω–∏—Ö –∞–±–æ correctAnswer');
            elements.questionText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è';
            return;
        }
        elements.questionText.innerHTML = q3.question;
        if (!currentSystem) {
            console.error('–ü–æ–º–∏–ª–∫–∞: currentSystem –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 3');
            elements.systemText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏';
            return;
        }
        elements.systemText.innerHTML = `\\[${systemToLatex(currentSystem)}\\]`;
        correctAnswer = q3.correctAnswer;
        elements.optionsContainer.style.display = 'grid';
        elements.inputContainer.style.display = 'none';
        elements.systemEquations.style.display = 'none';
        elements.optionsContainer.classList.add('question-3');
        options = q3.options;
        options.forEach((opt, index) => {
            const option = document.createElement('div');
            option.className = 'trainer-option';
            option.innerHTML = `\\[${opt.text}\\]`;
            option.setAttribute('data-index', index);
            option.setAttribute('data-plaintext', opt.plainText || opt.text);
            option.addEventListener('click', () => {
                document.querySelectorAll('.trainer-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedOption = opt;
                elements.submitAnswer.disabled = false;
            });
            elements.optionsContainer.appendChild(option);
        });
        elements.systemText.dataset.plainText = currentSystem.coefficients.map((row, i) => 
            `${formatEquation(row[0], row[1], currentSystem.constants[i])}`).join('\n');
    } else if (currentQuestion === 4) {
        const q4 = generateQuestion4();
        if (!q4 || !q4.options || !q4.correctAnswer) {
            console.error('–ü–æ–º–∏–ª–∫–∞: generateQuestion4 –Ω–µ –ø–æ–≤–µ—Ä–Ω—É–≤ –¥–∞–Ω–∏—Ö –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞', q4);
            elements.questionText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è';
            return;
        }
        elements.questionText.innerHTML = q4.question;
        if (!currentSystem) {
            console.error('–ü–æ–º–∏–ª–∫–∞: currentSystem –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 4');
            elements.systemText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏';
            return;
        }
        elements.systemText.innerHTML = `\\[${q4.systemLatex}\\]`;
        elements.optionsContainer.style.display = 'grid';
        elements.inputContainer.style.display = 'none';
        elements.systemEquations.style.display = 'none';
        elements.optionsContainer.classList.add('question-4');
        correctAnswer = q4.correctAnswer;
        options = q4.options;
        options.forEach((opt, index) => {
            const option = document.createElement('div');
            option.className = 'trainer-option';
            option.innerHTML = `\\[${opt.text}\\]`;
            option.setAttribute('data-index', index);
            option.setAttribute('data-plaintext', opt.plainText);
            option.addEventListener('click', () => {
                document.querySelectorAll('.trainer-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedOption = opt;
                elements.submitAnswer.disabled = false;
            });
            elements.optionsContainer.appendChild(option);
        });
        elements.systemText.dataset.plainText = currentSystem.coefficients.map((row, i) => 
            `${formatEquation(row[0], row[1], currentSystem.constants[i])}`).join('\n');
    } else if (currentQuestion === 5) {
        const q5 = generateQuestion5();
        if (!q5 || !q5.options || !q5.correctAnswer) {
            console.error('–ü–æ–º–∏–ª–∫–∞: generateQuestion5 –Ω–µ –ø–æ–≤–µ—Ä–Ω—É–≤ –¥–∞–Ω–∏—Ö –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞', q5);
            elements.questionText.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è';
            return;
        }
        elements.questionText.innerHTML = q5.question;
        elements.systemText.innerHTML = ''; // –ù–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω, –±–æ A^{-1} —ñ B —É –ø–∏—Ç–∞–Ω–Ω—ñ
        elements.systemText.style.display = 'none';
        elements.optionsContainer.style.display = 'grid';
        elements.inputContainer.style.display = 'none';
        elements.systemEquations.style.display = 'none';
        elements.optionsContainer.classList.add('question-5');
        correctAnswer = q5.correctAnswer;
        options = q5.options;
        options.forEach((opt, index) => {
            const option = document.createElement('div');
            option.className = 'trainer-option';
            option.innerHTML = `\\[${opt.text}\\]`;
            option.setAttribute('data-index', index);
            option.setAttribute('data-plaintext', opt.plainText);
            option.addEventListener('click', () => {
                document.querySelectorAll('.trainer-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedOption = opt;
                elements.submitAnswer.disabled = false;
            });
            elements.optionsContainer.appendChild(option);
        });
        elements.systemText.dataset.plainText = q5.inversePlainText;
    }

    if (window.MathJax && MathJax.typesetPromise) {
        console.log('MathJax –æ–±—Ä–æ–±–ª—è—î systemText, optionsContainer, questionText');
        setTimeout(() => {
            MathJax.typesetPromise([elements.systemText, elements.optionsContainer, elements.questionText])
                .then(() => {
                    console.log('MathJax —É—Å–ø—ñ—à–Ω–æ –æ–±—Ä–æ–±–∏–≤ –µ–ª–µ–º–µ–Ω—Ç–∏');
                    const firstOption = elements.optionsContainer.querySelector('.trainer-option');
                    if (firstOption) firstOption.focus();
                })
                .catch(err => {
                    console.error('–ü–æ–º–∏–ª–∫–∞ MathJax —É displayQuestion:', err);
                    elements.systemText.textContent = elements.systemText.dataset.plainText || '–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è';
                    elements.optionsContainer.innerHTML = options?.map(opt => `<div class="trainer-option">${opt.plainText}</div>`).join('') || '–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤';
                });
        }, 100);
    } else {
        console.warn('MathJax –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π');
        elements.systemText.textContent = elements.systemText.dataset.plainText || '–ü–æ–º–∏–ª–∫–∞: MathJax –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ';
        if (options) {
            elements.optionsContainer.innerHTML = options.map(opt => `<div class="trainer-option">${opt.plainText}</div>`).join('');
        }
    }

    elements.submitAnswer.style.display = 'block';
}
// –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏"
elements.submitAnswer?.addEventListener('click', () => {
    console.log('submitAnswer –∫–ª—ñ–∫–Ω—É—Ç–æ, currentQuestion:', currentQuestion, 'selectedOption:', selectedOption, 'correctAnswer:', correctAnswer);

    if (!elements.feedback) {
        console.error('–ï–ª–µ–º–µ–Ω—Ç feedback –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —É DOM');
        return;
    }

    let isCorrect;
    let feedbackText;

    // –£—Å—ñ –ø–∏—Ç–∞–Ω–Ω—è (1‚Äì5) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≤–∏–±—ñ—Ä –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤
    if (!selectedOption) {
        console.log(`–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è: –ø–∏—Ç–∞–Ω–Ω—è ${currentQuestion}, –≤–∞—Ä—ñ–∞–Ω—Ç –Ω–µ –≤–∏–±—Ä–∞–Ω–æ`);
        elements.feedback.textContent = '‚úó –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å –æ–¥–∏–Ω —ñ–∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ!';
        elements.feedback.className = 'trainer-feedback result-message wrong';
        elements.feedback.style.display = 'block';
        elements.feedback.style.opacity = '1';
        setTimeout(() => {
            elements.feedback.style.opacity = '0';
            setTimeout(() => {
                elements.feedback.style.display = 'none';
                elements.feedback.className = 'trainer-feedback result-message';
            }, 300);
        }, 2000);
        return;
    }

    isCorrect = selectedOption.isCorrect;
    feedbackText = selectedOption.comment;
    elements.feedback.textContent = feedbackText;
    elements.feedback.className = `trainer-feedback result-message ${isCorrect ? 'correct' : 'wrong'}`;
    elements.feedback.style.display = 'block';
    elements.feedback.style.opacity = '1';

    // –í—ñ–∑—É–∞–ª—å–Ω–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è –≤–∏–±—Ä–∞–Ω–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É
    document.querySelectorAll('.trainer-option').forEach(opt => {
        opt.classList.add('disabled');
        const optionPlainText = opt.getAttribute('data-plaintext')?.trim();
        if (optionPlainText === selectedOption.plainText?.trim()) {
            opt.classList.add(isCorrect ? 'correct' : 'wrong');
        }
    });

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤
    if (isCorrect) correctAnswersCount++;
    totalQuestionsAnswered++;
    if (elements.correctAnswers) elements.correctAnswers.textContent = correctAnswersCount;
    if (elements.totalQuestions) elements.totalQuestions.textContent = totalQuestionsAnswered;

    // –û–±—Ä–æ–±–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—É –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
    const feedbackDuration = isCorrect ? 1000 : 2000;
    setTimeout(() => {
        elements.feedback.style.opacity = '0';
        setTimeout(() => {
            elements.feedback.style.display = 'none';
            elements.feedback.className = 'trainer-feedback result-message';
            document.querySelectorAll('.trainer-option').forEach(opt => {
                opt.classList.remove('disabled', 'correct', 'wrong', 'selected');
            });
            elements.submitAnswer.disabled = true;

            if (isCorrect) {
                if (currentQuestion < 5) {
                    currentQuestion += 1;
                    currentSystem = null;
                    displayQuestion();
                } else {
                    console.log('–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞');
                    elements.questionCircle.style.display = 'none';
                    elements.questionText.style.display = 'none';
                    elements.systemText.style.display = 'none';
                    elements.optionsContainer.style.display = 'none';
                    elements.inputContainer.style.display = 'none';
                    elements.systemEquations.style.display = 'none';
                    elements.submitAnswer.style.display = 'none';
                    elements.completionMessage.style.display = 'block';
                    elements.trainerContainer.scrollTop = 0;
                    elements.resetTrainerBtn.focus();
                }
            } else {
                console.log('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏');
                currentSystem = null;
                displayQuestion();
            }
        }, 300);
    }, feedbackDuration);

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è MathJax –¥–ª—è feedback
    if (window.MathJax && MathJax.typesetPromise) {
        MathJax.typesetPromise([elements.feedback]).catch(err => console.error('–ü–æ–º–∏–ª–∫–∞ MathJax —É feedback:', err));
    }
});
elements.resetTrainerBtn?.addEventListener('click', resetTrainer);
});
    </script>
</body>
</html>


