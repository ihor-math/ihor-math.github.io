<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5. Модуль комплексного числа</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        *, *:before, *:after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            font-family: 'Poppins', sans-serif;
            color: #e0e0e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100dvh;
        }
        body.modal-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
        }
        .title-box {
            margin-top: 60px;
            padding: 25px 40px;
            background: linear-gradient(135deg, #2a2a4a, #3b3b6a);
            border-radius: 25px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.1);
            max-width: 90%;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .title-box h1 {
            font-size: 28px;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
            font-weight: 800;
        }
        .section-container {
            margin-top: 40px;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        .section {
            width: 250px;
            height: 220px;
            background: linear-gradient(135deg, #2a2a4a, #4a4a7a);
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3), inset 0 0 8px rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            color: inherit;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        .section:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.5), inset 0 0 12px rgba(0, 255, 136, 0.2);
        }
        .section img {
            width: 60px;
            height: 60px;
            margin-bottom: 15px;
            object-fit: cover;
            border-radius: 8px;
            filter: drop-shadow(0 0 5px rgba(0, 255, 136, 0.3));
        }
        .section h2 {
            font-size: 20px;
            color: #e0e0e0;
            font-weight: 600;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        .modal {
            display: none;
            position: fixed;
            top: 2%;
            left: 2%;
            width: 96%;
            background: linear-gradient(135deg, #1e1e3e, #2a2a5a);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            flex-direction: column;
            border: 1px solid rgba(0, 255, 136, 0.2);
            height: auto;
            max-height: 96vh;
            overflow: hidden;
        }
        .modal-header {
            display: flex;
            justify-content: flex-end;
            background: linear-gradient(90deg, #2a2a4a, #3b3b6a);
            padding: 8px 10px;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }
        .close-btn {
            background: #00ff88;
            color: #1a1a2e;
            border: none;
            border-radius: 6px;
            padding: 5px 15px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .close-btn:hover {
            background: #00cc66;
        }
        .modal-content {
            padding: 15px;
            padding-bottom: 100px;
            overflow-y: auto;
            flex-grow: 1;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            max-width: 100%;
            box-sizing: border-box;
            max-height: calc(96vh - 60px);
            -webkit-overflow-scrolling: touch;
        }
        #theoryModal .modal-content {
            overflow-x: auto; /* Відключаємо горизонтальну прокрутку на десктопах */
        }
        #theoryModal .modal-content p, #theoryModal .modal-content li {
            font-size: clamp(16px, 2.8vw, 18px);
            line-height: 1.6;
            color: #e0e0e0;
            margin: 8px 0;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            max-width: 100%;
            text-align: justify; /* Вирівнювання по ширині */
        }
        #theoryModal .modal-content li {
            color: #e9b1a0;
            padding-left: 20px; /* Відступ для маркера */
            margin-left: 10px; /* Додатковий відступ для списку */
            max-width: calc(100% - 30px); /* Обмежуємо ширину, враховуючи відступи */
            overflow-x: auto; /* Дозволяємо прокрутку для довгих формул у списку */
            -webkit-overflow-scrolling: touch;
            white-space: normal; /* Дозволяємо перенос тексту */
        }
        #theoryModal .modal-content li mjx-container {
            display: inline-block !important;
            max-width: none; /* Формули можуть бути ширшими */
            white-space: nowrap; /* Формули не переносяться */
            overflow: visible; /* Запобігаємо обрізанню формул */
            vertical-align: middle; /* Вирівнювання формул по вертикалі */
            
        }
        #theoryModal .modal-content img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 10px auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        #theoryModal mjx-container {
            display: inline-block !important;
            max-width: 100%;
            font-size: clamp(17px, 2.8vw, 19px) !important;
            color: #FFFF00 !important;
            white-space: normal;
            overflow: hidden;
            text-overflow: ellipsis;
            text-align: center;
        }
        #theoryModal mjx-container.math-notation-centered {
            display: block !important;
            text-align: center !important;
            max-width: 100%;
            font-size: clamp(17px, 2.8vw, 19px) !important;
            color: #FFFF00 !important;
            margin: 10px auto;
            padding: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        /* Виправлення для пронумерованих формул */
        #theoryModal mjx-container[jax="CHTML"][display="true"] {
            display: block !important;
            text-align: center !important;
            margin: 10px auto;
        }
        #theoryModal mjx-container[jax="CHTML"][display="true"] mjx-mtable {
            display: inline-block;
            text-align: center;
        }
        #theoryModal mjx-container[jax="CHTML"][display="true"] mjx-mtag {
            display: inline-block;
            vertical-align: middle;
            margin-left: 5px;
        }
        #modalOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.6);
            z-index: 999;
        }
        .video-card-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }
        .video-card {
            width: 260px;
            height: 170px;
            background: linear-gradient(135deg, #3b3b6a, #5a5a9a);
            border-radius: 20px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            color: #00ff88;
        }
        .video-card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(0, 255, 136, 0.2);
        }
        .video-card img {
            width: 48px;
            height: 48px;
            margin-bottom: 10px;
            object-fit: cover;
            border-radius: 8px;
            filter: drop-shadow(0 0 5px rgba(0, 255, 136, 0.3));
        }
        .video-card h3 {
            font-size: 18px;
            font-weight: 600;
            line-height: 1.2;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        .video-player-container {
            max-width: 800px;
            margin: 20px auto;
            background: rgba(30, 30, 62, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            text-align: center;
        }
        .video-player-container iframe {
            width: 100%;
            max-height: 400px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        details {
            margin: 10px 0;
            padding: 10px;
            border-radius: 10px;
            background: linear-gradient(135deg, #2a2a4a, #3b3b6a);
            cursor: pointer;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        summary {
            font-weight: 600;
            padding: 10px;
            background: linear-gradient(90deg, #3b3b6a, #4a4a7a);
            border-radius: 10px;
            color: #00ff88;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        summary:hover {
            background: linear-gradient(90deg, #4a4a7a, #5a5a9a);
        }
        details p {
            padding: 0 20px 10px;
            color: #e0e0e0;
        }
        .question-card {
            perspective: 1000px;
            margin: 20px auto;
            max-width: 90%;
            height: 150px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }
        .card-inner.flipped {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            padding: 10px;
            border-radius: 15px;
            font-size: clamp(14px, 2.5vw, 16px);
            line-height: 1.4;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: justify;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        .card-front {
            background: linear-gradient(135deg, #2a2a4a, #4a4a7a);
            color: #e0e0e0;
            font-weight: 600;
        }
        .card-back {
            background: linear-gradient(135deg, #3b3b6a, #5a5a9a);
            color: #e0e0e0;
            transform: rotateY(180deg);
            overflow-y: auto;
        }
        .trainer-container {
            width: 90%;
            max-width: 800px;
            padding: 3vw 4vw;
            text-align: center;
            background: linear-gradient(135deg, #2a2a4a, #3b3b6a);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        .question-circle {
            width: 15vw;
            height: 15vw;
            min-width: 80px;
            min-height: 80px;
            max-width: 120px;
            max-height: 120px;
            margin: 0 auto 3vw;
            background: linear-gradient(135deg, #00ff88, #00cc66);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }
        .question-circle h3 {
            color: #1a1a2e;
            font-size: clamp(16px, 2.5vw, 20px);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2vw;
            justify-content: center;
            margin-bottom: 3vw;
        }
        .option {
            padding: 1.8vw 2.8vw;
            border: 1.5px solid #00ff88;
            border-radius: 10px;
            background: linear-gradient(135deg, #3b3b6a, #4a4a7a);
            cursor: pointer;
            font-size: clamp(13px, 2.1vw, 15px);
            color: #e0e0e0;
        }
        .option:hover {
            background: linear-gradient(135deg, #4a4a7a, #5a5a9a);
        }
        .option.selected {
            background: linear-gradient(135deg, #00ff88, #00cc66);
            color: #1a1a2e;
        }
        button {
            padding: 2vw 4vw;
            background: linear-gradient(135deg, #00ff88, #00cc66);
            color: #1a1a2e;
            border: none;
            border-radius: 10px;
            font-size: clamp(14px, 2.5vw, 16px);
            cursor: pointer;
        }
        button:hover {
            background: linear-gradient(135deg, #00cc66, #00aa44);
        }
        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 40px auto;
            max-width: 1000px;
            padding: 0 20px;
        }
        .nav-button {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #2a2a4a, #3b3b6a);
            color: #00ff88;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 136, 0.3);
            text-decoration: none;
        }
        .nav-button:hover {
            background: linear-gradient(135deg, #3b3b6a, #4a4a7a);
            color: #e0e0e0;
            text-decoration: none;
        }
        .nav-button svg {
            margin-right: 8px;
            fill: currentColor;
        }
        @media (max-width: 768px) {
            .title-box {
                margin-top: 40px;
                padding: 15px 20px;
            }
            .title-box h1 {
                font-size: 24px;
            }
            .section-container {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            .section {
                width: 80%;
                height: 180px;
            }
            .modal-content {
                padding: 15px;
                padding-bottom: 120px;
                max-height: calc(96vh - 60px);
            }
            #theoryModal .modal-content {
                overflow-x: auto; /* Горизонтальна прокрутка для мобільних */
                -webkit-overflow-scrolling: touch;
            }
            #theoryModal .modal-content li {
                max-width: calc(100% - 20px); /* Враховуємо відступи */
                overflow-x: auto; /* Прокрутка для довгих формул */
                white-space: normal; /* Дозволяємо перенос тексту */
                text-align: justify; /* Вирівнювання по ширині */
            }
            #theoryModal mjx-container, #theoryModal mjx-container.math-notation-centered {
                max-width: none; /* Дозволяємо формулам бути ширшими */
                white-space: nowrap; /* Формули не переносяться */
                overflow: visible; /* Запобігаємо обрізанню формул */
            }
            /* Центрування формул на мобільних */
            #theoryModal mjx-container[jax="CHTML"][display="true"] {
                display: block !important;
                text-align: center !important;
                margin: 10px auto;
                white-space: nowrap;
                overflow: visible;
            }
            #theoryModal mjx-container[jax="CHTML"][display="true"] mjx-mtable {
                display: inline-block;
                text-align: center;
            }
            #theoryModal mjx-container[jax="CHTML"][display="true"] mjx-mtag {
                display: inline-block;
                vertical-align: middle;
                margin-left: 5px;
            }
            .video-card {
                width: 180px;
                height: 150px;
            }
            .video-card img {
                width: 40px;
                height: 40px;
            }
            .video-card h3 {
                font-size: 16px;
            }
            .question-card {
                height: 150px;
            }
            .trainer-container {
                width: 95%;
                padding: 4vw;
            }
            .question-circle {
                width: 25vw;
                height: 25vw;
            }
            .options-container {
                flex-direction: column;
                align-items: center;
            }
            .navigation-buttons {
                margin: 20px auto;
                gap: 15px;
            }
            .nav-button {
                font-size: 16px;
                padding: 10px 20px;
            }
            .video-player-container iframe {
                max-height: 300px;
            }
        }
        @media (max-width: 480px) {
            .title-box {
                margin-top: 20px;
                padding: 10px 15px;
            }
            .title-box h1 {
                font-size: 20px;
            }
            .section {
                width: 90%;
                height: 150px;
            }
            .section img {
                width: 50px;
                height: 50px;
            }
            .section h2 {
                font-size: 18px;
            }
            .modal-content {
                padding: 10px;
                padding-bottom: 140px;
            }
            .video-card {
                width: 160px;
                height: 140px;
            }
            .video-card img {
                width: 36px;
                height: 36px;
            }
            .video-card h3 {
                font-size: 15px;
            }
            .nav-button {
                font-size: 14px;
                padding: 8px 16px;
            }
            .video-player-container iframe {
                max-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="title-box">
        <h1>5. Модуль комплексного числа</h1>
    </div>

    <div class="section-container">
        <div class="section" id="openTheoryBtn">
            <img src="https://img.icons8.com/fluency/96/book-shelf.png" alt="Книга">
            <h2>Теоретичні відомості</h2>
        </div>
        <div class="section" id="openVideoBtn">
            <img src="https://img.icons8.com/fluency/96/video.png" alt="Відео">
            <h2>Відеоматеріали</h2>
        </div>
        <div class="section" id="openQuestionsBtn">
            <img src="https://img.icons8.com/fluency/96/flipboard.png" alt="Картки">
            <h2>Питання і відповіді</h2>
        </div>
        <div class="section" id="openTrainerBtn">
            <img src="https://img.icons8.com/fluency/96/flash-on.png" alt="Тренажер">
            <h2>Тренажер</h2>
        </div>
    </div>

    <div class="navigation-buttons">
        <a class="nav-button" href='tema2.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
            До теми 2
        </a>
        <a class="nav-button" href='index.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            На головну
        </a>
    </div>

    <div id="modalOverlay"></div>

    <div id="theoryModal" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeTheoryBtn">× Закрити</button>
        </div>
        <div class="modal-content">
            <details open>
                <summary>Модуль комплексного числа</summary>
                <p>
                    <strong>Модуль комплексного числа</strong> \( z = a + bi \) позначається як \( |z| \) або \( r \) і визначається як відстань від початку координат \( O(0;0) \) до точки \( (a;b) \), яка відповідає цьому числу на комплексній площині (рис. 2.1).
                </p>
                <img src="/static/figure2.1.jpg" alt="Комплексна площина">
                <p>
                    Для обчислення модуля використовують формулу:
                </p>
                <p class="math-notation-centered">
                    \[ r = |z| = \sqrt{a^2 + b^2}. \tag{2.1} \]
                </p>
                <p>
                    Надалі для позначення модуля ми використовуватимемо символ \( r \). Для особливих випадків:
                </p>
                <ul>
                   <ul>
  <li>✔ якщо число дійсне \(( z = a + 0i )\), то \( r = |a| \);</li>
  <li>✔ якщо число чисто уявне \( (z = 0 + bi )\), то \( r = |b| \).</li>
</ul>

                </ul>
                <p>
                    Спряжені комплексні числа \( z = a + bi \) і \( \overline{z} = a - bi \) мають однакові модулі:
                </p>
                <p>
                    \[ r = |z| = |\overline{z}| = \sqrt{a^2 + b^2}. \]
                </p>
                <p>
                    Крім того, їхній добуток дорівнює квадрату модуля. Розглянемо це детальніше:
                </p>
                <p>
                    \[ (a + bi) \cdot (a - bi) = a^2 - (bi)^2 = a^2 - b^2 i^2. \]
                </p>
                <p>
                    Оскільки \( i^2 = -1 \), то \( b^2 i^2 = b^2 \cdot (-1) = -b^2 \), і вираз спрощується:
                </p>
                <p>
                    \[ a^2 - b^2 i^2 = a^2 + b^2 = r^2. \]
                </p>
                <p>
                    Отже:
                </p>
                <p class="math-notation-centered">
                    \[ (a + bi) \cdot (a - bi) = r^2. \tag{2.2} \]
                </p>
            </details>
            <details>
                <summary>Приклад</summary>
                <p>Тут буде приклад використання тригонометричної форми в розв’язанні рівнянь. Наповнення буде надано пізніше.</p>
            </details>
        </div>
    </div>

    <div id="videoModal" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoBtn">× Закрити</button>
        </div>
        <div class="modal-content">
            <h2 style="text-align: center; color: #00ff88;">Оберіть відео</h2>
            <div class="video-card-container">
                <div class="video-card" data-video="1">
                    <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="Відеокамера">
                    <h3>Тригонометрична форма: основи</h3>
                </div>
                <div class="video-card" data-video="2">
                    <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="Відеокамера">
                    <h3>Розв’язання рівнянь із тригонометричною формою</h3>
                </div>
                <div class="video-card" data-video="3">
                    <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="Відеокамера">
                    <h3>Практика з тригонометричною формою</h3>
                </div>
            </div>
        </div>
    </div>

    <div id="videoPlayerModal1" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoPlayerBtn1">× Закрити</button>
        </div>
        <div class="modal-content">
            <div class="video-player-container">
                <iframe id="youtubePlayer1" width="100%" height="400" src="https://www.youtube.com/embed/placeholder1?rel=0&modestbranding=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <div id="videoPlayerModal2" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoPlayerBtn2">× Закрити</button>
        </div>
        <div class="modal-content">
            <div class="video-player-container">
                <iframe id="youtubePlayer2" width="100%" height="400" src="https://www.youtube.com/embed/placeholder2?rel=0&modestbranding=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <div id="videoPlayerModal3" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoPlayerBtn3">× Закрити</button>
        </div>
        <div class="modal-content">
            <div class="video-player-container">
                <iframe id="youtubePlayer3" width="100%" height="400" src="https://www.youtube.com/embed/placeholder3?rel=0&modestbranding=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <div id="questionsModal" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeQuestionsBtn">× Закрити</button>
        </div>
        <div class="modal-content">
            <div class="question-card">
                <div class="card-inner">
                    <div class="card-front">1. Як тригонометрична форма допомагає у розв’язанні рівнянь?</div>
                    <div class="card-back">Тригонометрична форма спрощує операції множення, ділення та піднесення до степеня, що полегшує розв’язання рівнянь виду \( z^n = a \).</div>
                </div>
            </div>
            <div class="question-card">
                <div class="card-inner">
                    <div class="card-front">2. Що таке корені n-го степеня комплексного числа?</div>
                    <div class="card-back">Корені n-го степеня комплексного числа \( z \) — це числа \( w \), для яких \( w^n = z \). Їх можна знайти за допомогою тригонометричної форми.</div>
                </div>
            </div>
            <div class="question-card">
                <div class="card-inner">
                    <div class="card-front">3. Яка формула використовується для знаходження коренів?</div>
                    <div class="card-back">Для комплексного числа \( z = r(\cos\theta + i\sin\theta) \) корені n-го степеня мають вигляд: \( w_k = \sqrt[n]{r} \left( \cos\left(\frac{\theta + 2k\pi}{n}\right) + i\sin\left(\frac{\theta + 2k\pi}{n}\right) \right), \) де \( k = 0, 1, \ldots, n-1 \).</div>
                </div>
            </div>
            <div class="question-card">
                <div class="card-inner">
                    <div class="card-front">4. Чи завжди корені комплексного числа різні?</div>
                    <div class="card-back">Так, n коренів n-го степеня комплексного числа завжди різні, якщо \( n \) — ціле число, і вони розташовані на колі радіусом \( \sqrt[n]{r} \).</div>
                </div>
            </div>
            <div class="question-card">
                <div class="card-inner">
                    <div class="card-front">5. Як перевірити правильність знайденого кореня?</div>
                    <div class="card-back">Щоб перевірити корінь \( w \), піднесіть його до степеня \( n \): \( w^n \) має дорівнювати початковому числу \( z \).</div>
                </div>
            </div>
        </div>
    </div>

    <div id="trainerModal" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeTrainerBtn">× Закрити</button>
        </div>
        <div class="modal-content">
            <div class="trainer-container" id="trainerContent">Завантаження...</div>
        </div>
    </div>

    <script>
        const modals = {
            theory: document.getElementById('theoryModal'),
            video: document.getElementById('videoModal'),
            questions: document.getElementById('questionsModal'),
            trainer: document.getElementById('trainerModal'),
            videoPlayer1: document.getElementById('videoPlayerModal1'),
            videoPlayer2: document.getElementById('videoPlayerModal2'),
            videoPlayer3: document.getElementById('videoPlayerModal3')
        };
        const buttons = {
            openTheory: document.getElementById('openTheoryBtn'),
            openVideo: document.getElementById('openVideoBtn'),
            openQuestions: document.getElementById('openQuestionsBtn'),
            openTrainer: document.getElementById('openTrainerBtn'),
            closeTheory: document.getElementById('closeTheoryBtn'),
            closeVideo: document.getElementById('closeVideoBtn'),
            closeQuestions: document.getElementById('closeQuestionsBtn'),
            closeTrainer: document.getElementById('closeTrainerBtn'),
            closeVideoPlayer1: document.getElementById('closeVideoPlayerBtn1'),
            closeVideoPlayer2: document.getElementById('closeVideoPlayerBtn2'),
            closeVideoPlayer3: document.getElementById('closeVideoPlayerBtn3')
        };
        const overlay = document.getElementById('modalOverlay');
        const youtubePlayers = {
            1: document.getElementById('youtubePlayer1'),
            2: document.getElementById('youtubePlayer2'),
            3: document.getElementById('youtubePlayer3')
        };

        function adjustModalHeight(modal) {
            const modalContent = modal.querySelector('.modal-content');
            const modalHeader = modal.querySelector('.modal-header');
            modalContent.style.height = 'auto';
            const contentHeight = modalContent.scrollHeight;
            const headerHeight = modalHeader.offsetHeight;
            const windowHeight = window.innerHeight;
            const maxModalHeight = windowHeight * 0.96;
            const requiredHeight = contentHeight + headerHeight + 20;
            if (requiredHeight < maxModalHeight) {
                modal.style.height = `${requiredHeight}px`;
                modalContent.style.overflowY = 'hidden';
            } else {
                modal.style.height = `${maxModalHeight}px`;
                modalContent.style.overflowY = 'auto';
            }
            modalContent.scrollTop = 0;
        }

        function openModal(modal, btn) {
            modal.style.display = 'flex';
            overlay.style.display = 'block';
            document.body.classList.add('modal-open');
            btn.setAttribute('aria-pressed', 'true');
            setTimeout(() => {
                if (typeof MathJax !== 'undefined') {
                    MathJax.typesetPromise().then(() => {
                        adjustModalHeight(modal);
                    }).catch(err => console.error('MathJax error:', err));
                } else {
                    adjustModalHeight(modal);
                }
            }, 200);
        }

        function closeModal(modal, btn) {
            modal.style.display = 'none';
            overlay.style.display = 'none';
            document.body.classList.remove('modal-open');
            btn.setAttribute('aria-pressed', 'false');
            btn.focus();
        }

        function closeVideoPlayerModal(videoModal, player, mainModal, btn) {
            if (player) player.src = player.src;
            videoModal.style.display = 'none';
            overlay.style.display = 'none';
            openModal(mainModal, btn);
        }

        buttons.openTheory.addEventListener('click', () => openModal(modals.theory, buttons.openTheory));
        buttons.openVideo.addEventListener('click', () => openModal(modals.video, buttons.openVideo));
        buttons.openQuestions.addEventListener('click', () => openModal(modals.questions, buttons.openQuestions));
        buttons.openTrainer.addEventListener('click', () => openModal(modals.trainer, buttons.openTrainer));
        buttons.closeTheory.addEventListener('click', () => closeModal(modals.theory, buttons.openTheory));
        buttons.closeVideo.addEventListener('click', () => closeModal(modals.video, buttons.openVideo));
        buttons.closeQuestions.addEventListener('click', () => closeModal(modals.questions, buttons.openQuestions));
        buttons.closeTrainer.addEventListener('click', () => closeModal(modals.trainer, buttons.openTrainer));
        buttons.closeVideoPlayer1.addEventListener('click', () => closeVideoPlayerModal(modals.videoPlayer1, youtubePlayers[1], modals.video, buttons.openVideo));
        buttons.closeVideoPlayer2.addEventListener('click', () => closeVideoPlayerModal(modals.videoPlayer2, youtubePlayers[2], modals.video, buttons.openVideo));
        buttons.closeVideoPlayer3.addEventListener('click', () => closeVideoPlayerModal(modals.videoPlayer3, youtubePlayers[3], modals.video, buttons.openVideo));
        overlay.addEventListener('click', () => {
            Object.values(modals).forEach(modal => modal.style.display = 'none');
            overlay.style.display = 'none';
            document.body.classList.remove('modal-open');
        });

        document.querySelectorAll('.video-card').forEach(card => {
            card.addEventListener('click', () => {
                const videoId = card.dataset.video;
                openModal(modals[`videoPlayer${videoId}`], buttons.openVideo);
            });
        });

        document.querySelectorAll('.card-inner').forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('flipped');
                setTimeout(() => {
                    if (typeof MathJax !== 'undefined') {
                        MathJax.typesetPromise().catch(err => console.error('MathJax error:', err));
                    }
                }, 600);
            });
        });

        let currentQuestion = 'q1_v1';
        let attemptCounts = { q1: 0, q2: 0, q3: 0, q4: 0, q5: 0 };
        const questions = {
            q1_v1: { text: 'Як знайти корені рівняння \\( z^3 = 1 \\)?', options: ['Перейти до тригонометричної форми', 'Використати алгебраїчну форму', 'Розв’язати як квадратне рівняння', 'Підставити дійсні числа'], correct: 'Перейти до тригонометричної форми', nextCorrect: 'q2_v1', nextIncorrect: 'q1_v2', attemptKey: 'q1' },
            q1_v2: { text: 'Який перший крок для знаходження коренів \\( z^4 = -16 \\)?', options: ['Використати тригонометричну форму', 'Розв’язати як лінійне рівняння', 'Взяти логарифм', 'Підставити уявні числа'], correct: 'Використати тригонометричну форму', nextCorrect: 'q2_v1', nextIncorrect: 'q1_v3', attemptKey: 'q1' },
            q1_v3: { text: 'Як знайти корені рівняння \\( z^5 = 32 \\)?', options: ['Перейти до тригонометричної форми', 'Використати формулу дискриминанта', 'Розв’язати як квадратне рівняння', 'Підставити дійсні числа'], correct: 'Перейти до тригонометричної форми', nextCorrect: 'q2_v1', nextIncorrect: 'q1_v1', attemptKey: 'q1' },
            q2_v1: { text: 'З наведених виразів виберіть ті, які можна розв’язати за допомогою тригонометричної форми:', options: [{ value: '\\( z^3 = 8 \\)', isCorrect: true }, { value: '\\( z^2 + z + 1 = 0 \\)', isCorrect: false }, { value: '\\( z^4 = -1 \\)', isCorrect: true }, { value: '\\( z = 5 \\)', isCorrect: false }], multiSelect: true, nextCorrect: 'q3_v1', nextIncorrect: 'q2_v2', attemptKey: 'q2' },
            q2_v2: { text: 'З наведених виразів виберіть ті, які можна розв’язати за допомогою тригонометричної форми:', options: [{ value: '\\( z^5 = 1 \\)', isCorrect: true }, { value: '\\( z^2 = 4 \\)', isCorrect: false }, { value: '\\( z^3 = -27 \\)', isCorrect: true }, { value: '\\( z + 1 = 0 \\)', isCorrect: false }], multiSelect: true, nextCorrect: 'q3_v1', nextIncorrect: 'q2_v3', attemptKey: 'q2' },
            q2_v3: { text: 'З наведених виразів виберіть ті, які можна розв’язати за допомогою тригонометричної форми:', options: [{ value: '\\( z^2 + 1 = 0 \\)', isCorrect: false }, { value: '\\( z^4 = 16 \\)', isCorrect: true }, { value: '\\( z^3 = i \\)', isCorrect: true }, { value: '\\( z = i \\)', isCorrect: false }], multiSelect: true, nextCorrect: 'q3_v1', nextIncorrect: 'q2_v1', attemptKey: 'q2' },
            q3_v1: { text: 'Скільки коренів має рівняння \\( z^4 = 1 \\)?', options: ['2', '3', '4', '5'], correct: '4', nextCorrect: 'q4_v1', nextIncorrect: 'q3_v2', attemptKey: 'q3' },
            q3_v2: { text: 'Скільки коренів має рівняння \\( z^3 = -8 \\)?', options: ['1', '2', '3', '4'], correct: '3', nextCorrect: 'q4_v1', nextIncorrect: 'q3_v3', attemptKey: 'q3' },
            q3_v3: { text: 'Скільки коренів має рівняння \\( z^5 = 32 \\)?', options: ['3', '4', '5', '6'], correct: '5', nextCorrect: 'q4_v1', nextIncorrect: 'q3_v1', attemptKey: 'q3' },
            q4_v1: { text: 'Який аргумент кореня рівняння \\( z^3 = 1 \\) для \\( k=1 \\)?', options: ['\\( \\frac{2\\pi}{3} \\)', '\\( \\frac{\\pi}{3} \\)', '\\( \\pi \\)', '\\( \\frac{4\\pi}{3} \\)'], correct: '\\( \\frac{2\\pi}{3} \\)', nextCorrect: 'q5_v1', nextIncorrect: 'q4_v2', attemptKey: 'q4' },
            q4_v2: { text: 'Який аргумент кореня рівняння \\( z^4 = 1 \\) для \\( k=2 \\)?', options: ['\\( \\frac{\\pi}{2} \\)', '\\( \\pi \\)', '\\( \\frac{3\\pi}{2} \\)', '\\( \\frac{\\pi}{4} \\)'], correct: '\\( \\pi \\)', nextCorrect: 'q5_v1', nextIncorrect: 'q4_v3', attemptKey: 'q4' },
            q4_v3: { text: 'Який аргумент кореня рівняння \\( z^5 = 1 \\) для \\( k=3 \\)?', options: ['\\( \\frac{2\\pi}{5} \\)', '\\( \\frac{4\\pi}{5} \\)', '\\( \\frac{6\\pi}{5} \\)', '\\( \\frac{8\\pi}{5} \\)'], correct: '\\( \\frac{6\\pi}{5} \\)', nextCorrect: 'q5_v1', nextIncorrect: 'q4_v1', attemptKey: 'q4' },
            q5_v1: { text: 'Який модуль кореня рівняння \\( z^3 = 8 \\)?', options: ['1', '2', '3', '4'], correct: '2', nextCorrect: 'end', nextIncorrect: 'q5_v2', attemptKey: 'q5' },
            q5_v2: { text: 'Який модуль кореня рівняння \\( z^4 = 16 \\)?', options: ['1', '2', '4', '16'], correct: '2', nextCorrect: 'end', nextIncorrect: 'q5_v3', attemptKey: 'q5' },
            q5_v3: { text: 'Який модуль кореня рівняння \\( z^5 = 32 \\)?', options: ['1', '2', '4', '32'], correct: '2', nextCorrect: 'end', nextIncorrect: 'q5_v1', attemptKey: 'q5' }
        };

        function renderQuestion() {
            if (currentQuestion === 'end') {
                document.getElementById('trainerContent').innerHTML = `
                    <div class="completion-emoji"></div>
                    <div class="completion-message">
                        <h2>Тренування завершено!</h2>
                        <p>Молодець!</p>
                    </div>
                `;
                return;
            }
            const q = questions[currentQuestion];
            const questionNumber = currentQuestion.match(/q(\d+)/)[1];
            let optionsHTML = q.multiSelect ? q.options.map((opt, i) => `<div class="option" data-index="${i}">\\(${opt.value}\\)</div>`).join('') : q.options.map(opt => `<div class="option" data-answer="${opt}">\\(${opt}\\)</div>`).join('');
            document.getElementById('trainerContent').innerHTML = `
                <div class="question-circle"><h3>Питання ${questionNumber}</h3></div>
                <p>${q.text}</p>
                <div class="options-container">${optionsHTML}</div>
                <button onclick="checkAnswer()">Відповісти</button>
                <div class="result" id="result"></div>
            `;
            if (typeof MathJax !== 'undefined') MathJax.typesetPromise();
            document.querySelectorAll('.option').forEach(opt => {
                opt.addEventListener('click', () => {
                    if (q.multiSelect) opt.classList.toggle('selected');
                    else {
                        document.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
                        opt.classList.add('selected');
                    }
                });
            });
        }

        function showFeedback(isCorrect, nextQuestion) {
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = `feedback ${isCorrect ? 'correct-feedback' : 'incorrect-feedback'}`;
            feedbackDiv.innerHTML = isCorrect ? '✅ Правильно!' : '❌ Неправильно';
            document.body.appendChild(feedbackDiv);
            setTimeout(() => {
                feedbackDiv.remove();
                currentQuestion = nextQuestion;
                renderQuestion();
            }, 1500);
        }

        function checkAnswer() {
            const q = questions[currentQuestion];
            const resultDiv = document.getElementById('result');
            let isCorrect = false;
            if (q.multiSelect) {
                const selected = Array.from(document.querySelectorAll('.option.selected')).map(el => parseInt(el.dataset.index));
                const correctIndexes = q.options.map((opt, idx) => opt.isCorrect ? idx : -1).filter(idx => idx !== -1);
                isCorrect = selected.length === correctIndexes.length && selected.every(idx => correctIndexes.includes(idx));
            } else {
                const selected = document.querySelector('.option.selected');
                if (!selected) {
                    resultDiv.innerHTML = '<div class="result-text">Оберіть варіант відповіді.</div>';
                    return;
                }
                isCorrect = selected.dataset.answer === q.correct;
            }
            attemptCounts[q.attemptKey]++;
            if (isCorrect) {
                attemptCounts[q.attemptKey] = 0;
                showFeedback(true, q.nextCorrect);
            } else {
                showFeedback(false, q.nextIncorrect);
            }
        }

        window.addEventListener('resize', () => adjustModalHeight(modals.theory));
        renderQuestion();
    </script>
</body>
</html>
