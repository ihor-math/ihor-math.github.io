<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>19. –û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è</title>
   <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            }
        };
        window.mathJaxReady = true;
    </script>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        *, *:before, ::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: linear-gradient(135deg, #1a2b3a, #2e4c5a);
            font-family: 'Poppins', sans-serif;
            color: #e8e8e8;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100dvh;
        }
        body.modal-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }
        .title-box {
            margin-top: 60px;
            padding: 25px 40px;
            background: linear-gradient(135deg, #2b3a4c, #4c6b7a);
            border-radius: 25px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.1);
            max-width: 90%;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .title-box h1 {
            font-size: 28px;
            color: #d4d4d4;
            text-shadow: 0 0 10px rgba(212, 212, 212, 0.5);
            font-weight: 800;
        }
        .section-container {
            margin-top: 40px;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        .section {
            width: 250px;
            height: 220px;
            background: linear-gradient(135deg, #2e4c5a, #4c6b7a);
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3), inset 0 0 8px rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            color: inherit;
            border: 1px solid rgba(163, 166, 139, 0.3);
        }
        .section:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.5), inset 0 0 12px rgba(163, 166, 139, 0.2);
        }
        .section img {
            width: 60px;
            height: 60px;
            margin-bottom: 15px;
            object-fit: cover;
            border-radius: 8px;
            filter: drop-shadow(0 0 5px rgba(163, 166, 139, 0.3));
        }
        .section h2 {
            font-size: 20px;
            color: #e8e8e8;
            font-weight: 600;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            width: 95%;
            max-width: 95vw;
            height: 95vh;
            max-height: 95vh;
            background: linear-gradient(135deg, #1a2b3a, #2e4c5a);
            z-index: 1001;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            transition: opacity 0.25s ease, transform 0.25s ease;
            opacity: 0;
            border-radius: 15px;
            overflow: hidden;
            transform: translateZ(0);
        }
         .modal.show {
    display: flex;
    flex-direction: column;
    align-items: center;
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

        .modal-header {
            background: linear-gradient(90deg, #2b3a4c, #4c6b7a);
            padding: 8px 12px;
            display: flex;
            justify-content: flex-end;
            width: 100%;
            flex-shrink: 0;
        }
        .close-btn {
            background: #6ee7b7;
            color: #1a2b3a;
            border: none;
            border-radius: 6px;
            padding: 6px 16px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .close-btn:hover {
            background: #4c9a7a;
        }
        .modal-content {
            padding: 20px;
            flex-grow: 1;
            background: linear-gradient(135deg, #4c6b7a, #2b3a4c);
            border-radius: 10px;
            margin: 10px;
            color: #e8e8e8;
            width: 100%;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(163, 166, 139, 0.5) transparent;
        }
        .modal-content::-webkit-scrollbar {
            width: 6px;
        }
        .modal-content::-webkit-scrollbar-track {
            background: transparent;
        }
        .modal-content::-webkit-scrollbar-thumb {
            background: rgba(163, 166, 139, 0.5);
            border-radius: 3px;
        }
        .modal-content::-webkit-scrollbar-thumb:hover {
            background: rgba(163, 166, 139, 0.8);
        }
        .video-card-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }
        .video-card {
            width: 350px;
            height: 250px;
            background: linear-gradient(135deg, #2e4c5a, #4c6b7a);
            border-radius: 15px;
            border: 1px solid rgba(163, 166, 139, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            color: #e8e8e8;
        }
        .video-card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
        }
        .video-card img {
            width: 40px;
            height: 40px;
            margin-bottom: 8px;
            object-fit: cover;
            border-radius: 6px;
        }
        .video-card h3 {
            font-size: clamp(16px, 2.5vw, 18px);
            font-weight: 600;
        }
        .video-player-container {
            max-width: 95%;
            margin: 0 auto;
        }
        .video-player-container iframe {
            width: 100%;
            aspect-ratio: 16 / 9;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .glow-title {
            text-align: center;
            font-size: 2em;
            color: #e8e8e8;
            font-family: 'Verdana', sans-serif;
            text-shadow: 0 0 10px #e8e8e8, 0 0 20px #6ee7b7, 0 0 30px #6ee7b7;
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from {
                text-shadow: 0 0 5px #e8e8e8, 0 0 10px #6ee7b7;
            }
            to {
                text-shadow: 0 0 20px #e8e8e8, 0 0 30px #6ee7b7;
            }
        }
        #theoryModal .modal-content p {
            font-size: 18px !important;
            line-height: 1.6;
            word-wrap: break-word;
            overflow-wrap: break-word;
            text-align: justify;
            max-width: 100%;
        }
        #theoryModal .modal-content ul {
            list-style: none;
            padding-left: 20px;
        }
        #theoryModal .modal-content li {
            color: #e8e8e8;
            padding-left: 20px;
            margin-left: 10px;
            max-width: calc(100% - 30px);
            white-space: normal;
            text-align: justify;
            position: relative;
        }
        #theoryModal .modal-content li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #6ee7b7;
            font-size: 16px;
        }
        #theoryModal .modal-content img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 10px auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        #theoryModal .math-notation-centered {
            display: block !important;
            color: #FFFF00 !important;
            text-align: center !important;
            max-width: 100%;
            width: fit-content;
            margin: 10px auto;
            padding: 5px;
            box-sizing: border-box;
        }
        #theoryModal mjx-container {
            color: #FFFF00 !important;
            font-size: clamp(16px, 2.8vw, 18px);
        }
        #theoryModal mjx-container[jax="CHTML"][display="true"] {
            display: block !important;
            text-align: center !important;
            margin: 10px auto !important;
            max-width: 100% !important;
            width: fit-content !important;
            padding: 5px !important;
            box-sizing: border-box !important;
            overflow: visible !important;
        }
        #trainerModal mjx-container {
            font-size: clamp(16px, 2.8vw, 18px);
            color: #FFFF00;
            max-width: 90%;
            width: fit-content;
            margin: 10px auto;
            padding: 5px;
            box-sizing: border-box;
            text-align: center;
        }
        #trainerModal mjx-container[jax="CHTML"][display="true"] {
            font-size: clamp(18px, 3vw, 20px) !important;
            display: block !important;
            text-align: center !important;
            margin: 10px auto !important;
            max-width: 90% !important;
            width: fit-content !important;
            padding: 5px !important;
            box-sizing: border-box !important;
            overflow: visible !important;
        }
        .mathjax-loading::before {
            content: '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ä–º—É–ª...';
            display: block;
            text-align: center;
            color: #e8e8e8;
            margin: 10px 0;
        }
        .math-notation {
    font-size: 0.9em; /* –ê–±–æ –≤–∞—à —Ä–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É */
    text-align: center; /* –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ü–µ–Ω—Ç—Ä–æ–≤–∞–Ω–µ –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è */
}
        #questionsModal mjx-container {
            font-size: clamp(16px, 2.8vw, 18px);
            color: #FFFF00;
            max-width: 90%;
            width: fit-content;
            margin: 5px auto;
            padding: 3px;
            box-sizing: border-box;
            text-align: center;
            overflow: visible !important;
        }
        #questionsModal mjx-container[jax="CHTML"][display="true"] {
            display: block !important;
            text-align: center !important;
            margin: 5px auto !important;
            max-width: 90% !important;
            width: fit-content !important;
            padding: 3px !important;
            box-sizing: border-box !important;
            overflow: visible !important;
        }
        #modalOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            transition: opacity 0.25s ease;
            transform: translateZ(0);
        }
        .question-card {
            perspective: 1000px;
            margin: 20px auto;
            max-width: 95%;
            height: 200px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            cursor: pointer;
        }
        .card-inner.flipped {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            padding: 12px;
            border-radius: 15px;
            font-size: clamp(16px, 3vw, 18px);
            line-height: 1.5;
            border: 1px solid rgba(163, 166, 139, 0.3);
            font-family: 'Poppins', sans-serif;
            box-sizing: border-box;
        }
        .card-front {
            background: linear-gradient(135deg, #2e4c5a, #4c6b7a);
            color: #e8e8e8;
            font-weight: 600;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-wrap: wrap;
            overflow-wrap: break-word;
            word-break: break-word;
            padding: 12px 15px;
            max-width: 100%;
        }
        .card-back {
            background: linear-gradient(135deg, #3a4c5a, #575a7a);
            color: #e8e8e8;
            transform: rotateY(180deg);
            overflow-y: auto;
            text-align: justify;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100%;
            word-break: break-word;
            overflow-wrap: break-word;
            padding: 12px 15px;
            max-width: 100%;
            box-sizing: border-box;
            scrollbar-width: thin;
            scrollbar-color: rgba(163, 166, 139, 0.5) transparent;
        }
        .card-back::-webkit-scrollbar {
            width: 6px;
        }
        .card-back::-webkit-scrollbar-track {
            background: transparent;
        }
        .card-back::-webkit-scrollbar-thumb {
            background: rgba(163, 166, 139, 0.5);
            border-radius: 3px;
        }
        .card-back::-webkit-scrollbar-thumb:hover {
            background: rgba(163, 166, 139, 0.8);
        }
        .question-card .card-front {
            white-space: normal;
            overflow-wrap: break-word;
            word-break: break-word;
            flex-wrap: wrap;
        }
        .card-back p {
            margin: 5px 0;
            font-size: clamp(16px, 3vw, 18px);
            color: #e8e8e8;
            box-sizing: border-box;
            width: 100%;
            text-align: center;
        }
        .card-front span.yellow {
            color: #FFFF00;
            font-weight: 600;
            display: inline;
            margin-right: 0.1em;
        }
        .trainer-container {
            width: 95%;
            max-width: 900px;
            padding: 4vw 5vw;
            text-align: center;
            background: linear-gradient(135deg, #2e4c5a, #4c6b7a);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(163, 166, 139, 0.3);
            box-sizing: border-box;
            margin: auto;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(163, 166, 139, 0.5) transparent;
        }
        .trainer-container::-webkit-scrollbar {
            width: 6px;
        }
        .trainer-container::-webkit-scrollbar-track {
            background: transparent;
        }
        .trainer-container::-webkit-scrollbar-thumb {
            background: rgba(163, 166, 139, 0.5);
            border-radius: 3px;
        }
        .trainer-container::-webkit-scrollbar-thumb:hover {
            background: rgba(163, 166, 139, 0.8);
        }
        .trainer-container p {
            font-size: clamp(18px, 3vw, 20px);
            color: #e8e8e8;
            margin: 10px 0;
        }
        .trainer-container .math-notation-centered {
            text-align: center !important;
            margin: 10px 0;
            max-width: 90%;
        }
        .trainer-question {
            font-size: clamp(18px, 3vw, 20px);
            color: #e8e8e8;
            margin-bottom: 15px;
            text-align: center;
        }
        .question-number {
            width: 100px;
            height: 100px;
            line-height: 100px;
            background: linear-gradient(135deg, #6ee7b7, #4c9a7a);
            color: #1a2b3a;
            border-radius: 50%;
            font-size: clamp(16px, 2.8vw, 18px);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            text-align: center;
            white-space: nowrap;
        }
        .answer-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        .answer-btn {
            background: #3b4a5a;
            border: 1.5px solid #FFD700;
            color: #e8e8e8;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: clamp(17px, 2.6vw, 18px);
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
            min-width: 120px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            touch-action: manipulation;
        }
        .answer-btn:hover {
            background: linear-gradient(135deg, #4c6b7a, #575a7a);
            transform: scale(1.05);
        }
        .answer-btn:disabled {
            background: #575a7a;
            cursor: not-allowed;
            opacity: 0.6;
        }
        .answer-btn.selected {
            background: #6f2c42 !important;
            border: 2px solid #FFD700 !important;
        }
        .submit-btn {
            background: #4c9a7a;
            color: #fbec5d;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: clamp(14px, 2.5vw, 16px);
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
            margin: 15px auto;
            display: block;
        }
        .submit-btn:hover {
            background: linear-gradient(135deg, #6ee7b7, #4c9a7a);
            transform: scale(1.05);
        }
        .submit-btn:disabled {
            background: #c3ceb9;
            cursor: not-allowed;
            opacity: 0.6;
            color: #2e4c5a;
        }
        #feedback {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            margin: 10px 0;
            padding: 15px 25px;
            max-width: 400px;
            min-height: 80px;
            width: 90%;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
            font-size: clamp(16px, 2.8vw, 18px);
            font-weight: bold;
            text-align: center;
            opacity: 0;
            transition: opacity 0.4s ease, transform 0.4s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #feedback.show {
            opacity: 1;
            transform: translate(-50%, -50%);
        }
        #feedback.correct {
            color: #155724;
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
        }
        #feedback.incorrect {
            color: #721c24;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        #resetTrainerBtn {
            background: #6ee7b7;
            color: #2e4c5a;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: clamp(14px, 2.5vw, 16px);
            cursor: pointer;
            transition: background 0.3s ease;
        }
        #resetTrainerBtn:hover {
            background: #4c9a7a;
        }
        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 40px auto;
            max-width: 1000px;
            padding: 0 20px;
        }
        .nav-button {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #2b3a4c, #4c6b7a);
            color: #d4d4d4;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(163, 166, 139, 0.3);
            text-decoration: none;
        }
        .nav-button:hover {
            background: linear-gradient(135deg, #4c6b7a, #575a7a);
            color: #e8e8e8;
            text-decoration: none;
        }
        .nav-button svg {
            margin-right: 8px;
            fill: currentColor;
        }
        details {
            margin: 10px 0;
            padding: 10px;
            border-radius: 10px;
            background: linear-gradient(135deg, #2e4c5a, #4c6b7a);
            cursor: pointer;
            border: 1px solid rgba(163, 166, 139, 0.3);
        }
        summary {
            font-weight: 600;
            padding: 10px;
            background: linear-gradient(90deg, #3a4c5a, #575a7a);
            border-radius: 10px;
            color: #d4d4d4;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        summary:hover {
            background: linear-gradient(90deg, #575a7a, #4c9a7a);
        }
        details p {
            padding: 0 20px 10px;
            color: #e8e8e8;
        }
        .solution {
            color: #FFD700 !important;
            font-weight: bold;
        }
        .example-title {
            color: #FFD700 !important;
            font-weight: bold;
        }
        .example-condition {
            color: #e8e8e8 !important;
        }
        .completion-emoji {
            width: clamp(80px, 15vw, 120px);
            height: clamp(80px, 15vw, 120px);
            margin: 0 auto 3vw;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            border: 2px dashed #fb7185;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .completion-emoji::after {
            content: 'üéâ';
            font-size: clamp(40px, 8vw, 60px);
            color: #FFFF00;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
        #completionScreen {
            z-index: 10;
            width: 100%;
            max-width: 90%;
            margin: 20px auto;
            text-align: center;
            position: relative;
        }
        .completion-message {
            text-align: center;
            padding: 20px;
            background: #144748;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(110, 231, 183, 0.3);
            max-width: 90%;
            margin: 20px auto;
        }
        .completion-message h2 {
            font-size: clamp(20px, 3.5vw, 24px);
            color: #e6e6e6;
            margin-bottom: 10px;
        }
        .completion-message p {
            font-size: clamp(18px, 3vw, 20px);
            color: #FFFF00;
        }
        .completion-message button {
            margin-top: 20px;
            background: #6ee7b7;
            color: #2e4c5a;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: clamp(14px, 2.5vw, 16px);
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .completion-message button:hover {
            background: #4c9a7a;
        }
        .hidden {
            display: none !important;
        }
            .note-text {
    font-style: italic;
    color: #e2e8f0;
    text-align: justify;
   width: 100%;
}
           #submitAnswerBtn {
    display: inline-block;
    padding: 12px 24px; /* –ó–±—ñ–ª—å—à–µ–Ω–∞ –æ–±–ª–∞—Å—Ç—å –∫–ª—ñ–∫—É */
    font-size: 16px; /* –ß—ñ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç */
    line-height: 1.5; /* –ù–æ—Ä–º–∞–ª—å–Ω–∞ –≤–∏—Å–æ—Ç–∞ —Ä—è–¥–∫–∞ */
    cursor: pointer;
    background-color: #3b4a5a;
    border: 1.5px solid #a855f7;
    color: white;
    border-radius: 5px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω—ñ –∫—É—Ç–∏ */
    position: relative; /* –î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é z-index */
    z-index: 100; /* –í–∏—â–µ –∑–∞ —ñ–Ω—à—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ */
    transition: background-color 0.3s, transform 0.1s, opacity 0.3s;
}

#submitAnswerBtn:hover:not(:disabled) {
    background-color: #4b5a6a;
    transform: scale(1.05);
    opacity: 1;
}

#submitAnswerBtn:disabled {
    cursor: not-allowed;
    opacity: 0.6;
    pointer-events: none;
}

/* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–µ—Ä–µ–∫—Ä–∏—Ç—Ç—è */
#trainerContent {
    position: relative;
    z-index: 10;
}

#matrixDisplay, #answerButtons, #feedback {
    position: relative;
    z-index: 50; /* –ù–∏–∂—á–µ –∫–Ω–æ–ø–∫–∏ "–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏" */
}
        @media (max-width: 768px) {
            .title-box {
                margin-top: 40px;
                padding: 15px 20px;
            }
            .title-box h1 {
                font-size: 24px;
            }
            .section-container {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            .section {
                width: 80%;
                height: 180px;
            }
            .modal-content {
                padding: 15px;
                max-height: calc(100dvh - 60px);
                overflow-x: auto;
            }
            .video-card {
                width: 260px;
                height: 160px;
            }
            #theoryModal .modal-content p, #theoryModal .modal-content li {
                font-size: 18px !important;
                line-height: 1.7;
            }
            #theoryModal mjx-container, #theoryModal .math-notation-centered {
                font-size: clamp(18px, 3vw, 20px) !important;
            }
            #trainerModal mjx-container, #questionsModal mjx-container {
                font-size: clamp(18px, 3vw, 20px) !important;
            }
            .question-card {
                height: 220px;
                max-width: 90%;
            }
            .card-front {
                font-size: clamp(16px, 2.9vw, 18px);
                padding: 10px 12px;
                overflow-wrap: break-word;
                word-break: break-word;
            }
            .card-back {
                padding: 10px 12px;
                font-size: clamp(16px, 2.9vw, 18px);
                justify-content: center;
                align-items: center;
                overflow-y: auto;
            }
            #questionsModal mjx-container {
                font-size: clamp(16px, 3.2vw, 18px) !important;
                max-width: 100%;
                margin: 5px auto;
                padding: 5px;
                overflow: visible !important;
            }
            #questionsModal mjx-container[jax="CHTML"][display="true"] {
                font-size: clamp(16px, 3.2vw, 18px) !important;
                max-width: 100%;
                margin: 5px auto;
                padding: 5px;
                overflow: visible !important;
                text-align: center;
            }
            .card-back p {
                font-size: clamp(16px, 2.9vw, 18px);
                margin: 5px 0;
                text-align: center;
            }
            .trainer-container {
                padding: 4vw 5vw;
                width: 95%;
                max-width: 800px;
            }
            .trainer-container p, .trainer-question {
                font-size: clamp(16px, 2.8vw, 18px);
            }
            .question-number {
                width: 80px;
                height: 80px;
                line-height: 80px;
                font-size: clamp(14px, 2.5vw, 16px);
            }
            .answer-btn, .submit-btn, #resetTrainerBtn {
                font-size: clamp(16px, 3vw, 18px);
                padding: 8px 15px;
                min-width: 100px;
            }
            .feedback {
                font-size: clamp(14px, 2.6vw, 16px);
            }
            .completion-emoji {
                width: clamp(60px, 12vw, 100px);
                height: clamp(60px, 12vw, 100px);
            }
            .completion-emoji::after {
                font-size: clamp(30px, 6vw, 50px);
            }
            .completion-message h2 {
                font-size: clamp(18px, 3vw, 20px);
            }
            .completion-message p {
                font-size: clamp(16px, 2.8vw, 18px);
            }
            .completion-message button {
                font-size: clamp(12px, 2.3vw, 14px);
                padding: 8px 16px;
            }
            .navigation-buttons {
                margin: 22px auto;
                gap: 16px;
            }
            .nav-button {
                font-size: 18px;
                padding: 8px 18px;
            }
            .trainer-question {
                font-size: clamp(16px, 2.8vw, 18px);
            }
            .submit-btn {
                font-size: clamp(16px, 3vw, 18px);
                padding: 12px 24px;
                min-width: 120px;
                border-radius: 10px;
            }
        }
        @media (max-width: 480px) {
            .title-box {
                margin-top: 20px;
                padding: 10px 15px;
            }
            .title-box h1 {
                font-size: 22px;
            }
            .section {
                width: 90%;
                height: 150px;
            }
            .section img {
                width: 50px;
                height: 50px;
            }
            .section h2 {
                font-size: 20px;
            }
            .modal-content {
                padding: 10px;
            }
            .video-card {
                width: 260px;
                height: 160px;
            }
            #theoryModal .modal-content p, #theoryModal .modal-content li {
                font-size: 16px !important;
            }
            #theoryModal mjx-container, #theoryModal .math-notation-centered {
                font-size: clamp(16px, 2.8vw, 18px) !important;
            }
            #trainerModal mjx-container, #questionsModal mjx-container {
                font-size: clamp(15px, 2.7vw, 17px) !important;
            }
            .question-card {
                height: 240px;
                max-width: 90%;
            }
            .card-front {
                font-size: clamp(15px, 2.8vw, 17px);
                padding: 8px 10px;
            }
            .card-back {
                padding: 8px 10px;
                font-size: clamp(15px, 2.8vw, 17px);
                justify-content: center;
                align-items: center;
                overflow-y: auto;
            }
            #questionsModal mjx-container {
                font-size: clamp(15px, 2.8vw, 17px) !important;
                max-width: 100%;
                margin: 5px auto;
                padding: 5px;
                overflow: visible !important;
            }
            #questionsModal mjx-container[jax="CHTML"][display="true"] {
                font-size: clamp(15px, 2.8vw, 17px) !important;
                max-width: 100%;
                margin: 5px auto;
                padding: 5px;
                overflow: visible !important;
                text-align: center;
            }
            .card-back p {
                font-size: clamp(15px, 2.8vw, 17px);
                margin: 5px 0;
                text-align: center;
            }
            .trainer-container {
                padding: 5vw 6vw;
                width: 95%;
                max-width: 700px;
            }
            .trainer-container p, .trainer-question {
                font-size: clamp(15px, 2.7vw, 17px);
            }
            .question-number {
                width: 70px;
                height: 70px;
                line-height: 70px;
                font-size: clamp(12px, 2.3vw, 14px);
            }
            .answer-btn, .submit-btn, #resetTrainerBtn {
                font-size: clamp(14px, 2.6vw, 16px);
                padding: 6px 12px;
                min-width: 80px;
            }
            #feedback {
                padding: 10px 15px;
                font-size: clamp(14px, 2.6vw, 16px);
                width: 80%;
                max-width: 300px;
                min-height: 60px;
            }
            .completion-emoji {
                width: clamp(50px, 10vw, 80px);
                height: clamp(50px, 10vw, 80px);
            }
            .completion-emoji::after {
                font-size: clamp(25px, 5vw, 40px);
            }
            .completion-message h2 {
                font-size: clamp(16px, 2.8vw, 18px);
            }
            .completion-message p {
                font-size: clamp(14px, 2.6vw, 16px);
            }
            .completion-message button {
                font-size: clamp(12px, 2.3vw, 14px);
                padding: 6px 12px;
            }
            .nav-button {
                font-size: 16px;
                padding: 8px 16px;
            }
            .submit-btn {
                font-size: clamp(15px, 2.8vw, 17px);
                padding: 10px 20px;
                min-width: 100px;
                border-radius: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="title-box">
        <h1>19. –û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è</h1>
    </div>

    <div class="section-container">
        <div class="section" id="openTheoryBtn">
            <img src="https://img.icons8.com/fluency/96/book-shelf.png" alt="–ö–Ω–∏–≥–∞">
            <h2>–¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ</h2>
        </div>
        <div class="section" id="openVideoBtn">
            <img src="https://img.icons8.com/fluency/96/video.png" alt="–í—ñ–¥–µ–æ">
            <h2>–í—ñ–¥–µ–æ–º–∞—Ç–µ—Ä—ñ–∞–ª–∏</h2>
        </div>
        <div class="section" id="openQuestionsBtn">
            <img src="https://img.icons8.com/fluency/96/flipboard.png" alt="–ö–∞—Ä—Ç–∫–∏">
            <h2>–ü–∏—Ç–∞–Ω–Ω—è —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</h2>
        </div>
        <div class="section" id="openTrainerBtn">
            <img src="https://img.icons8.com/fluency/96/flash-on.png" alt="–¢—Ä–µ–Ω–∞–∂–µ—Ä">
            <h2>–¢—Ä–µ–Ω–∞–∂–µ—Ä</h2>
        </div>
    </div>

    <div class="navigation-buttons">
        <a class="nav-button" href='tema5.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path d="M15 18l-6-6l6-6"/>
            </svg>
            –î–æ —Ç–µ–º–∏ 5
        </a>
        <a class="nav-button" href='zmist.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
  <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
</svg>
            –î–æ –∫—É—Ä—Å—É
        </a>

    </div>

    <div id="modalOverlay"></div>

    <div id="theoryModal" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeTheoryBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <details>
                <summary>–ü–æ–Ω—è—Ç—Ç—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ. –£–º–æ–≤–∏ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è</summary>
                <p>–û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —î –∫–ª—é—á–æ–≤–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –ª—ñ–Ω—ñ–π–Ω–æ—ó –∞–ª–≥–µ–±—Ä–∏, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ä–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º –ª—ñ–Ω—ñ–π–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å —Ç–∞ —ñ–Ω—à–∏—Ö –º–∞—Ç—Ä–∏—á–Ω–∏—Ö –∑–∞–¥–∞—á, —ñ –≤ —Ü—å–æ–º—É –ø—É–Ω–∫—Ç—ñ –º–∏ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ —ó—ó –æ–ø–∏—Å, –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ, –º–µ—Ç–æ–¥–∏ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —Ç–∞ –Ω–∞–≤–µ–¥–µ–º–æ –ø—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è.</p>
                <p><span class="example-title">–ü–æ–Ω—è—Ç—Ç—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ.</span>  –û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è ‚Äì —Ü–µ –º–∞—Ç—Ä–∏—Ü—è \( A^{-1} \), —è–∫–∞, –ø–æ–º–Ω–æ–∂–µ–Ω–∞ –Ω–∞ –≤–∏—Ö—ñ–¥–Ω—É –∫–≤–∞–¥—Ä–∞—Ç–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( A \), –¥–∞—î –æ–¥–∏–Ω–∏—á–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( E \). –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ —Ü–µ –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è —Ç–∞–∫:</p>
                <p class="math-notation-centered">\[
                    A \cdot A^{-1} = A^{-1} \cdot A = E, \tag{5.16}
                \]</p>
                <p>–¥–µ \( A \) ‚Äì —Ü–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —Ä–æ–∑–º—ñ—Ä–Ω–æ—Å—Ç—ñ \( n \times n \), –∞ \( E \) ‚Äì –æ–¥–∏–Ω–∏—á–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —Ç–æ–≥–æ –∂ —Ä–æ–∑–º—ñ—Ä—É.</p>
                <p>–ê–Ω–∞–ª–æ–≥—ñ—é –º–æ–∂–Ω–∞ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∑ –æ–±–µ—Ä–Ω–µ–Ω–∏–º–∏ —á–∏—Å–ª–∞–º–∏: —è–∫—â–æ \( a = 5 \), —Ç–æ –π–æ–≥–æ –æ–±–µ—Ä–Ω–µ–Ω–µ ‚Äì \( \frac{1}{a} = \frac{1}{5} \), —ñ —ó—Ö –¥–æ–±—É—Ç–æ–∫ –¥–æ—Ä—ñ–≤–Ω—é—î –æ–¥–∏–Ω–∏—Ü—ñ \( 1 \) (\( 5 \cdot \frac{1}{5} = 1 \)). –î–ª—è –º–∞—Ç—Ä–∏—Ü—å –¥–æ–±—É—Ç–æ–∫ \( A \cdot A^{-1} \) —Ç–∞–∫–æ–∂ –¥–∞—î –æ–¥–∏–Ω–∏—Ü—é, –∞–ª–µ –≤ –º–∞—Ç—Ä–∏—á–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ ‚Äì –æ–¥–∏–Ω–∏—á–Ω—É –º–∞—Ç—Ä–∏—Ü—é.</p>
                <p><span class="example-title">–£–º–æ–≤–∏ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è.</span> –û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —ñ—Å–Ω—É—î –ª–∏—à–µ –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–∏—Ö –º–∞—Ç—Ä–∏—Ü—å \( A_{n \times n} \). –ö–ª—é—á–æ–≤–æ—é —É–º–æ–≤–æ—é –¥–ª—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ —î –Ω–µ–Ω—É–ª—å–æ–≤–∏–π –≤–∏–∑–Ω–∞—á–Ω–∏–∫, —Ç–æ–±—Ç–æ:</p>
                <p class="math-notation-centered">\[
                    |A| \neq 0,
                \]</p>
                <p>–¥–µ \( |A| \) –ø–æ–∑–Ω–∞—á–∞—î –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \). –Ø–∫—â–æ \( |A| = 0 \), —Ç–æ –º–∞—Ç—Ä–∏—Ü—è –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –æ—Å–æ–±–ª–∏–≤–æ—é (–≤–∏—Ä–æ–¥–∂–µ–Ω–æ—é), —ñ –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ –Ω–µ —ñ—Å–Ω—É—î. –Ø–∫—â–æ \( |A| \neq 0 \), —Ç–æ –º–∞—Ç—Ä–∏—Ü—è —î –Ω–µ–æ—Å–æ–±–ª–∏–≤–æ—é (–Ω–µ–≤–∏—Ä–æ–¥–∂–µ–Ω–æ—é), —ñ –¥–ª—è –Ω–µ—ó –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é.</p>
                <p class="note"><span class="example-title">–ü—Ä–∏–º—ñ—Ç–∫–∞.</span> <span class="note-text">–í–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \) ‚Äì —Ü–µ —á–∏—Å–ª–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É—î –ø–µ–≤–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –º–∞—Ç—Ä–∏—Ü—ñ, –∑–æ–∫—Ä–µ–º–∞ —ó—ó –æ–±–µ—Ä–Ω–µ–Ω—ñ—Å—Ç—å. –í–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \) –∑–∞–∑–≤–∏—á–∞–π –ø–æ–∑–Ω–∞—á–∞—é—Ç—å —è–∫ \( |A| \), —Ö–æ—á–∞ –º–æ–∂–ª–∏–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –π —ñ–Ω—à–∏—Ö –ø–æ–∑–Ω–∞—á–µ–Ω—å, —Ç–∞–∫–∏—Ö —è–∫ \( \det(A) \) –∞–±–æ \( \Delta A \).</span></p>
                <p>–©–æ–± –∑–Ω–∞–π—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–Ω–∞—Ç–∏ —Ç–∞ –≤–º—ñ—Ç–∏ –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏ –≤–∏–∑–Ω–∞—á–Ω–∏–∫–∏. –¢–∞–∫–æ–∂ –≤–∞–∂–ª–∏–≤–æ —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Ç–∞–∫–µ –º–∞—Ç—Ä–∏—Ü—è —ñ –≤–º—ñ—Ç–∏ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥–µ—è–∫—ñ –æ—Å–Ω–æ–≤–Ω—ñ –¥—ñ—ó –∑ –Ω–∏–º–∏.</p>
            </details>
            <details>
    <summary>–ú–µ—Ç–æ–¥–∏ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ</summary>
    <p>–û–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( A^{-1} \) –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –∫—ñ–ª—å–∫–æ–º–∞ —Å–ø–æ—Å–æ–±–∞–º–∏, –∑–æ–∫—Ä–µ–º–∞:</p>
    <p><span class="example-title">–ú–µ—Ç–æ–¥–æ–º –ì–∞—É—Å—Å–∞-–ñ–æ—Ä–¥–∞–Ω–∞.</span> –¶–µ–π –º–µ—Ç–æ–¥ –ø–æ–ª—è–≥–∞—î —É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ –≤–∏–≥–ª—è–¥—É \( (A \mid E) \), –¥–µ –ª—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –º—ñ—Å—Ç–∏—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ \( A_{n \times n} \), –∞ –ø—Ä–∞–≤–∞ ‚Äì –æ–¥–∏–Ω–∏—á–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —Ç–æ–≥–æ –∂ —Ä–æ–∑–º—ñ—Ä—É. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –µ–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–∞–¥ —Ä—è–¥–∫–∞–º–∏ (–ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä—è–¥–∫—ñ–≤, –º–Ω–æ–∂–µ–Ω–Ω—è —Ä—è–¥–∫–∞ –Ω–∞ –Ω–µ–Ω—É–ª—å–æ–≤–µ —á–∏—Å–ª–æ, –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫—Ä–∞—Ç–Ω–æ–≥–æ –æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ –¥–æ —ñ–Ω—à–æ–≥–æ), –ø–æ—Å—Ç—É–ø–æ–≤–æ –ø—Ä–∏–≤–æ–¥—è—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é –¥–æ –≤–∏–≥–ª—è–¥—É \( (E \mid A^{-1}) \). –£ —Ü—å–æ–º—É –≤–∏–≥–ª—è–¥—ñ –ª—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ —Å—Ç–∞—î –æ–¥–∏–Ω–∏—á–Ω–æ—é –º–∞—Ç—Ä–∏—Ü–µ—é, –∞ –ø—Ä–∞–≤–∞ –º—ñ—Å—Ç–∏—Ç—å —à—É–∫–∞–Ω—É –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( A^{-1} \). –ú–µ—Ç–æ–¥ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –ª–∏—à–µ –¥–ª—è –Ω–µ–æ—Å–æ–±–ª–∏–≤–∏—Ö –º–∞—Ç—Ä–∏—Ü—å, —Ç–æ–±—Ç–æ —Ç–∞–∫–∏—Ö, —É —è–∫–∏—Ö –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é (\( |A| \neq 0 \)).</p>
    <p><span class="example-title">–ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∏—Ö –¥–æ–ø–æ–≤–Ω–µ–Ω—å.</span> –û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ \( A_{n \times n} \) –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é:</p>
    <p class="math-notation-centered">\[
        A^{-1} = \frac{1}{|A|} \cdot \tilde{A}^T, \tag{5.17}
    \]</p>
    <p>–¥–µ \( |A| \) ‚Äì –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \); \( \tilde{A} \) ‚Äì —Å–æ—é–∑–Ω–∞ (–∞–±–æ –ø—Ä–∏—î–¥–Ω–∞–Ω–∞) –º–∞—Ç—Ä–∏—Ü—è, –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ —è–∫–æ—ó —î –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω—ñ –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ \( a_{ij} \) –º–∞—Ç—Ä–∏—Ü—ñ \( A \); \( \tilde{A}^T \) ‚Äì —Ç—Ä–∞–Ω—Å–ø–æ–Ω–æ–≤–∞–Ω–∞ —Å–æ—é–∑–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è.</p>
    <p class="note"><span class="example-title">–ü—Ä–∏–º—ñ—Ç–∫–∞.</span> <span class="note-text">–£ —Ü—å–æ–º—É –ø–æ—Å—ñ–±–Ω–∏–∫—É –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è –º–µ—Ç–æ–¥ –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∏—Ö –¥–æ–ø–æ–≤–Ω–µ–Ω—å, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –∫–ª–∞—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—î –∫—Ä–∞—â–µ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–∞—Ç—Ä–∏—Ü—å —ñ —ó—Ö–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ. –í–æ–¥–Ω–æ—á–∞—Å –º–µ—Ç–æ–¥ –ì–∞—É—Å—Å–∞-–ñ–æ—Ä–¥–∞–Ω–∞ —î —á–∏—Å–µ–ª—å–Ω–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º —ñ —à–∏—Ä–æ–∫–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –≤ –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω—ñ–π –º–∞—Ç–µ–º–∞—Ç–∏—Ü—ñ.</span></p>
    <p><span class="example-title">–ü—Ä–∏–∫–ª–∞–¥ 5.11.</span> <span class="example-condition">–ó–Ω–∞–π—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é –¥–ª—è –º–∞—Ç—Ä–∏—Ü—ñ \( A = \begin{pmatrix} 1 & 2 \\ 3 & 4 \end{pmatrix} \).</span></p>
    <p class="solution" style="text-align: center;"><strong>–†–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è</strong></p>
    <p>–ó–≥—ñ–¥–Ω–æ —Ñ–æ—Ä–º—É–ª–∏ (5.17) –¥–ª—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ:</p>
    <p class="math-notation-centered">\[
        A^{-1} = \frac{1}{|A|} \cdot \tilde{A}^T,
    \]</p>
    <p>–¥–µ \( |A| \) ‚Äì –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \), –∞ \( \tilde{A}^T \) ‚Äì —Ç—Ä–∞–Ω—Å–ø–æ–Ω–æ–≤–∞–Ω–∞ —Å–æ—é–∑–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è.</p>
    <p>–û–±—á–∏—Å–ª–∏–º–æ –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( A \):</p>
    <p class="math-notation-centered">\[
        |A| = \begin{vmatrix} 1 & 2 \\ 3 & 4 \end{vmatrix} = 1 \cdot 4 - 2 \cdot 3 = 4 - 6 = -2.
    \]</p>
    <p>–û—Å–∫—ñ–ª—å–∫–∏ \( |A| = -2 \neq 0 \), –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —ñ—Å–Ω—É—î.</p>
    <p>–ó–Ω–∞—Ö–æ–¥–∏–º–æ –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω—ñ –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è \( A_{ij} \) –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ \( a_{ij} \) –º–∞—Ç—Ä–∏—Ü—ñ \( A \):</p>
   <div class="matrix-formulas">
    <p class="matrix-formula">\( A_{11} = (-1)^{1+1} \cdot M_{11} = 1 \cdot 4 = 4 \)</p>
    <p class="matrix-formula">\( A_{12} = (-1)^{1+2} \cdot M_{12} = -1 \cdot 3 = -3 \)</p>
    <p class="matrix-formula">\( A_{21} = (-1)^{2+1} \cdot M_{21} = -1 \cdot 2 = -2 \)</p>
    <p class="matrix-formula">\( A_{22} = (-1)^{2+2} \cdot M_{22} = 1 \cdot 1 = 1 \)</p>
</div>
    <p>–§–æ—Ä–º—É—î–º–æ —Å–æ—é–∑–Ω—É –º–∞—Ç—Ä–∏—Ü—é:</p>
    <p class="math-notation-centered">\[
        \tilde{A} = \begin{pmatrix} 4 & -3 \\ -2 & 1 \end{pmatrix}.
    \]</p>
    <p>–¢—Ä–∞–Ω—Å–ø–æ–Ω—É—î–º–æ –º–∞—Ç—Ä–∏—Ü—é \( \tilde{A} \):</p>
    <p class="math-notation-centered">\[
        \tilde{A}^T = \begin{pmatrix} 4 & -2 \\ -3 & 1 \end{pmatrix}.
    \]</p>
    <p>–ü—ñ–¥—Å—Ç–∞–≤–∏–º–æ —É —Ñ–æ—Ä–º—É–ª—É –¥–ª—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ:</p>
    <p class="math-notation-centered">\[
        A^{-1} = \frac{1}{-2} \cdot \begin{pmatrix} 4 & -2 \\ -3 & 1 \end{pmatrix} = \begin{pmatrix} -2 & 1 \\ 1.5 & -0.5 \end{pmatrix}.
    \]</p>
    <p>–ü–µ—Ä–µ–≤—ñ—Ä–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å —Ä–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è, –æ–±—á–∏—Å–ª–∏–≤—à–∏ \( A^{-1} \cdot A = E \) (–¥–µ \( E \) ‚Äì –æ–¥–∏–Ω–∏—á–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è):</p>
    <p class="math-notation-centered">\[
        A^{-1} \cdot A = \begin{pmatrix} -2 & 1 \\ 1.5 & -0.5 \end{pmatrix} \cdot \begin{pmatrix} 1 & 2 \\ 3 & 4 \end{pmatrix} = \begin{pmatrix} (-2) \cdot 1 + 1 \cdot 3 & (-2) \cdot 2 + 1 \cdot 4 \\ 1.5 \cdot 1 + (-0.5) \cdot 3 & 1.5 \cdot 2 + (-0.5) \cdot 4 \end{pmatrix} = \begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix} = E.
    \]</p>
    <p>–û—Ç—Ä–∏–º–∞–Ω–æ –æ–¥–∏–Ω–∏—á–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( E \), —â–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –æ–±—á–∏—Å–ª–µ–Ω—å.</p>
    <p><strong>–í—ñ–¥–ø–æ–≤—ñ–¥—å.</strong> \( A^{-1} = \begin{pmatrix} -2 & 1 \\ 1.5 & -0.5 \end{pmatrix} \).</p>
    <p><span class="example-title">–ü—Ä–∏–∫–ª–∞–¥ 5.12.</span> <span class="example-condition">–ó–Ω–∞–π—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é –¥–ª—è –º–∞—Ç—Ä–∏—Ü—ñ \( B = \begin{pmatrix} 2 & 5 & 7 \\ 6 & 3 & 4 \\ 5 & -2 & -3 \end{pmatrix} \).</span></p>
    <p class="solution" style="text-align: center;"><strong>–†–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è</strong></p>
    <p>–ó–≥—ñ–¥–Ω–æ —Ñ–æ—Ä–º—É–ª–∏ (5.17) –¥–ª—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ:</p>
    <p class="math-notation-centered">\[
        B^{-1} = \frac{1}{|B|} \cdot \tilde{B}^T,
    \]</p>
    <p>–¥–µ \( |B| \) ‚Äì –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( B \), –∞ \( \tilde{B}^T \) ‚Äì —Ç—Ä–∞–Ω—Å–ø–æ–Ω–æ–≤–∞–Ω–∞ —Å–æ—é–∑–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è.</p>
    <p>–û–±—á–∏—Å–ª–∏–º–æ –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( B \), —Ä–æ–∑–∫–ª–∞–≤—à–∏ –∑–∞ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ø–µ—Ä—à–æ–≥–æ —Ä—è–¥–∫–∞:</p>
    <p class="math-notation-centered">\[
        |B| = \begin{vmatrix} 2 & 5 & 7 \\ 6 & 3 & 4 \\ 5 & -2 & -3 \end{vmatrix} = 2 \cdot \begin{vmatrix} 3 & 4 \\ -2 & -3 \end{vmatrix} - 5 \cdot \begin{vmatrix} 6 & 4 \\ 5 & -3 \end{vmatrix} + 7 \cdot \begin{vmatrix} 6 & 3 \\ 5 & -2 \end{vmatrix} =  2 \cdot (-1) - 5 \cdot (-38) + 7 \cdot (-27) = -2 + 190 - 189 = -1.
    \]</p>
    <p>–û—Å–∫—ñ–ª—å–∫–∏ \( |B| = -1 \neq 0 \), –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —ñ—Å–Ω—É—î.</p>
    <p>–ó–Ω–∞—Ö–æ–¥–∏–º–æ –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω—ñ –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è \( B_{ij} \) –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ \( b_{ij} \) –º–∞—Ç—Ä–∏—Ü—ñ \( B \):</p>
   <div class="matrix-formulas">
    <p class="matrix-formula">\( B_{11} = (-1)^{1+1} \cdot M_{11} = \begin{vmatrix} 3 & 4 \\ -2 & -3 \end{vmatrix} = -9 + 8 = -1 \)</p>
    <p class="matrix-formula">\( B_{12} = (-1)^{1+2} \cdot M_{12} = -\begin{vmatrix} 6 & 4 \\ 5 & -3 \end{vmatrix} = -(-18 - 20) = 38 \)</p>
    <p class="matrix-formula">\( B_{13} = (-1)^{1+3} \cdot M_{13} = \begin{vmatrix} 6 & 3 \\ 5 & -2 \end{vmatrix} = -12 - 15 = -27 \)</p>
    <p class="matrix-formula">\( B_{21} = (-1)^{2+1} \cdot M_{21} = -\begin{vmatrix} 5 & 7 \\ -2 & -3 \end{vmatrix} = -(-15 + 14) = 1 \)</p>
    <p class="matrix-formula">\( B_{22} = (-1)^{2+2} \cdot M_{22} = \begin{vmatrix} 2 & 7 \\ 5 & -3 \end{vmatrix} = -6 - 35 = -41 \)</p>
    <p class="matrix-formula">\( B_{23} = (-1)^{2+3} \cdot M_{23} = -\begin{vmatrix} 2 & 5 \\ 5 & -2 \end{vmatrix} = -(-4 - 25) = 29 \)</p>
    <p class="matrix-formula">\( B_{31} = (-1)^{3+1} \cdot M_{31} = \begin{vmatrix} 5 & 7 \\ 3 & 4 \end{vmatrix} = 20 - 21 = -1 \)</p>
    <p class="matrix-formula">\( B_{32} = (-1)^{3+2} \cdot M_{32} = -\begin{vmatrix} 2 & 7 \\ 6 & 4 \end{vmatrix} = -(8 - 42) = 34 \)</p>
    <p class="matrix-formula">\( B_{33} = (-1)^{3+3} \cdot M_{33} = \begin{vmatrix} 2 & 5 \\ 6 & 3 \end{vmatrix} = 6 - 30 = -24 \)</p>
</div>
    <p>–§–æ—Ä–º—É—î–º–æ —Å–æ—é–∑–Ω—É –º–∞—Ç—Ä–∏—Ü—é:</p>
    <p class="math-notation-centered">\[
        \tilde{B} = \begin{pmatrix} -1 & 38 & -27 \\ 1 & -41 & 29 \\ -1 & 34 & -24 \end{pmatrix}.
    \]</p>
    <p>–¢—Ä–∞–Ω—Å–ø–æ–Ω—É—î–º–æ –º–∞—Ç—Ä–∏—Ü—é \( \tilde{B} \):</p>
    <p class="math-notation-centered">\[
        \tilde{B}^T = \begin{pmatrix} -1 & 1 & -1 \\ 38 & -41 & 34 \\ -27 & 29 & -24 \end{pmatrix}.
    \]</p>
    <p>–ü—ñ–¥—Å—Ç–∞–≤–∏–º–æ —É —Ñ–æ—Ä–º—É–ª—É –¥–ª—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ:</p>
    <p class="math-notation-centered">\[
        B^{-1} = \frac{1}{-1} \cdot \begin{pmatrix} -1 & 1 & -1 \\ 38 & -41 & 34 \\ -27 & 29 & -24 \end{pmatrix} = \begin{pmatrix} 1 & -1 & 1 \\ -38 & 41 & -34 \\ 27 & -29 & 24 \end{pmatrix}.
    \]</p>
    <p>–ü–µ—Ä–µ–≤—ñ—Ä–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å —Ä–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è, –æ–±—á–∏—Å–ª–∏–≤—à–∏ \( B^{-1} \cdot B = E \) (–¥–µ \( E \) ‚Äì –æ–¥–∏–Ω–∏—á–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è):</p>
    <p class="math-notation-centered">\[
        B^{-1} \cdot B = \begin{pmatrix} 1 & -1 & 1 \\ -38 & 41 & -34 \\ 27 & -29 & 24 \end{pmatrix} \cdot \begin{pmatrix} 2 & 5 & 7 \\ 6 & 3 & 4 \\ 5 & -2 & -3 \end{pmatrix} =
    \]</p>
    <p class="math-notation-centered">\[=
        \begin{pmatrix} 1 \cdot 2 + (-1) \cdot 6 + 1 \cdot 5 & 1 \cdot 5 + (-1) \cdot 3 + 1 \cdot (-2) & 1 \cdot 7 + (-1) \cdot 4 + 1 \cdot (-3) \\ -38 \cdot 2 + 41 \cdot 6 + (-34) \cdot 5 & -38 \cdot 5 + 41 \cdot 3 + (-34) \cdot (-2) & -38 \cdot 7 + 41 \cdot 4 + (-34) \cdot (-3) \\ 27 \cdot 2 + (-29) \cdot 6 + 24 \cdot 5 & 27 \cdot 5 + (-29) \cdot 3 + 24 \cdot (-2) & 27 \cdot 7 + (-29) \cdot 4 + 24 \cdot (-3) \end{pmatrix} =
    \]</p>
    <p class="math-notation-centered">\[=
        \begin{pmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{pmatrix}.
    \]</p>
    <p>–ü–æ–≤–Ω–µ –º–Ω–æ–∂–µ–Ω–Ω—è –¥–∞—î –æ–¥–∏–Ω–∏—á–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( E \), —â–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å.</p>
    <p><strong>–í—ñ–¥–ø–æ–≤—ñ–¥—å.</strong> \( B^{-1} = \begin{pmatrix} 1 & -1 & 1 \\ -38 & 41 & -34 \\ 27 & -29 & 24 \end{pmatrix} \).</p>
</details>
        </div>
    </div>

   <div id="videoModal" class="modal">
    <div class="modal-header">
        <button class="close-btn" id="closeVideoBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <h2 class="glow-title">–û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–µ–æ</h2>
        <div class="video-card-container">
            <div class="video-card" data-video="1">
                <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞">
                <h3>–ó–Ω–∞–π–æ–º—Å—Ç–≤–æ –∑ –æ–±–µ—Ä–Ω–µ–Ω–∏–º–∏ –º–∞—Ç—Ä–∏—Ü—è–º–∏</h3>
            </div>
            <div class="video-card" data-video="2">
                <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞">
                <h3>–ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ 2x2</h3>
            </div>
            <div class="video-card" data-video="3">
                <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞">
                <h3>–û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è 3x3</h3>
            </div>
            <div class="video-card" data-video="4">
                <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞">
                <h3>–ü—Ä–∏–∫–ª–∞–¥ –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ 3x3 –¥–≤–æ–º–∞ –º–µ—Ç–æ–¥–∞–º–∏</h3>
            </div>
        </div>
    </div>
</div>

<div id="videoPlayerModal1" class="modal">
    <div class="modal-header">
        <button class="close-btn" id="closeVideoPlayerBtn1">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="video-player-container">
            <iframe id="youtubePlayer1" width="100%" src="https://www.youtube.com/embed/TcDMUJn0Ugs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
</div>

<div id="videoPlayerModal2" class="modal">
    <div class="modal-header">
        <button class="close-btn" id="closeVideoPlayerBtn2">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="video-player-container">
            <iframe id="youtubePlayer2" width="100%" src="https://www.youtube.com/embed/0EhTko6cAA4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
</div>

<div id="videoPlayerModal3" class="modal">
    <div class="modal-header">
        <button class="close-btn" id="closeVideoPlayerBtn3">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="video-player-container">
            <iframe id="youtubePlayer3" width="100%" src="https://www.youtube.com/embed/y-NqkEyxHnI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
</div>

<div id="videoPlayerModal4" class="modal">
    <div class="modal-header">
        <button class="close-btn" id="closeVideoPlayerBtn4">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="video-player-container">
            <iframe id="youtubePlayer4" width="100%" src="https://www.youtube.com/embed/KF6ZHm-M4lw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
</div>

<div id="questionsModal" class="modal">
    <div class="modal-header">
        <button class="close-btn" id="closeQuestionsBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="question-card">
            <div class="card-inner">
                <div class="card-front">
                    1. –©–æ —Ç–∞–∫–µ –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è?
                </div>
                <div class="card-back">
                    <p>–û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è \( A^{-1} \) ‚Äì —Ü–µ –º–∞—Ç—Ä–∏—Ü—è, —è–∫–∞, –ø–æ–º–Ω–æ–∂–µ–Ω–∞ –Ω–∞ –≤–∏—Ö—ñ–¥–Ω—É –∫–≤–∞–¥—Ä–∞—Ç–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( A \), –¥–∞—î –æ–¥–∏–Ω–∏—á–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( E \). –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ —Ü–µ –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è —Ç–∞–∫:</p>
                    <p class="math-notation-centered">\[
                        A \cdot A^{-1} = A^{-1} \cdot A = E,
                    \]</p>
                    <p>–¥–µ \( E \) ‚Äì –æ–¥–∏–Ω–∏—á–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —Ç–æ–≥–æ –∂ —Ä–æ–∑–º—ñ—Ä—É.</p>
                </div>
            </div>
        </div>
        <div class="question-card">
            <div class="card-inner">
                <div class="card-front">
                    2. –Ø–∫—ñ —É–º–æ–≤–∏ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ?
                </div>
                <div class="card-back">
                    <p>–û–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —ñ—Å–Ω—É—î –ª–∏—à–µ –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–∏—Ö –º–∞—Ç—Ä–∏—Ü—å \( A_{n \times n} \). –ö–ª—é—á–æ–≤–æ—é —É–º–æ–≤–æ—é —î –Ω–µ–Ω—É–ª—å–æ–≤–∏–π –≤–∏–∑–Ω–∞—á–Ω–∏–∫, —Ç–æ–±—Ç–æ:</p>
                    <p class="math-notation-centered">\[
                        |A| \neq 0.
                    \]</p>
                </div>
            </div>
        </div>
        <div class="question-card">
            <div class="card-inner">
                <div class="card-front">
                    3. –Ø–∫ –∑–Ω–∞–π—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é –º–µ—Ç–æ–¥–æ–º –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∏—Ö –¥–æ–ø–æ–≤–Ω–µ–Ω—å?
                </div>
                <div class="card-back">
                    <p>–û–±—á–∏—Å–∏—Ç–∏ –≤–∏–∑–Ω–∞—á–Ω–∏–∫ –º–∞—Ç—Ä–∏—Ü—ñ \( |A| \); —Å–∫–ª–∞—Å—Ç–∏ –º–∞—Ç—Ä–∏—Ü—é –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∏—Ö –¥–æ–ø–æ–≤–Ω–µ–Ω—å —Ç–∞ —Ç—Ä–∞–Ω—Å–ø–æ–Ω—É–≤–∞—Ç–∏ —ó—ó, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–∏—î–¥–Ω–∞–Ω—É –º–∞—Ç—Ä–∏—Ü—é \( A \tilde{} \), —ñ –ø–æ–º–Ω–æ–∂–∏—Ç–∏ \( A \tilde{} \) –Ω–∞ \( \frac{1}{|A|} \), —Ç–æ–±—Ç–æ \( A^{-1} = \frac{1}{|A|} \cdot A \tilde{} \).</p>
                </div>
            </div>
        </div>
        <div class="question-card">
            <div class="card-inner">
                <div class="card-front">
                    4. –Ø–∫ –ø—Ä–∞—Ü—é—î –º–µ—Ç–æ–¥ –ì–∞—É—Å—Å–∞-–ñ–æ—Ä–¥–∞–Ω–∞ –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ?
                </div>
                <div class="card-back">
                    <p>–°–∫–ª–∞–¥–∞—î—Ç—å—Å—è —Ä–æ–∑—à–∏—Ä–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è \( [A | E] \). –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –µ–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–∏—Ö –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω—å —Ä—è–¥–∫—ñ–≤ –ª—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –∑–≤–æ–¥–∏—Ç—å—Å—è –¥–æ –æ–¥–∏–Ω–∏—á–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ \( E \), –∞ –ø—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ —Å—Ç–∞—î \( A^{-1} \).</p>
                </div>
            </div>
        </div>
    </div>
</div>

    <div id="trainerModal" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeTrainerBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="trainer-container" id="trainerContent">
                <div class="question-number" id="questionNumber">–ü–∏—Ç–∞–Ω–Ω—è 1</div>
                <p class="trainer-question" id="trainerQuestion"></p>
                <div id="matrixDisplay" class="math-notation-centered"></div>
                <div class="answer-buttons" id="answerButtons"></div>
                <button class="submit-btn" id="submitAnswerBtn" disabled>–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏</button>
                <p id="feedback"></p>
            </div>
            <div id="completionScreen" class="completion-message hidden">
                <div class="completion-emoji"></div>
                <h2>–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</h2>
                <p>–ú–æ–ª–æ–¥–µ—Ü—å!</p>
                <button id="resetTrainerBtn">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
            </div>
        </div>
    </div>

<script>
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω
const modals = {
    theory: document.getElementById('theoryModal'),
    video: document.getElementById('videoModal'),
    questions: document.getElementById('questionsModal'),
    trainer: document.getElementById('trainerModal'),
    videoPlayer1: document.getElementById('videoPlayerModal1'),
    videoPlayer2: document.getElementById('videoPlayerModal2'),
    videoPlayer3: document.getElementById('videoPlayerModal3'),
    videoPlayer4: document.getElementById('videoPlayerModal4')
};

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–Ω–æ–ø–æ–∫
const buttons = {
    openTheory: document.getElementById('openTheoryBtn'),
    openVideo: document.getElementById('openVideoBtn'),
    openQuestions: document.getElementById('openQuestionsBtn'),
    openTrainer: document.getElementById('openTrainerBtn'),
    closeTheory: document.getElementById('closeTheoryBtn'),
    closeVideo: document.getElementById('closeVideoBtn'),
    closeQuestions: document.getElementById('closeQuestionsBtn'),
    closeTrainer: document.getElementById('closeTrainerBtn'),
    closeVideoPlayer1: document.getElementById('closeVideoPlayerBtn1'),
    closeVideoPlayer2: document.getElementById('closeVideoPlayerBtn2'),
    closeVideoPlayer3: document.getElementById('closeVideoPlayerBtn3'),
    closeVideoPlayer4: document.getElementById('closeVideoPlayerBtn4'),
    submitAnswer: document.getElementById('submitAnswerBtn'),
    resetTrainer: document.getElementById('resetTrainerBtn')
};

// –û–≤–µ—Ä–ª–µ–π
const overlay = document.getElementById('modalOverlay');

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è YouTube-–ø–ª–µ—î—Ä—ñ–≤
const youtubePlayers = {
    1: document.getElementById('youtubePlayer1'),
    2: document.getElementById('youtubePlayer2'),
    3: document.getElementById('youtubePlayer3'),
    4: document.getElementById('youtubePlayer4')
};

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞
const trainerContent = document.getElementById('trainerContent');
const questionNumber = document.getElementById('questionNumber');
const trainerQuestion = document.getElementById('trainerQuestion');
const matrixDisplay = document.getElementById('matrixDisplay');
const answerButtons = document.getElementById('answerButtons');
const feedback = document.getElementById('feedback');
const completionScreen = document.getElementById('completionScreen');
const resetTrainerBtn = document.getElementById('resetTrainerBtn');
const submitAnswerBtn = document.getElementById('submitAnswerBtn');

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞
let currentQuestion = 1;
let selectedAnswer = null;
let incorrectAttempts = 0;
let scrollPosition = 0;
let correctAnswerLatex = '';
let currentXPosition = null;

// –ú–∞—Å–∏–≤ —ñ–∑ –≥–æ—Ç–æ–≤–∏–º–∏ –º–∞—Ç—Ä–∏—Ü—è–º–∏ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏ –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 5
const predefinedMatricesQ5 = [
    {
        matrix: [[2, 1, 0], [1, 1, 1], [0, 1, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 0 & 1 & -1 \\\\ -1 & 2 & -1 \\\\ 1 & -2 & 2 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 0 & 1 & -1 \\\\ 1 & -2 & 2 \\\\ -1 & 2 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 0 & -1 & 1 \\\\ 1 & 2 & -2 \\\\ -1 & -1 & 2 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 0 & 1 & -1 \\\\ -1 & 2 & -1 \\\\ 1 & -2 & 2 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 2, 3], [0, 1, 4], [0, 0, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -2 & 5 \\\\ 0 & 1 & -4 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -2 & 5 \\\\ 0 & 0 & 1 \\\\ 0 & 1 & -4 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 5 & -2 \\\\ 0 & -4 & 1 \\\\ 0 & 1 & 0 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -2 & 5 \\\\ 0 & 1 & -4 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[2, 1, 1], [1, 2, 1], [1, 1, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 0 & 1 & 1 \\\\ -1 & -1 & 3 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 0 & 1 & -1 \\\\ -1 & -1 & 3 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ -1 & -1 & 3 \\\\ 0 & 1 & -1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 0 & 1 & -1 \\\\ -1 & 1 & 3 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 1, 1], [1, 2, 1], [0, 1, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ -1 & 1 & 0 \\\\ 1 & -1 & 1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 1 & -1 & 0 \\\\ -1 & 1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 0 \\\\ -1 & 0 & -1 \\\\ 1 & 1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 1 & 1 & 0 \\\\ 1 & -1 & 1 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 0, -1], [2, 1, 1], [1, 1, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 0 & 1 & -1 \\\\ 1 & -2 & 3 \\\\ -1 & 1 & -1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 0 & 1 & -1 \\\\ 1 & 2 & 3 \\\\ -1 & 1 & -1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 0 & -1 & 1 \\\\ 1 & 3 & -2 \\\\ -1 & -1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 0 & 1 & -1 \\\\ 1 & 1 & 3 \\\\ -1 & 1 & -1 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 1, 0], [0, 1, 1], [0, 0, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 1 & -1 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 1 & -1 \\\\ 0 & 1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 0 & -1 \\\\ 0 & 1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 0 & 1 \\\\ 0 & 1 & -1 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 1, 1], [1, 2, 1], [0, 1, 1]], // –Ü–¥–µ–Ω—Ç–∏—á–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è 4
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ -1 & 1 & 0 \\\\ 1 & -1 & 1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 1 & 1 & 0 \\\\ 1 & -1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 1 & -1 \\\\ -1 & 0 & 0 \\\\ 1 & -1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ -1 & 1 & 0 \\\\ 1 & -1 & 1 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 1, 0], [1, 2, 0], [0, -1, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 2 & -1 & 0 \\\\ -1 & 1 & 0 \\\\ -1 & 1 & 1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 2 & -1 & 0 \\\\ -1 & 1 & 0 \\\\ -1 & 0 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 2 & -1 & 0 \\\\ -1 & 1 & 0 \\\\ -1 & -1 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 2 & -1 & 0 \\\\ 1 & -1 & 0 \\\\ -1 & 1 & 1 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 0, 1], [0, 1, 1], [0, 0, 1]],
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 0 & 1 & -1 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 0 & 1 & -1 \\\\ 1 & 0 & -1 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 1 & -1 \\\\ 0 & 1 & -1 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & 0 & -1 \\\\ 0 & -1 & -1 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: false }
        ]
    },
    {
        matrix: [[1, 1, 0], [0, 1, 1], [0, 0, 1]], // –Ü–¥–µ–Ω—Ç–∏—á–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è 6
        answers: [
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 1 & -1 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: true },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 1 & -1 \\\\ 0 & 1 & 0 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 1 & 1 \\\\ 0 & 0 & -1 \\end{pmatrix}`, correct: false },
            { latex: `A^{-1} = \\begin{pmatrix} 1 & -1 & 1 \\\\ 0 & 1 & -1 \\\\ 0 & 0 & 1 \\end{pmatrix}`, correct: false }
        ]
    }
];

// –ü—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 3
const question3Examples = [
    {
        matrixA: [['7', '4'], ['x', '3']],
        inverseMatrix: [['3', '-4'], ['-5', '7']],
        options: ['-5', '5', '-3', '3'],
        correctX: '5'
    },
    {
        matrixA: [['-3', 'x'], ['-2', '3']],
        inverseMatrix: [['-3', '4'], ['-2', '3']],
        options: ['-4', '4', '-3', '-2'],
        correctX: '4'
    },
    {
        matrixA: [['1', '2'], ['x', '7']],
        inverseMatrix: [['7', '-2'], ['-3', '1']],
        options: ['-7', '-3', '3', '7'],
        correctX: '3'
    },
    {
        matrixA: [['2', '-9'], ['1', 'x']],
        inverseMatrix: [['-4', '9'], ['-1', '2']],
        options: ['-4', '3', '-1', '-2'],
        correctX: '-4'
    },
    {
        matrixA: [['-9', '7'], ['-5', 'x']],
        inverseMatrix: [['-4', '7'], ['-5', '9']],
        options: ['-4', '-7', '5', '4'],
        correctX: '4'
    },
    {
        matrixA: [['x', '2'], ['-3', '5']],
        inverseMatrix: [['5', '-2'], ['3', '-1']],
        options: ['1', '-1', '-5', '-2'],
        correctX: '-1'
    },
    {
        matrixA: [['8', '-3'], ['x', '-2']],
        inverseMatrix: [['2', '-3'], ['5', '-8']],
        options: ['2', '-5', '5', '3'],
        correctX: '5'
    },
    {
        matrixA: [['x', '3'], ['7', '-4']],
        inverseMatrix: [['4', '3'], ['7', '5']],
        options: ['5', '-7', '-3', '-5'],
        correctX: '-5'
    },
    {
        matrixA: [['-3', '4'], ['x', '3']],
        inverseMatrix: [['-3', '4'], ['-2', '3']],
        options: ['3', '-4', '2', '-2'],
        correctX: '-2'
    },
    {
        matrixA: [['-4', 'x'], ['-5', '9']],
        inverseMatrix: [['-9', '7'], ['-5', '4']],
        options: ['7', '4', '5', '-7'],
        correctX: '4'
    }
];

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
function checkElements() {
    Object.entries(modals).forEach(([key, modal]) => {
        if (!modal) console.error(`Modal ${key} not found`);
    });
    Object.entries(buttons).forEach(([key, button]) => {
        if (!button) console.error(`Button ${key} not found`);
    });
    if (!overlay) console.error('Overlay not found');
    if (!trainerContent) console.error('trainerContent not found');
    if (!questionNumber) console.error('questionNumber not found');
    if (!trainerQuestion) console.error('trainerQuestion not found');
    if (!matrixDisplay) console.error('matrixDisplay not found');
    if (!answerButtons) console.error('answerButtons not found');
    if (!feedback) console.error('feedback not found');
    if (!completionScreen) console.error('completionScreen not found');
    if (!resetTrainerBtn) console.error('resetTrainerBtn not found');
    if (!completionScreen.querySelector('.completion-emoji')) console.error('completion-emoji not found');
    if (!completionScreen.querySelector('.completion-message h2')) console.error('completion-message h2 not found');
    if (!completionScreen.querySelector('.completion-message p')) console.error('completion-message p not found');
}
checkElements();

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
function openModal(modal) {
    if (!modal) {
        console.error('Modal is undefined or null');
        if (feedback) {
            feedback.textContent = '–ü–æ–º–∏–ª–∫–∞: –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!';
            feedback.className = 'feedback incorrect show';
        }
        return;
    }
    if (!overlay) {
        console.error('Overlay element not found');
        if (feedback) {
            feedback.textContent = '–ü–æ–º–∏–ª–∫–∞: –æ–≤–µ—Ä–ª–µ–π –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!';
            feedback.className = 'feedback incorrect show';
        }
        return;
    }
    console.log('Opening modal:', modal.id);
    overlay.style.display = 'block';
    modal.style.display = 'flex';
    modal.classList.add('show');
    scrollPosition = window.pageYOffset;
    document.body.classList.add('modal-open');
    document.body.style.top = `-${scrollPosition}px`;
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
function closeModal(modal) {
    if (!modal) {
        console.error('Modal is undefined or null');
        return;
    }
    console.log('Closing modal:', modal.id);
    modal.classList.remove('show');
    setTimeout(() => {
        modal.style.display = 'none';
        if (modal.id.includes('videoPlayer')) {
            const iframe = modal.querySelector('iframe');
            if (iframe) iframe.src = iframe.src;
            openModal(modals.video);
        } else {
            overlay.style.display = 'none';
            document.body.classList.remove('modal-open');
            document.body.style.top = '';
            window.scrollTo(0, scrollPosition);
        }
    }, 250);
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ —Ü—ñ–ª–æ–≥–æ —á–∏—Å–ª–∞
function getRandomInt(min = -9, max = 9) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è –º–∞—Å–∏–≤—É
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏–±–æ—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
function selectAnswer(btn) {
    console.log('Answer selected:', btn.innerHTML, { currentQuestion });
    document.querySelectorAll('.answer-btn').forEach(button => {
        button.classList.remove('selected');
    });
    btn.classList.add('selected');
    selectedAnswer = btn;
    submitAnswerBtn.disabled = false;
    submitAnswerBtn.style.pointerEvents = 'auto';
    submitAnswerBtn.style.opacity = '1';
    console.log('Submit button enabled:', {
        disabled: submitAnswerBtn.disabled,
        pointerEvents: submitAnswerBtn.style.pointerEvents,
        opacity: submitAnswerBtn.style.opacity
    });
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É MathJax
function typesetMath(context = 'general', elements = null) {
    if (window.mathJaxReady && typeof MathJax !== 'undefined' && typeof MathJax.typesetPromise === 'function') {
        console.log(`Starting MathJax typeset for ${context}`);
        MathJax.typesetClear(elements || undefined);
        MathJax.typesetPromise(elements || undefined).then(() => {
            console.log(`MathJax typeset complete for ${context}`);
        }).catch(err => {
            console.error(`MathJax typesetting error in ${context}:`, err);
            if (feedback) {
                feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É —Ñ–æ—Ä–º—É–ª–∏. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑!';
                feedback.className = 'feedback incorrect show';
            }
        });
    } else {
        console.warn(`MathJax not ready or typesetPromise unavailable in ${context}`);
        if (feedback) {
            feedback.textContent = 'MathJax –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É!';
            feedback.className = 'feedback incorrect show';
        }
    }
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è MathJax
function waitForMathJax(callback, context = 'general', maxAttempts = 100, interval = 200) {
    let attempts = 0;
    console.log(`Waiting for MathJax in ${context}`);
    const checkMathJax = setInterval(() => {
        if (window.mathJaxReady && typeof MathJax !== 'undefined' && typeof MathJax.typesetPromise === 'function') {
            clearInterval(checkMathJax);
            console.log(`MathJax ready for ${context}, executing callback`);
            callback();
        } else if (attempts >= maxAttempts) {
            clearInterval(checkMathJax);
            console.warn(`MathJax not loaded after ${maxAttempts * interval}ms in ${context}`);
            if (feedback) {
                feedback.textContent = 'MathJax –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É!';
                feedback.className = 'feedback incorrect show';
            }
            callback();
        }
        attempts++;
    }, interval);
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –¥–µ—Ç–µ—Ä–º—ñ–Ω–∞–Ω—Ç–∞ –º–∞—Ç—Ä–∏—Ü—ñ 2x2
function det2x2(matrix) {
    return matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –¥–µ—Ç–µ—Ä–º—ñ–Ω–∞–Ω—Ç–∞ –º–∞—Ç—Ä–∏—Ü—ñ 3x3
function det3x3(matrix) {
    const [a, b, c] = matrix[0];
    const [d, e, f] = matrix[1];
    const [g, h, i] = matrix[2];
    return a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g);
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ 2x2
function inverse2x2(matrix) {
    const det = det2x2(matrix);
    if (det === 0) return null;
    return [
        [matrix[1][1] / det, -matrix[0][1] / det],
        [-matrix[1][0] / det, matrix[0][0] / det]
    ];
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –º–∞—Ç—Ä–∏—Ü—è –º—ñ—Å—Ç–∏—Ç—å —Ü—ñ–ª—ñ —á–∏—Å–ª–∞ –≤—ñ–¥ -9 –¥–æ 9
function isValidMatrix(matrix) {
    return matrix.every(row =>
        row.every(val => Number.isInteger(val) && val >= -9 && val <= 9)
    );
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –º–∞—Ç—Ä–∏—Ü—ñ 2x2 —ñ–∑ –¥–µ—Ç–µ—Ä–º—ñ–Ω–∞–Ω—Ç–æ–º ¬±1
function generateMatrix2x2WithDetOne() {
    let matrix, det;
    let attempts = 0;
    const maxAttempts = 100;
    do {
        matrix = Array.from({ length: 2 }, () =>
            Array.from({ length: 2 }, () => getRandomInt(-9, 9))
        );
        det = det2x2(matrix);
        attempts++;
        if (attempts >= maxAttempts) {
            console.warn('Failed to generate matrix with det ¬±1 after', maxAttempts, 'attempts');
            return null;
        }
    } while (det !== 1 && det !== -1);
    console.log('Generated 2x2 matrix with det ¬±1', { matrix, det });
    return matrix;
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –º–∞—Ç—Ä–∏—Ü—ñ 2x2 —ñ–∑ –∑–∞–¥–∞–Ω–∏–º –¥–µ—Ç–µ—Ä–º—ñ–Ω–∞–Ω—Ç–æ–º (–Ω—É–ª—å–æ–≤–∏–π —á–∏ –Ω–µ–Ω—É–ª—å–æ–≤–∏–π)
function generateMatrix2x2(isZeroDeterminant) {
    let matrix;
    if (isZeroDeterminant) {
        const row1 = [getRandomInt(-9, 9), getRandomInt(-9, 9)];
        const k = getRandomInt(-9, 9) || 1;
        const row2 = [row1[0] * k, row1[1] * k];
        matrix = [row1, row2];
        const det = det2x2(matrix);
        if (det !== 0) {
            console.warn('Failed to generate zero determinant for 2x2, retrying', { det });
            return generateMatrix2x2(true);
        }
    } else {
        do {
            matrix = Array.from({ length: 2 }, () =>
                Array.from({ length: 2 }, () => getRandomInt(-9, 9))
            );
        } while (det2x2(matrix) === 0);
    }
    console.log('Generated 2x2 matrix', { matrix, det: det2x2(matrix) });
    return matrix;
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –º–∞—Ç—Ä–∏—Ü—ñ 3x3 —ñ–∑ –∑–∞–¥–∞–Ω–∏–º –¥–µ—Ç–µ—Ä–º—ñ–Ω–∞–Ω—Ç–æ–º (–Ω—É–ª—å–æ–≤–∏–π —á–∏ –Ω–µ–Ω—É–ª—å–æ–≤–∏–π)
function generateMatrix3x3(isZeroDeterminant) {
    let matrix;
    if (isZeroDeterminant) {
        const row1 = [getRandomInt(-7, 7), getRandomInt(-7, 7), getRandomInt(-7, 7)];
        const row2 = [getRandomInt(-7, 7), getRandomInt(-7, 7), getRandomInt(-7, 7)];
        const k = getRandomInt(-7, 7) || 1;
        const row3 = row1.map((val, i) => val * k);
        matrix = [row1, row2, row3];
        const det = det3x3(matrix);
        if (det !== 0) {
            console.warn('Failed to generate zero determinant for 3x3, retrying', { det });
            return generateMatrix3x3(true);
        }
    } else {
        do {
            matrix = Array.from({ length: 3 }, () =>
                Array.from({ length: 3 }, () => getRandomInt(-7, 7))
            );
        } while (det3x3(matrix) === 0);
    }
    console.log('Generated 3x3 matrix', { matrix, det: det3x3(matrix) });
    return matrix;
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 1: –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ (2x2)
function generateQuestion1() {
    try {
        console.log('Generating question 1', { currentQuestion });
        const isZeroDeterminant = Math.random() < 0.5;
        const matrix = generateMatrix2x2(isZeroDeterminant);
        const det = det2x2(matrix);
        const correctAnswer = det !== 0 ? '–Ü—Å–Ω—É—î' : '–ù–µ —ñ—Å–Ω—É—î';
        correctAnswerLatex = correctAnswer;
        const answerOptions = [
            { text: '–Ü—Å–Ω—É—î', correct: det !== 0 },
            { text: '–ù–µ —ñ—Å–Ω—É—î', correct: det === 0 },
            { text: '–ù–µ –º–æ–∂–ª–∏–≤–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏', correct: false }
        ];
        const shuffledOptions = shuffleArray(answerOptions);
        const matrixLatex = `\\begin{pmatrix} ${matrix.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`;
        questionNumber.textContent = '–ü–∏—Ç–∞–Ω–Ω—è 1';
        trainerQuestion.innerHTML = '<div class="math-notation">–ß–∏ —ñ—Å–Ω—É—î –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –¥–ª—è:</div>';
        matrixDisplay.innerHTML = `<div style="display: block;" id="matrix-${Date.now()}">\\[${matrixLatex}\\]</div>`;
        answerButtons.innerHTML = '';
        shuffledOptions.forEach((option) => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = option.text;
            btn.dataset.correct = option.correct.toString();
            btn.dataset.option = option.text;
            btn.addEventListener('click', () => selectAnswer(btn));
            answerButtons.appendChild(btn);
        });
        submitAnswerBtn.disabled = true;
        submitAnswerBtn.style.pointerEvents = 'none';
        submitAnswerBtn.style.opacity = '0.6';
        selectedAnswer = null;
        feedback.textContent = '';
        feedback.className = 'feedback';
        completionScreen.classList.add('hidden');
        trainerContent.style.display = 'block';
        console.log('Question 1 generated', { matrix, det, correctAnswer });
        waitForMathJax(() => typesetMath('trainer question 1', [trainerQuestion, matrixDisplay]), 'trainer question 1');
    } catch (err) {
        console.error('Error in generateQuestion1:', err);
        feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑!';
        feedback.className = 'feedback incorrect show';
    }
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 2: –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ (3x3)
function generateQuestion2() {
    try {
        console.log('Generating question 2', { currentQuestion });
        const isZeroDeterminant = Math.random() < 0.5;
        const matrix = generateMatrix3x3(isZeroDeterminant);
        const det = det3x3(matrix);
        const correctAnswer = det !== 0 ? '–Ü—Å–Ω—É—î' : '–ù–µ —ñ—Å–Ω—É—î';
        correctAnswerLatex = correctAnswer;
        const answerOptions = [
            { text: '–Ü—Å–Ω—É—î', correct: det !== 0 },
            { text: '–ù–µ —ñ—Å–Ω—É—î', correct: det === 0 },
            { text: '–ù–µ –º–æ–∂–ª–∏–≤–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏', correct: false }
        ];
        const shuffledOptions = shuffleArray(answerOptions);
        const matrixLatex = `\\begin{pmatrix} ${matrix.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`;
        questionNumber.textContent = '–ü–∏—Ç–∞–Ω–Ω—è 2';
        trainerQuestion.innerHTML = '<div class="math-notation">–ß–∏ —ñ—Å–Ω—É—î –æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –¥–ª—è:</div>';
        matrixDisplay.innerHTML = `<div style="display: block;" id="matrix-${Date.now()}">\\[${matrixLatex}\\]</div>`;
        answerButtons.innerHTML = '';
        shuffledOptions.forEach((option) => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = option.text;
            btn.dataset.correct = option.correct.toString();
            btn.dataset.option = option.text;
            btn.addEventListener('click', () => selectAnswer(btn));
            answerButtons.appendChild(btn);
        });
        submitAnswerBtn.disabled = true;
        submitAnswerBtn.style.pointerEvents = 'none';
        submitAnswerBtn.style.opacity = '0.6';
        selectedAnswer = null;
        feedback.textContent = '';
        feedback.className = 'feedback';
        completionScreen.classList.add('hidden');
        trainerContent.style.display = 'block';
        console.log('Question 2 generated', { matrix, det, correctAnswer });
        waitForMathJax(() => typesetMath('trainer question 2', [trainerQuestion, matrixDisplay]), 'trainer question 2');
    } catch (err) {
        console.error('Error in generateQuestion2:', err);
        feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑!';
        feedback.className = 'feedback incorrect show';
    }
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 3: –∑–Ω–∞–π—Ç–∏ x, –ø—Ä–∏ —è–∫–æ–º—É A –º–∞—î –∑–∞–¥–∞–Ω—É –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é
function generateQuestion3() {
    console.log('Generating question 3', { currentQuestion });
    try {
        const example = question3Examples[Math.floor(Math.random() * question3Examples.length)];
        const { matrixA, inverseMatrix, options, correctX } = example;
        correctAnswerLatex = correctX;
        const matrixALatex = `\\begin{pmatrix} ${matrixA.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`;
        const inverseLatex = `\\begin{pmatrix} ${inverseMatrix.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`;
        questionNumber.textContent = '–ü–∏—Ç–∞–Ω–Ω—è 3';
        trainerQuestion.innerHTML = `<div class="math-notation">–ó–Ω–∞–π–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è \\( x \\), –ø—Ä–∏ —è–∫–æ–º—É –º–∞—Ç—Ä–∏—Ü—è \\( A \\) –º–∞—î –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é \\( A^{-1} \\):</div>`;
        matrixDisplay.innerHTML = `<div style="display: block;" id="matrix-${Date.now()}">\\[ A = ${matrixALatex}, \\quad A^{-1} = ${inverseLatex} \\]</div>`;
        answerButtons.innerHTML = '';
        const shuffledOptions = shuffleArray([...options]).map(x => ({
            text: `${x}`,
            correct: x === correctX
        }));
        shuffledOptions.forEach((option) => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = option.text;
            btn.dataset.correct = option.correct.toString();
            btn.dataset.option = option.text;
            btn.addEventListener('click', () => selectAnswer(btn));
            answerButtons.appendChild(btn);
        });
        submitAnswerBtn.disabled = true;
        submitAnswerBtn.style.pointerEvents = 'none';
        submitAnswerBtn.style.opacity = '0.6';
        selectedAnswer = null;
        feedback.textContent = '';
        feedback.className = 'feedback';
        completionScreen.classList.add('hidden');
        trainerContent.style.display = 'block';
        console.log('Question 3 successfully generated', { correctX, matrixA, inverseMatrix });
        waitForMathJax(() => typesetMath('trainer question 3', [trainerQuestion, matrixDisplay]), 'trainer question 3');
    } catch (err) {
        console.error('Error in generateQuestion3:', err);
        feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 3. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —Å–ø—Ä–æ–±—É!';
        feedback.className = 'feedback incorrect show';
        setTimeout(() => {
            feedback.textContent = '';
            feedback.className = 'feedback';
            generateQuestion3();
        }, 2000);
    }
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 4: –∑–Ω–∞–π—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é –¥–ª—è A –∑ –¥–µ—Ç–µ—Ä–º—ñ–Ω–∞–Ω—Ç–æ–º ¬±1
function generateQuestion4() {
    console.log('Generating question 4', { currentQuestion });
    try {
        const matrixA = generateMatrix2x2WithDetOne();
        if (!matrixA) {
            console.warn('Failed to generate valid matrix A for question 4');
            feedback.textContent = '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è 4. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —Å–ø—Ä–æ–±—É!';
            feedback.className = 'feedback incorrect show';
            setTimeout(() => {
                feedback.textContent = '';
                feedback.className = 'feedback';
                generateQuestion4();
            }, 2000);
            return;
        }
        const det = det2x2(matrixA);
        const inverseMatrix = [
            [matrixA[1][1] / det, -matrixA[0][1] / det],
            [-matrixA[1][0] / det, matrixA[0][0] / det]
        ].map(row => row.map(val => Math.round(val * 1000000) / 1000000)); // –£–Ω–∏–∫–∞—î–º–æ –¥—Ä–æ–±—ñ–≤
        if (!isValidMatrix(inverseMatrix)) {
            console.warn('Inverse matrix has invalid elements', { inverseMatrix });
            feedback.textContent = '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è 4. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —Å–ø—Ä–æ–±—É!';
            feedback.className = 'feedback incorrect show';
            setTimeout(() => {
                feedback.textContent = '';
                feedback.className = 'feedback';
                generateQuestion4();
            }, 2000);
            return;
        }

        const correctAnswer = inverseMatrix.map(row => row.map(val => Math.round(val))); // –¶—ñ–ª—ñ —á–∏—Å–ª–∞
        const wrongSign = correctAnswer.map(row => row.map(val => -val));
        const wrongColumns = [
            [correctAnswer[0][1], correctAnswer[0][0]],
            [correctAnswer[1][1], correctAnswer[1][0]]
        ];
        const wrongRows = [
            correctAnswer[1],
            correctAnswer[0]
        ];
        const answerOptions = [
            { matrix: correctAnswer, latex: `A^{-1} = \\begin{pmatrix} ${correctAnswer.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`, correct: true },
            { matrix: wrongSign, latex: `A^{-1} = \\begin{pmatrix} ${wrongSign.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`, correct: false },
            { matrix: wrongColumns, latex: `A^{-1} = \\begin{pmatrix} ${wrongColumns.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`, correct: false },
            { matrix: wrongRows, latex: `A^{-1} = \\begin{pmatrix} ${wrongRows.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`, correct: false }
        ];
        const shuffledOptions = shuffleArray(answerOptions);
        correctAnswerLatex = answerOptions[0].latex;

        const matrixALatex = `\\begin{pmatrix} ${matrixA.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`;
        questionNumber.textContent = '–ü–∏—Ç–∞–Ω–Ω—è 4';
        trainerQuestion.innerHTML = `<div class="math-notation">–ó–Ω–∞–π–¥—ñ—Ç—å –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é \\( A^{-1} \\) –¥–æ –º–∞—Ç—Ä–∏—Ü—ñ \\( A \\):</div>`;
        matrixDisplay.innerHTML = `<div style="display: block;" id="matrix-${Date.now()}">\\[ A = ${matrixALatex} \\]</div>`;
        answerButtons.innerHTML = '';
        shuffledOptions.forEach((option) => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.innerHTML = `<div class="math-notation">\\[${option.latex}\\]</div>`;
            btn.dataset.correct = option.correct.toString();
            btn.dataset.option = option.latex;
            btn.addEventListener('click', () => selectAnswer(btn));
            answerButtons.appendChild(btn);
        });
        submitAnswerBtn.disabled = true;
        submitAnswerBtn.style.pointerEvents = 'none';
        submitAnswerBtn.style.opacity = '0.6';
        selectedAnswer = null;
        feedback.textContent = '';
        feedback.className = 'feedback';
        completionScreen.classList.add('hidden');
        trainerContent.style.display = 'block';
        console.log('Question 4 successfully generated', { matrixA, inverseMatrix, det });
        waitForMathJax(() => typesetMath('trainer question 4', [trainerQuestion, matrixDisplay, answerButtons]), 'trainer question 4');
    } catch (err) {
        console.error('Error in generateQuestion4:', err);
        feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 4. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —Å–ø—Ä–æ–±—É!';
        feedback.className = 'feedback incorrect show';
        setTimeout(() => {
            feedback.textContent = '';
            feedback.className = 'feedback';
            generateQuestion4();
        }, 2000);
    }
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 5: –∑–Ω–∞–π—Ç–∏ –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é –¥–ª—è A 3x3 –∑ –¥–µ—Ç–µ—Ä–º—ñ–Ω–∞–Ω—Ç–æ–º ¬±1
function generateQuestion5() {
    console.log('Generating question 5', { currentQuestion });
    try {
        const example = predefinedMatricesQ5[Math.floor(Math.random() * predefinedMatricesQ5.length)];
        const { matrix, answers } = example;
        correctAnswerLatex = answers.find(ans => ans.correct).latex;

        const matrixALatex = `\\begin{pmatrix} ${matrix.map(row => row.join(' & ')).join(' \\\\ ')} \\end{pmatrix}`;
        questionNumber.textContent = '–ü–∏—Ç–∞–Ω–Ω—è 5';
        trainerQuestion.innerHTML = `<div class="math-notation">–ó–Ω–∞–π–¥—ñ—Ç—å –æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é \\( A^{-1} \\) –¥–æ –º–∞—Ç—Ä–∏—Ü—ñ \\( A \\):</div>`;
        matrixDisplay.innerHTML = `<div style="display: block;" id="matrix-${Date.now()}">\\[ A = ${matrixALatex} \\]</div>`;
        answerButtons.innerHTML = '';

        const shuffledOptions = shuffleArray([...answers]);
        shuffledOptions.forEach((option) => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.innerHTML = `<div class="math-notation">\\[${option.latex}\\]</div>`;
            btn.dataset.correct = option.correct.toString();
            btn.dataset.option = option.latex;
            btn.addEventListener('click', () => selectAnswer(btn));
            answerButtons.appendChild(btn);
        });

        submitAnswerBtn.disabled = true;
        submitAnswerBtn.style.pointerEvents = 'none';
        submitAnswerBtn.style.opacity = '0.6';
        selectedAnswer = null;
        feedback.textContent = '';
        feedback.className = 'feedback';
        completionScreen.classList.add('hidden');
        trainerContent.style.display = 'block';
        console.log('Question 5 successfully generated', { matrix, correctAnswer: correctAnswerLatex });
        waitForMathJax(() => typesetMath('trainer question 5', [trainerQuestion, matrixDisplay, answerButtons]), 'trainer question 5');
    } catch (err) {
        console.error('Error in generateQuestion5:', err);
        feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è 5. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —Å–ø—Ä–æ–±—É!';
        feedback.className = 'feedback incorrect show';
        setTimeout(() => {
            feedback.textContent = '';
            feedback.className = 'feedback';
            generateQuestion5();
        }, 2000);
    }
}

// –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏"
buttons.submitAnswer.addEventListener('click', () => {
    console.log('Submit answer clicked', {
        currentQuestion,
        selectedAnswer: selectedAnswer ? selectedAnswer.dataset.option : null,
        datasetCorrect: selectedAnswer ? selectedAnswer.dataset.correct : null
    });

    if (!selectedAnswer) {
        feedback.textContent = '–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å!';
        feedback.className = 'feedback incorrect show';
        setTimeout(() => {
            feedback.className = 'feedback';
            feedback.textContent = '';
        }, 2000);
        return;
    }

    const isCorrect = selectedAnswer.dataset.correct === 'true';
    console.log('Answer evaluation', {
        isCorrect,
        selectedLatex: selectedAnswer.dataset.option,
        correctLatex: correctAnswerLatex
    });

    document.querySelectorAll('.answer-btn').forEach(btn => {
        if (btn.dataset.correct === 'true') {
            btn.classList.add('correct');
        } else if (btn === selectedAnswer) {
            btn.classList.add('incorrect');
        }
        btn.disabled = true;
        btn.style.pointerEvents = 'none';
    });

    feedback.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' : `‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!`;
    feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'} show`;
    submitAnswerBtn.disabled = true;
    submitAnswerBtn.style.pointerEvents = 'none';
    submitAnswerBtn.style.opacity = '0.6';

    setTimeout(() => {
        feedback.className = 'feedback';
        feedback.textContent = '';
        document.querySelectorAll('.answer-btn').forEach(btn => {
            btn.disabled = false;
            btn.classList.remove('selected', 'correct', 'incorrect');
            btn.style.pointerEvents = 'auto';
            btn.style.background = '#3b4a5a';
            btn.style.border = '1.5px solid #a855f7';
        });

        matrixDisplay.innerHTML = '';
        answerButtons.innerHTML = '';
        trainerQuestion.textContent = '';
        questionNumber.textContent = '';

        if (isCorrect) {
            incorrectAttempts = 0;
            currentXPosition = null;
            console.log(`Correct answer, advancing from question ${currentQuestion}`);
            try {
                if (currentQuestion === 1) {
                    currentQuestion = 2;
                    console.log('Moving to question 2');
                    generateQuestion2();
                } else if (currentQuestion === 2) {
                    currentQuestion = 3;
                    console.log('Moving to question 3');
                    generateQuestion3();
                } else if (currentQuestion === 3) {
                    currentQuestion = 4;
                    console.log('Moving to question 4');
                    generateQuestion4();
                } else if (currentQuestion === 4) {
                    currentQuestion = 5;
                    console.log('Moving to question 5');
                    generateQuestion5();
                } else if (currentQuestion === 5) {
                    console.log('Showing completion screen');
                    trainerContent.style.display = 'none';
                    completionScreen.classList.remove('hidden');
                    const emoji = completionScreen.querySelector('.completion-emoji');
                    const heading = completionScreen.querySelector('.completion-message h2');
                    const paragraph = completionScreen.querySelector('.completion-message p');
                    if (emoji && heading && paragraph) {
                        heading.textContent = '–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!';
                        paragraph.textContent = '–ú–æ–ª–æ–¥–µ—Ü—å!';
                        console.log('Completion screen updated', {
                            heading: heading.textContent,
                            paragraph: paragraph.textContent
                        });
                    } else {
                        console.error('Completion screen elements missing', { emoji, heading, paragraph });
                    }
                    completionScreen.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    resetTrainerBtn.focus();
                } else {
                    console.error('Invalid currentQuestion value:', currentQuestion);
                    feedback.textContent = '–ü–æ–º–∏–ª–∫–∞: –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä –ø–∏—Ç–∞–Ω–Ω—è. –ü–æ—á–∏–Ω–∞—î–º–æ –∑–∞–Ω–æ–≤–æ!';
                    feedback.className = 'feedback incorrect show';
                    currentQuestion = 1;
                    generateQuestion1();
                }
            } catch (err) {
                console.error('Error during question transition:', err);
                feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —Å–ø—Ä–æ–±—É!';
                feedback.className = 'feedback incorrect show';
                setTimeout(() => {
                    feedback.textContent = '';
                    feedback.className = 'feedback';
                    if (currentQuestion === 5) generateQuestion5();
                    else if (currentQuestion === 4) generateQuestion4();
                    else if (currentQuestion === 3) generateQuestion3();
                    else generateQuestion2();
                }, 2000);
            }
        } else {
            incorrectAttempts++;
            console.log('Incorrect attempts:', incorrectAttempts, { currentQuestion });
            try {
                if (currentQuestion === 1) {
                    console.log('Regenerating question 1');
                    generateQuestion1();
                } else if (currentQuestion === 2) {
                    console.log('Regenerating question 2');
                    generateQuestion2();
                } else if (currentQuestion === 3) {
                    console.log('Regenerating question 3');
                    generateQuestion3();
                } else if (currentQuestion === 4) {
                    console.log('Regenerating question 4');
                    generateQuestion4();
                } else if (currentQuestion === 5) {
                    console.log('Regenerating question 5');
                    generateQuestion5();
                } else {
                    console.error('Invalid currentQuestion value on incorrect answer:', currentQuestion);
                    feedback.textContent = '–ü–æ–º–∏–ª–∫–∞: –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä –ø–∏—Ç–∞–Ω–Ω—è. –ü–æ—á–∏–Ω–∞—î–º–æ –∑–∞–Ω–æ–≤–æ!';
                    feedback.className = 'feedback incorrect show';
                    currentQuestion = 1;
                    generateQuestion1();
                }
            } catch (err) {
                console.error('Error regenerating question:', err);
                feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω–Ω—è. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —Å–ø—Ä–æ–±—É!';
                feedback.className = 'feedback incorrect show';
                setTimeout(() => {
                    feedback.textContent = '';
                    feedback.className = 'feedback';
                    if (currentQuestion === 5) generateQuestion5();
                    else if (currentQuestion === 4) generateQuestion4();
                    else if (currentQuestion === 3) generateQuestion3();
                    else generateQuestion2();
                }, 2000);
            }
        }
    }, 2000);
});

// –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑"
resetTrainerBtn.addEventListener('click', () => {
    console.log('Reset trainer clicked');
    currentQuestion = 1;
    incorrectAttempts = 0;
    currentXPosition = null;
    completionScreen.classList.add('hidden');
    trainerContent.style.display = 'block';
    matrixDisplay.innerHTML = '';
    answerButtons.innerHTML = '';
    trainerQuestion.textContent = '';
    questionNumber.textContent = '';
    feedback.textContent = '';
    feedback.className = 'feedback';
    generateQuestion1();
});

// –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω
buttons.openTheory.addEventListener('click', () => {
    console.log('Open theory button clicked');
    openModal(modals.theory);
});

buttons.openVideo.addEventListener('click', () => {
    console.log('Open video button clicked');
    openModal(modals.video);
});

buttons.openQuestions.addEventListener('click', () => {
    console.log('Open questions button clicked');
    openModal(modals.questions);
});

buttons.openTrainer.addEventListener('click', () => {
    console.log('Open trainer clicked');
    if (!modals.trainer || !overlay) {
        console.error('Trainer modal or overlay not found');
        feedback.textContent = '–ü–æ–º–∏–ª–∫–∞: –º–æ–¥–∞–ª—å —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞ –∞–±–æ –æ–≤–µ—Ä–ª–µ–π –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!';
        feedback.className = 'feedback incorrect show';
        return;
    }
    currentQuestion = 1;
    incorrectAttempts = 0;
    currentXPosition = null;
    completionScreen.classList.add('hidden');
    trainerContent.style.display = 'block';
    matrixDisplay.innerHTML = '';
    answerButtons.innerHTML = '';
    trainerQuestion.textContent = '';
    questionNumber.textContent = '';
    feedback.textContent = '';
    feedback.className = 'feedback';
    openModal(modals.trainer);
    try {
        generateQuestion1();
    } catch (err) {
        console.error('Error initializing trainer:', err);
        feedback.textContent = '–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞!';
        feedback.className = 'feedback incorrect show';
    }
});

// –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è
Object.values(buttons).forEach(button => {
    if (button && button.id.includes('close')) {
        const modalId = button.id.replace('close', '').toLowerCase();
        const modalKey = modalId.includes('videoplayer') ? `videoPlayer${modalId.slice(-1)}` : modalId.replace('btn', '');
        console.log('Setting up close button for:', modalKey);
        button.addEventListener('click', () => closeModal(modals[modalKey]));
    }
});

// –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
overlay.addEventListener('click', () => {
    Object.values(modals).forEach(modal => {
        if (modal && modal.classList.contains('show')) {
            console.log('Overlay clicked, closing modal:', modal.id);
            closeModal(modal);
        }
    });
});

// –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–∞—Ä—Ç–æ–∫ –≤—ñ–¥–µ–æ
document.querySelectorAll('.video-card').forEach(card => {
    card.addEventListener('click', () => {
        const videoId = card.dataset.video;
        console.log('Video card clicked:', videoId);
        closeModal(modals.video);
        openModal(modals[`videoPlayer${videoId}`]);
    });
});

// –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è —Ñ–ª–µ—à-–∫–∞—Ä—Ç–æ–∫
document.querySelectorAll('.question-card .card-inner').forEach(card => {
    card.addEventListener('click', () => {
        console.log('Flipping card');
        card.classList.toggle('flipped');
    });
});

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ MathJax –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
window.addEventListener('load', () => {
    console.log('MathJax loaded:', typeof MathJax !== 'undefined' && typeof MathJax.typesetPromise === 'function');
    if (!window.mathJaxReady || typeof MathJax === 'undefined') {
        console.warn('MathJax not initialized after page load');
        feedback.textContent = 'MathJax –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É!';
        feedback.className = 'feedback incorrect show';
    }
});

// –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ Escape
document.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
        Object.values(modals).forEach(modal => {
            if (modal && modal.classList.contains('show')) {
                console.log('Escape key pressed, closing modal:', modal.id);
                closeModal(modal);
            }
        });
    }
});
</script>
</body>
</html>




