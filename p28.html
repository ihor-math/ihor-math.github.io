<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>28. –õ—ñ–Ω—ñ–π–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --base-font-size: 16px;
            --text-color: #F5F5F5;
            --math-color: #FFD700;
            --accent-color: #ffa500;
            --bg-gradient: linear-gradient(135deg, #2E5C5A, #4A7C59);
            --bg-hover: linear-gradient(135deg, #5D9A86, #F4A261);
            --card-bg: #3A6F65;
            --success-color: #90EE90;
            --error-color: #FFB6C1;
        }
        *, *:before, *:after {
            box-sizing: border-box;
        }
      body {
    margin: 0;
    padding: 0;
    background: var(--bg-gradient);
    font-family: 'Roboto', sans-serif;
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: start;
    min-height: 100dvh;
    font-size: 1rem;
}
.title-box {
    margin-top: 60px;
    padding: 25px 40px;
    background: var(--bg-gradient);
    border-radius: 25px;
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2);
    max-width: 90%;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
}
.title-box h1 {
    margin: 0;
    font-size: 1.75rem;
    color: var(--text-color);
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    font-family: 'Lora', serif;
}
.section-container {
    margin-top: 40px;
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    justify-content: center;
}
.section {
    width: 250px;
    height: 220px;
    background: var(--card-bg);
    border-radius: 20px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 20px;
    transition: transform 0.3s ease;
    cursor: pointer;
    text-decoration: none;
    color: var(--text-color);
    border: 1px solid rgba(255, 255, 255, 0.3);
}
.section:hover {
    transform: translateY(-5px);
    background: var(--bg-hover);
}
.section img {
    width: 60px;
    height: 60px;
    margin-bottom: 15px;
    object-fit: cover;
    border-radius: 8px;
    filter: brightness(1.2);
}
.section h2 {
    font-size: 1.25rem;
    color: var(--text-color);
    margin: 0;
    font-family: 'Lora', serif;
}
.navigation-buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
    margin: 40px auto;
    max-width: 1000px;
    padding: 0 20px;
}
.nav-button {
    display: flex;
    align-items: center;
    background: var(--card-bg);
    color: var(--text-color);
    text-decoration: none;
    padding: 12px 24px;
    border-radius: 12px;
    font-size: 1.125rem;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);
    border: 2px solid var(--text-color);
    line-height: 1.2;
}
.nav-button:hover {
    background: var(--bg-hover);
    color: var(--text-color);
    transform: scale(1.05);
}
.nav-button svg {
    margin-right: 8px;
    fill: currentColor;
    width: 20px;
    height: 20px;
}
.modal {
    display: none;
    position: fixed;
    top: 5%;
    left: 5%;
    width: 90%;
    height: 90%;
    background: var(--card-bg);
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    overflow: hidden;
    flex-direction: column;
}
.modal-content {
    padding: 20px;
    overflow-y: auto;
    flex-grow: 1;
    background: var(--card-bg);
    border-radius: 10px;
    margin: 10px;
    width: 100%;
    color: var(--text-color);
}
.modal-header {
    display: flex;
    justify-content: flex-end;
    background: var(--bg-gradient);
    padding: 8px 10px;
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;
}
.close-btn {
    background: var(--text-color);
    color: #2E5C5A;
    border: none;
    border-radius: 6px;
    padding: 5px 15px;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s ease;
}
.close-btn:hover {
    background: var(--accent-color);
}
#modalOverlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
}
.tab-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
}
.tab-button {
    background: var(--bg-gradient);
    color: var(--text-color);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    padding: 10px 20px;
    font-family: 'Lora', serif;
    font-size: 1.125rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
    position: relative;
}
.tab-button::after {
    content: '‚ñ∂';
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1rem;
    color: var(--text-color);
    transition: transform 0.3s ease;
}
.tab-button.active::after {
    content: '‚ñº';
    transform: translateY(-50%);
}
.tab-button.active {
    background: var(--bg-hover);
    color: var(--accent-color);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}
.tab-button:hover {
    background: var(--bg-hover);
    transform: translateY(-2px);
}
.tab-content {
    display: none;
    padding: 20px;
    border-radius: 10px;
    background: var(--card-bg);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.4);
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    width: 100%;
    box-sizing: border-box;
}
.tab-content.active {
    display: block;
    max-height: none;
    overflow-y: auto;
}
#theoryModal .modal-content p {
    text-align: justify;
    color: var(--text-color);
    font-size: 1.125rem;
    line-height: 1.6;
    white-space: normal;
}
#theoryModal .modal-content h3 {
    font-family: 'Lora', serif;
    font-size: 1.5rem;
    color: var(--accent-color);
    margin-bottom: 15px;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}
#theoryModal .modal-content .example-title {
    color: var(--accent-color);
    font-weight: bold;
    font-size: 1.25rem;
    margin-bottom: 10px;
}
#theoryModal .modal-content .example-solution {
    color: var(--accent-color);
    font-weight: bold;
    font-size: 1.125rem;
    text-align: left;
    margin: 15px 0;
}
#theoryModal .modal-content li {
    color: var(--text-color);
    padding-left: 20px;
    margin-left: 10px;
    max-width: calc(100% - 30px);
    white-space: normal;
    text-align: justify;
    position: relative;
    font-size: 1.125rem;
}
.MathJax, mjx-container, mjx-math, mjx-mrow {
    color: var(--math-color) !important;
    font-size: 1.3rem !important;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}
mjx-msub {
    font-size: 1.1em !important;
}
mjx-container[jax="CHTML"][display="true"] {
    display: block !important;
    text-align: center !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    white-space: nowrap;
    max-width: 100%;
    margin: 0 auto !important;
    padding: 5px;
    -webkit-overflow-scrolling: touch;
}
.flashcard-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-top: 20px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}
.flashcard {
    perspective: 1000px;
    width: 100%;
    height: 200px;
    cursor: pointer;
    outline: none;
}
.flashcard-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    border-radius: 15px;
}
.flashcard.flipped .flashcard-inner {
    transform: rotateY(180deg);
}
.flashcard-front, .flashcard-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    border-radius: 15px;
    box-sizing: border-box;
    background: #4f7942;
    color: var(--text-color);
}
.flashcard-back {
    transform: rotateY(180deg);
    background: #40826d;
    color: var(--text-color);
    text-align: justify;
}
.flashcard-front p, .flashcard-back p {
    font-size: 1.4rem;
    margin: 0;
    font-family: 'Lora', serif;
    line-height: 1.5;
    text-align: center;
}
.flashcard-back p {
    font-family: 'Roboto', sans-serif;
    font-size: 1.4rem;
    line-height: 1.6;
    text-align: left;
    white-space: normal;
}
.flashcard-back ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
}
.flashcard-back li {
    color: var(--accent-color);
    margin: 5px 0;
    font-size: 1.125rem;
    text-align: left;
}
.trainer-container {
    width: 95%;
    max-width: 900px;
    padding: 4vw 5vw;
    text-align: center;
    background: linear-gradient(135deg, #2e4c5a, #4c6b7a);
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(163, 166, 139, 0.3);
    box-sizing: border-box;
    margin: auto;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(163, 166, 139, 0.5) transparent;
}
.question-circle {
    width: clamp(80px, 15vw, 120px);
    height: clamp(80px, 15vw, 120px);
    margin: 0 auto 3vw;
    border-radius: 50%;
    background: var(--bg-gradient, #FF8C00);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    display: flex;
    justify-content: center;
    align-items: center;
}
.question-circle h3 {
    font-family: 'Lora', serif;
    font-size: clamp(1.0rem, 2.8vw, 1.2rem);
    color: var(--math-color, white);
    margin: 0;
    padding: 0;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    text-align: center;
    line-height: 1;
}
#questionText {
    font-family: 'Lora', serif;
    font-size: 1.125rem;
    color: var(--text-color, black);
    line-height: 1.6;
    margin: 10px 0;
    text-align: center;
}
#questionText .MathJax, #questionText mjx-container, #questionText mjx-math, #questionText mjx-mrow {
    color: var(--math-color, black) !important;
    font-size: 1.3rem !important;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}
#matrixText {
    margin: 40px 0;
    text-align: center;
}
#matrixText img, #vectorCanvas {
    max-width: 300px;
    max-height: 350px;
    display: block;
    margin: 0 auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}
#vectorCanvas {
    overflow: hidden;
}
.vectorCanvasWrapper {
    position: relative;
    width: 300px;
    height: 300px;
    margin: 0 auto;
    overflow: hidden;
}
.answer-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin: 30px 0;
    justify-items: center;
    width: 100%;
    max-width: 900px;
}
.answer-button {
    background: var(--bg-gradient, white);
    color: var(--text-color, black);
    border: 2px solid var(--accent-color, #FF8C00);
    border-radius: 8px;
    padding: 15px 30px;
    font-family: 'Roboto', sans-serif;
    font-size: 1.5rem;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease;
    width: 100%;
    max-width: 300px;
    text-align: center;
    margin: 5px;
    box-sizing: border-box;
}
.answer-button:hover:not(:disabled) {
    background: var(--bg-hover, rgba(255, 140, 0, 0.1));
    transform: scale(1.02);
}
.answer-button.selected {
    background: var(--accent-color, #FF8C00);
    color: #2E5C5A;
}
.answer-button.correct {
    background: var(--success-color, rgba(0, 128, 0, 0.2));
    color: #2E5C5A;
}
.answer-button.wrong {
    background: var(--error-color, rgba(255, 0, 0, 0.2));
    color: #2E5C5A;
}
.answer-button:disabled {
    background: #7F8C8D;
    cursor: not-allowed;
}
.answer-button .MathJax, .answer-button mjx-container, .answer-button mjx-math, .answer-button mjx-mrow {
    color: var(--math-color, black) !important;
    font-size: 1.3rem !important;
}
#submitAnswerBtn {
    background: #7F8C8D;
    color: var(--text-color, white);
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-family: 'Roboto', sans-serif;
    font-size: 1rem;
    cursor: not-allowed;
    transition: background 0.3s ease;
    margin: 10px auto;
    display: block;
}
#submitAnswerBtn.active {
    background: var(--accent-color, #FF8C00);
    color: #2E5C5A;
    cursor: pointer;
}
#submitAnswerBtn.active:hover {
    background: var(--bg-hover, rgba(255, 140, 0, 0.8));
}
.result-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5rem;
    font-family: 'Lora', serif;
    font-weight: bold;
    text-align: center;
    padding: 20px 40px;
    border-radius: 12px;
    min-width: 300px;
    background: var(--card-bg, white);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: 1001;
    display: none;
}
.result-message.correct {
    color: #2E5C5A;
    background: var(--success-color, rgba(0, 128, 0, 0.2));
    opacity: 1;
}
.result-message.wrong {
    color: #2E5C5A;
    background: var(--error-color, rgba(255, 0, 0, 0.2));
    opacity: 1;
}
.completion-emoji {
    width: clamp(80px, 15vw, 120px);
    height: clamp(80px, 15vw, 120px);
    margin: 0 auto 3vw;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    border: 2px dashed var(--accent-color, #FF8C00);
    display: flex;
    justify-content: center;
    align-items: center;
}
.completion-emoji::after {
    content: 'üéâ';
    font-size: clamp(40px, 8vw, 60px);
    color: var(--math-color, black);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
}
.completion-message {
    display: none;
    text-align: center;
    padding: 20px;
    background: var(--card-bg, white);
    border-radius: 15px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    margin: 20px auto;
    max-width: 600px;
    color: var(--text-color, black);
}
.completion-message h2 {
    font-family: 'Lora', serif;
    font-size: 1.75rem;
    color: var(--math-color, #FF8C00);
    text-align: center;
    margin: 10px 0;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}
.completion-message p {
    font-family: 'Roboto', sans-serif;
    font-size: 1.5rem;
    color: var(--accent-color, #FF8C00);
    text-align: center;
    margin: 10px 0;
    font-weight: bold;
}
#resetTrainerBtn {
    display: block;
    margin: 20px auto;
    padding: 12px 24px;
    font-size: 18px;
    font-weight: bold;
    color: var(--text-color, white);
    background: var(--bg-gradient, #FF8C00);
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}
#resetTrainerBtn:hover {
    background: var(--bg-hover, rgba(255, 140, 0, 0.8));
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}
#resetTrainerBtn:active {
    transform: scale(0.95);
}
.video-card-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 20px;
    padding: 20px;
}
.video-card {
    width: 350px;
    height: 250px;
    background: var(--card-bg);
    border-radius: 15px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 10px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    color: var(--text-color);
}
.video-card:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
}
.video-card img {
    width: 40px;
    height: 40px;
    margin-bottom: 8px;
    object-fit: cover;
    border-radius: 6px;
}
.video-player-container {
    width: 80vw;
    max-width: 960px;
    aspect-ratio: 16 / 9;
    margin: 20px auto;
    display: flex;
    justify-content: center;
    align-items: center;
}
.video-player-container iframe {
    width: 100%;
    height: 100%;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    display: block;
    border: none;
}
.video-card h3 {
    font-size: clamp(16px, 2.5vw, 18px);
    font-weight: 600;
    color: var(--text-color);
}
.glow-title {
    font-family: 'Lora', serif;
    font-size: 1.5rem;
    color: var(--math-color);
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}
.math-loading {
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease;
}
.math-loaded {
    visibility: visible;
    opacity: 1;
}
.vector-label, .vector-label * {
    color: red !important;
    fill: red !important;
}
@media (min-width: 769px) {
    .answer-button {
        padding: 20px 40px;
        max-width: 350px;
        font-size: 1.75rem;
    }
    .answer-button .MathJax, .answer-button mjx-container, .answer-button mjx-math, .answer-button mjx-mrow {
        font-size: 1.5rem !important;
    }
}
@media (max-width: 768px) {
    .title-box { margin-top: 40px; padding: 15px 20px; }
    .title-box h1 { font-size: 1.5rem; }
    .section-container { flex-direction: column; align-items: center; gap: 20px; }
    .section { width: 80%; height: 180px; }
    .section h2 { font-size: 1.125rem; }
    .nav-button { font-size: 0.9rem; padding: 8px 16px; }
    .tab-button { font-size: 1rem; padding: 8px 10px; }
    .tab-content { padding: 15px; }
    .modal { top: 2%; left: 2%; width: 96%; height: 96%; }
    .trainer-container { width: 95%; padding: 4vw; }
    .answer-options { grid-template-columns: 1fr; gap: 0.75rem; }
    .video-card-container {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
    }
    .video-card {
        width: 260px;
        height: 160px;
        margin: 5px;
    }
    .video-card img {
        width: 40px;
        height: 40px;
        margin-bottom: 6px;
    }
    .video-player-container {
        width: 80vw;
        max-width: 600px;
        aspect-ratio: 16 / 9;
    }
    .video-card h3 {
        font-size: clamp(14px, 2.5vw, 16px);
    }
    .flashcard-front p {
        font-size: 1.125rem;
    }
    .flashcard-back p {
        font-size: 1rem;
    }
    .flashcard {
        height: 180px;
    }
    .flashcard-front, .flashcard-back {
        padding: 15px;
    }
    #theoryModal .modal-content li {
        padding-left: 7px;
        margin-left: 5px;
        max-width: calc(100% - 15px);
    }
    .flashcard {
        height: 220px;
    }
    #matrixText img {
        max-width: 250px;
    }
    .answer-options {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }
    .answer-button {
        font-size: 1.0rem;
        padding: 10px 20px;
        max-width: 250px;
    }
    .answer-button .MathJax, .answer-button mjx-container, .answer-button mjx-math, .answer-button mjx-mrow {
        font-size: 1.1rem !important;
    }
}
@media (max-width: 480px) {
    .title-box { margin-top: 20px; padding: 10px 15px; }
    .title-box h1 { font-size: 1.25rem; }
    .section { width: 90%; height: 150px; }
    .section img { width: 50px; height: 50px; }
    .section h2 { font-size: 1rem; }
    .video-card-container {
        gap: 10px;
        padding: 10px;
    }
    .video-card {
        width: 90%;
        max-width: 260px;
        height: 140px;
        margin: 5px;
    }
    .video-card img {
        width: 30px;
        height: 30px;
        margin-bottom: 5px;
    }
    .video-card h3 {
        font-size: clamp(12px, 2.5vw, 14px);
    }
    .video-player-container {
        width: 80vw;
        max-width: 400px;
        aspect-ratio: 16 / 9;
    }
    #theoryModal .modal-content h3 { font-size: 1.25rem; }
    .example-title { font-size: 1.0rem; }
    .example-solution { font-size: 1.0rem; }
    .MathJax, mjx-container, mjx-math, mjx-mrow { font-size: 1.2rem !important; }
    .question-circle { width: clamp(80px, 15vw, 100px); height: clamp(80px, 15vw, 100px); }
    .question-circle h3 { font-size: clamp(0.9rem, 2.5vw, 1.0rem); }
    .answer-button { font-size: 1.0rem; }
    .answer-button {
        font-size: 0.9rem;
        padding: 8px 16px;
        max-width: 220px;
    }
    .answer-button .MathJax, .answer-button mjx-container, .answer-button mjx-math, .answer-button mjx-mrow {
        font-size: 1.0rem !important;
    }
}
@media (max-width: 320px) {
    .flashcard-front p, .flashcard-back p {
        font-size: 0.9rem;
    }
    .answer-button {
        font-size: 0.8rem;
        padding: 6px 12px;
        max-width: 200px;
    }
    .answer-button .MathJax, .answer-button mjx-container, .answer-button mjx-math, .answer-button mjx-mrow {
        font-size: 0.9rem !important;
    }
}
    </style>
</head>
<body>
    <div class="title-box">
        <h1>28. –õ—ñ–Ω—ñ–π–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏</h1>
    </div>
    <div class="section-container">
        <div class="section" id="openTheoryBtn">
            <img src="https://img.icons8.com/fluency/96/book-shelf.png" alt="–ö–Ω–∏–≥–∞" loading="lazy">
            <h2>–¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ</h2>
        </div>
        <div class="section" id="openVideoBtn">
            <img src="https://img.icons8.com/fluency/96/video.png" alt="–í—ñ–¥–µ–æ" loading="lazy">
            <h2>–í—ñ–¥–µ–æ–º–∞—Ç–µ—Ä—ñ–∞–ª–∏</h2>
        </div>
        <div class="section" id="openQuestionsBtn">
            <img src="https://img.icons8.com/fluency/96/flipboard.png" alt="–ö–∞—Ä—Ç–∫–∏" loading="lazy">
            <h2>–ü–∏—Ç–∞–Ω–Ω—è —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</h2>
        </div>
        <div class="section" id="openTrainerBtn">
            <img src="https://img.icons8.com/fluency/96/flash-on.png" alt="–¢—Ä–µ–Ω–∞–∂–µ—Ä" loading="lazy">
            <h2>–¢—Ä–µ–Ω–∞–∂–µ—Ä</h2>
        </div>
    </div>
    <div class="navigation-buttons">
        <a class="nav-button" href='tema7.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
            –î–æ —Ç–µ–º–∏ 7
        </a>
        <a class="nav-button" href='index.html'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            –ù–∞ –≥–æ–ª–æ–≤–Ω—É
        </a>
    </div>
    <div id="modalOverlay"></div>
    <div id="theoryModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-header">
            <button class="close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç" id="closeTheoryBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="tab-container">
                <button class="tab-button" data-tab="vector-addition" aria-expanded="false">–î–æ–¥–∞–≤–∞–Ω–Ω—è —ñ –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤</button>
                <div id="vector-addition" class="tab-content">
    
    <p>–õ—ñ–Ω—ñ–π–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ ‚Äì —Ü–µ –±–∞–∑–æ–≤—ñ –¥—ñ—ó, —è–∫—ñ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –∑ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω—ñ–π —Ñ–æ—Ä–º—ñ. –¶—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤–∫–ª—é—á–∞—é—Ç—å: –¥–æ–¥–∞–≤–∞–Ω–Ω—è, –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ —Ç–∞ –º–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —Å–∫–∞–ª—è—Ä (—á–∏—Å–ª–æ).</p>

    <h3>–î–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤</h3>
    
    <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞.</span> 
  –ì–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø—Ä–∞–≤–∏–ª—É —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞. 
  –ù–µ—Ö–∞–π –∑–∞–¥–∞–Ω–æ –¥–≤–∞ –≤–µ–∫—Ç–æ—Ä–∏ \(\vec{a}\) —ñ \(\vec{b}\) (—Ä–∏—Å. 7.6).
</p>

 <img src="/static/figure7.6.jpg" alt="–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
    
   <p>  –©–æ–± –∑–Ω–∞–π—Ç–∏ —ó—Ö–Ω—é —Å—É–º—É, –ø–µ—Ä–µ–Ω–µ—Å–µ–º–æ –≤–µ–∫—Ç–æ—Ä \(\vec{b}\) —Ç–∞–∫, —â–æ–± –π–æ–≥–æ –ø–æ—á–∞—Ç–æ–∫ –∑–±—ñ–≥–∞–≤—Å—è –∑ –∫—ñ–Ω—Ü–µ–º –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\). –î–∞–ª—ñ –ø—Ä–æ–≤–µ–¥–µ–º–æ –≤–µ–∫—Ç–æ—Ä \(\vec{c}\) –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\) –¥–æ –∫—ñ–Ω—Ü—è –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{b}\) (—Ä–∏—Å. 7.7).
   –û—Ç—Ä–∏–º–∞–Ω–∏–π –≤–µ–∫—Ç–æ—Ä \(\vec{c}\) —î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –¥–æ–¥–∞–≤–∞–Ω–Ω—è \(\vec{a} + \vec{b}\).</p>
    <img src="/static/figure7.7.jpg" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
      <p>–î–ª—è –∫—Ä–∞—â–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ —Ñ—ñ–∑–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥: –Ω–µ—Ö–∞–π —Ç—ñ–ª–æ —Å–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–º—ñ—Å—Ç–∏–ª–æ—Å—è –∑–∞ –≤–µ–∫—Ç–æ—Ä–æ–º \(\vec{a}\), –∞ –ø–æ—Ç—ñ–º –∑–∞ –≤–µ–∫—Ç–æ—Ä–æ–º \(\vec{b}\). –¢–æ–¥—ñ –π–æ–≥–æ –∑–∞–≥–∞–ª—å–Ω–µ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –æ–ø–∏—Å—É—î—Ç—å—Å—è –≤–µ–∫—Ç–æ—Ä–æ–º \(\vec{c}\), —è–∫–∏–π –≤–∫–∞–∑—É—î –Ω–∞–ø—Ä—è–º–æ–∫ —ñ –≤–µ–ª–∏—á–∏–Ω—É —Å—É–º–∞—Ä–Ω–æ–≥–æ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è ‚Äì –≤—ñ–¥ –ø–æ—á–∞—Ç–∫–æ–≤–æ—ó –¥–æ –∫—ñ–Ω—Ü–µ–≤–æ—ó —Ç–æ—á–∫–∏.</p>
    <p style="color:#ffefd5;"><strong>–ü—Ä–∏–º—ñ—Ç–∫–∞:</strong> <em>–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ –±—É–¥—å-—è–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤–µ–∫—Ç–æ—Ä—ñ–≤. –í–æ–Ω–∏ –∑‚Äô—î–¥–Ω—É—é—Ç—å—Å—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ: –∫—ñ–Ω–µ—Ü—å –æ–¥–Ω–æ–≥–æ
    –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –ø–æ—á–∞—Ç–∫–æ–º –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ. –°—É–º–∞—Ä–Ω–∏–π –≤–µ–∫—Ç–æ—Ä ‚Äì —Ü–µ –≤–µ–∫—Ç–æ—Ä, —â–æ —Å–ø–æ–ª—É—á–∞—î –ø–æ—á–∞—Ç–æ–∫ –ø–µ—Ä—à–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –∑ –∫—ñ–Ω—Ü–µ–º –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ (—Ä–∏—Å. 7.8).</p> </em>
    <img src="/static/figure7.8.jpg" alt="–î–æ–¥–∞–≤–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
    
    <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞.</span> 
    –ù–µ—Ö–∞–π –∑–∞–¥–∞–Ω–æ –¥–≤–∞ –≤–µ–∫—Ç–æ—Ä–∏ \(\vec{a}\) —ñ \(\vec{b}\) (—Ä–∏—Å. 7.9). –í—ñ–¥–∫–ª–∞–¥–µ–º–æ –æ–±–∏–¥–≤–∞ –≤–µ–∫—Ç–æ—Ä–∏ –≤—ñ–¥ –æ–¥–Ω—ñ—î—ó —Å–ø—ñ–ª—å–Ω–æ—ó —Ç–æ—á–∫–∏. –î–∞–ª—ñ –¥–æ–±—É–¥—É—î–º–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º, –ø—Ä–æ–≤—ñ–≤—à–∏ —Å—Ç–æ—Ä–æ–Ω–∏, –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∞–º \(\vec{a}\) —ñ \(\vec{b}\). –î—ñ–∞–≥–æ–Ω–∞–ª—å —Ü—å–æ–≥–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞, —â–æ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –≤—ñ–¥ —Å–ø—ñ–ª—å–Ω–æ—ó —Ç–æ—á–∫–∏ —ñ —Å–ø—Ä—è–º–æ–≤–∞–Ω–∞ –¥–æ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–æ—ó –≤–µ—Ä—à–∏–Ω–∏, —î —Å—É–º–æ—é –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a} + \vec{b}\).</p>
    <img src="/static/figure7.9.jpg" alt="–ü—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
    
  <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥–∞.</span> 
  –°—É–º–∞ —Ç—Ä—å–æ—Ö –Ω–µ–∫–æ–º–ø–ª–∞–Ω–∞—Ä–Ω–∏—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a}\), \(\vec{b}\) —ñ \(\vec{c}\), —â–æ –≤–∏—Ö–æ–¥—è—Ç—å —ñ–∑ –æ–¥–Ω—ñ—î—ó —Ç–æ—á–∫–∏ (—Ä–∏—Å. 7.10), –¥–æ—Ä—ñ–≤–Ω—é—î –¥—ñ–∞–≥–æ–Ω–∞–ª—ñ –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥–∞, –ø–æ–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –Ω–∞ —Ü–∏—Ö –≤–µ–∫—Ç–æ—Ä–∞—Ö —ñ–∑ —Ü—ñ—î—ó –∂ —Ç–æ—á–∫–∏ (—Ä–∏—Å. 7.11). –î–ª—è —Ü—å–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∏ –ø—Ä–∏–≤–æ–¥—è—Ç—å –¥–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ –ø–æ—á–∞—Ç–∫—É –≤ —Ç–æ—á—Ü—ñ \(O\), –∞ –Ω–∞ –Ω–∏—Ö —è–∫ –Ω–∞ —Ä–µ–±—Ä–∞—Ö –±—É–¥—É—é—Ç—å –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥. –î—ñ–∞–≥–æ–Ω–∞–ª—å —Ü—å–æ–≥–æ –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥–∞, —â–æ —Å–ø–æ–ª—É—á–∞—î —Ç–æ—á–∫—É \(O\) –∑ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–æ—é –≤–µ—Ä—à–∏–Ω–æ—é, –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –∑–æ–±—Ä–∞–∂—É—î —Ä–µ–∑—É–ª—å—Ç—É—é—á–∏–π –≤–µ–∫—Ç–æ—Ä \(\vec{a} + \vec{b} + \vec{c}\).
</p>
 <img src="/static/figure7.10.jpg" alt="–¢—Ä–∏ –Ω–µ–∫–æ–º–ø–ª–∞–Ω–∞—Ä–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∏"  style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
    
     <h3>–†—ñ–∑–Ω–∏—Ü—è –≤–µ–∫—Ç–æ—Ä—ñ–≤</h3>
        <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞.</span>
  –†—ñ–∑–Ω–∏—Ü–µ—é –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a}\) —ñ \(\vec{b}\) –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –≤–µ–∫—Ç–æ—Ä \(\vec{c}\), —â–æ —Å–ø–æ–ª—É—á–∞—î –∫—ñ–Ω–µ—Ü—å –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{b}\) –∑ –∫—ñ–Ω—Ü–µ–º –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\) –∑–∞ —É–º–æ–≤–∏, —â–æ –æ–±–∏–¥–≤–∞ –≤–µ–∫—Ç–æ—Ä–∏ –º–∞—é—Ç—å —Å–ø—ñ–ª—å–Ω–∏–π –ø–æ—á–∞—Ç–æ–∫. –Ü–Ω—à–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, \(\vec{c} = \vec{a} - \vec{b}\) –≤–∫–∞–∑—É—î –Ω–∞–ø—Ä—è–º–æ–∫ —ñ –≤–µ–ª–∏—á–∏–Ω—É –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –≤—ñ–¥ –∫—ñ–Ω—Ü—è –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{b}\) –¥–æ –∫—ñ–Ω—Ü—è –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\). –ì–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ —Ü–µ –º–æ–∂–Ω–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞: —è–∫—â–æ \(\vec{a} = \vec{b} + \vec{c}\), —Ç–æ \(\vec{c} = \vec{a} - \vec{b}\) (—Ä–∏—Å. 7.12).</p>
    <img src="/static/figure7.12.jpg" alt="–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –¥–ª—è –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
    
     <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞.</span>
  –ì–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{b}\) –≤—ñ–¥ \(\vec{a}\) –º–æ–∂–Ω–∞ —É—è–≤–∏—Ç–∏ —è–∫ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\) –¥–æ –≤–µ–∫—Ç–æ—Ä–∞ \(-\vec{b}\). –î–ª—è —Ü—å–æ–≥–æ –±—É–¥—É—î–º–æ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –≤–µ–∫—Ç–æ—Ä \(-\vec{b}\) –¥–æ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{b}\) (—Ä–∏—Å. 7.13). –ü–æ—Ç—ñ–º –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ –¥–æ–¥–∞—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏ \(\vec{a} + (-\vec{b})\). –ü–æ—á–∞—Ç–æ–∫ –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –≤ –∫—ñ–Ω–µ—Ü—å –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{b}\). –û—Ç—Ä–∏–º–∞–Ω–∏–π –≤–µ–∫—Ç–æ—Ä \(\vec{a} - \vec{b}\) —î —Ä—ñ–∑–Ω–∏—Ü–µ—é –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a}\) —ñ \(\vec{b}\).</p>
    <img src="/static/figure7.13.jpg" alt="–ü—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ –¥–ª—è –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
</div>

                <button class="tab-button" data-tab="vector-scaling" aria-expanded="false">–ú–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ</button>
               <div id="vector-scaling" class="tab-content">
    <h3>–ú–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ</h3>
    <p>–ú–Ω–æ–∂–µ–Ω–Ω—è –Ω–µ–Ω—É–ª—å–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\) –Ω–∞ —á–∏—Å–ª–æ \(\lambda\) –¥–∞—î –Ω–æ–≤–∏–π –≤–µ–∫—Ç–æ—Ä \(\vec{b}\), –¥–æ–≤–∂–∏–Ω–∞ —è–∫–æ–≥–æ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —è–∫ \(|\vec{b}| = |\lambda| \cdot |\vec{a}|\), –∞ –Ω–∞–ø—Ä—è–º–æ–∫ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–Ω–∞–∫–∞ \(\lambda\):</p>
    <ul>
        <li>—è–∫—â–æ \(\lambda \geq 0\), —Ç–æ \(\vec{b}\) —Å–ø—ñ–≤–Ω–∞–ø—Ä—è–º–ª–µ–Ω–∏–π —ñ–∑ \(\vec{a}\);</li>
        <li>—è–∫—â–æ \(\lambda < 0\), —Ç–æ \(\vec{b}\) –º–∞—î –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –Ω–∞–ø—Ä—è–º–æ–∫ –¥–æ \(\vec{a}\).</li>
    </ul>
    <p>–ù–∞ —Ä–∏—Å—É–Ω–∫—É 7.14 –ø–æ–∫–∞–∑–∞–Ω–æ, —è–∫ –≤–µ–∫—Ç–æ—Ä –∑–º—ñ–Ω—é—î —Å–≤–æ—é –¥–æ–≤–∂–∏–Ω—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ \(|\lambda|\) —Ç–∞ –Ω–∞–ø—Ä—è–º–æ–∫ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∑–Ω–∞–∫–∞ \(\lambda\). –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ \(|\lambda| < 1\), —Ç–æ –¥–æ–≤–∂–∏–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∞ –∑–º–µ–Ω—à—É—î—Ç—å—Å—è –≤ \(|\lambda|\) —Ä–∞–∑—ñ–≤. –¢–∞–∫, –¥–æ–≤–∂–∏–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{b} = \frac{1}{2} \vec{a}\) —É–¥–≤—ñ—á—ñ –º–µ–Ω—à–∞ –∑–∞ –¥–æ–≤–∂–∏–Ω—É –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\). –Ø–∫—â–æ \(|\lambda| > 1\), –¥–æ–≤–∂–∏–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∞ –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è —É \(|\lambda|\) —Ä–∞–∑—ñ–≤. –ó–æ–∫—Ä–µ–º–∞, –¥–æ–≤–∂–∏–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{e} = \sqrt{2} \vec{a}\) —É \(\sqrt{2}\) —Ä–∞–∑–∏ –±—ñ–ª—å—à–∞ –∑–∞ –¥–æ–≤–∂–∏–Ω—É –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\).</p>

    <p>–£—Å—ñ –æ—Ç—Ä–∏–º–∞–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∏ —î –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–∏–º–∏, –æ—Å–∫—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –≤–µ–∫—Ç–æ—Ä –º–æ–∂–Ω–∞ –≤–∏—Ä–∞–∑–∏—Ç–∏ —á–µ—Ä–µ–∑ —ñ–Ω—à–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–Ω–æ–∂–µ–Ω–Ω—è –Ω–∞ —á–∏—Å–ª–æ.
   <em><strong style="color: #f4c430;">–ó–≤–æ—Ä–æ—Ç–Ω–µ —Ç–∞–∫–æ–∂ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–µ:</strong></em>  —è–∫—â–æ –æ–¥–∏–Ω –≤–µ–∫—Ç–æ—Ä –º–æ–∂–Ω–∞ –≤–∏—Ä–∞–∑–∏—Ç–∏ —á–µ—Ä–µ–∑ —ñ–Ω—à–∏–π, —Ç–æ —Ç–∞–∫—ñ –≤–µ–∫—Ç–æ—Ä–∏ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω—ñ. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –º–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ –∑–∞–≤–∂–¥–∏ –¥–∞—î –≤–µ–∫—Ç–æ—Ä, –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–∏–π –ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É.</p>
    <p>–ù–∞ —Ä–∏—Å—É–Ω–∫—É (—Ä–∏—Å. 7.14) –≤–µ–∫—Ç–æ—Ä–∏ \(\vec{a}\), \(\vec{b}\), \(\vec{e}\) —Å–ø—ñ–≤–Ω–∞–ø—Ä—è–º–ª–µ–Ω—ñ –º—ñ–∂ —Å–æ–±–æ—é, –∞ –≤–µ–∫—Ç–æ—Ä–∏ \(\vec{c}\) —ñ \(\vec{d}\) —Ç–∞–∫–æ–∂ —Å–ø—ñ–≤–Ω–∞–ø—Ä—è–º–ª–µ–Ω—ñ –º—ñ–∂ —Å–æ–±–æ—é, –∞–ª–µ –º–∞—é—Ç—å –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –Ω–∞–ø—Ä—è–º–æ–∫ –¥–æ –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a}\), \(\vec{b}\), \(\vec{e}\).</p>
<img src="/static/figure7.14.jpg" alt="–ú–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">

    <p>–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –º–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ –∑–∞–≤–∂–¥–∏ –∑–±–µ—Ä—ñ–≥–∞—î –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω—ñ—Å—Ç—å —ñ–∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º –≤–µ–∫—Ç–æ—Ä–æ–º, –∑–º—ñ–Ω—é—é—á–∏ –ª–∏—à–µ –π–æ–≥–æ –¥–æ–≤–∂–∏–Ω—É —Ç–∞, –º–æ–∂–ª–∏–≤–æ, –Ω–∞–ø—Ä—è–º–æ–∫.</p>
    
    <h3>–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –ª—ñ–Ω—ñ–π–Ω–∏—Ö –¥—ñ–π –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏</h3>
   
        <li>
            <strong><em>1. –ö–æ–º—É—Ç–∞—Ç–∏–≤–Ω–∞ (–ø–µ—Ä–µ—Å—Ç–∞–≤–Ω–∞) –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å</strong></em> (—Ä–∏—Å. 7.15).<br>
            –î–ª—è –±—É–¥—å-—è–∫–∏—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a}\) —ñ \(\vec{b}\):<br>
            <p class="math-equation center">\[\vec{a} + \vec{b} = \vec{b} + \vec{a}\]</p>
            –¶—è –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –ø–æ–∫–∞–∑—É—î, —â–æ –≤–µ–∫—Ç–æ—Ä–∏ –º–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –≤ –±—É–¥—å-—è–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É. –ù–∞ —Ä–∏—Å—É–Ω–∫—É (—Ä–∏—Å. 7.15) —Ü–µ –≤–∏–¥–Ω–æ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞: –¥—ñ–∞–≥–æ–Ω–∞–ª—å –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–æ—é –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —è–∫–∏–π –≤–µ–∫—Ç–æ—Ä –¥–æ–¥–∞—î—Ç—å—Å—è –ø–µ—Ä—à–∏–º.
            <img src="/static/figure7.15.jpg" alt="–ö–æ–º—É—Ç–∞—Ç–∏–≤–Ω–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
        </li>
        <li>
            <strong><em>2. –ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–∞ (—Å–ø–æ–ª—É—á–Ω–∞) –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å</strong> </em>(—Ä–∏—Å. 7.16 —Ç–∞ —Ä–∏—Å. 7.17).<br>
            –î–ª—è –±—É–¥—å-—è–∫–∏—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a}\), \(\vec{b}\) —ñ \(\vec{c}:\)<br>
            <p class="math-equation center">\[(\vec{a} + \vec{b}) + \vec{c} = \vec{a} + (\vec{b} + \vec{c})\]</p>
            –ó–∞–≤–¥—è–∫–∏ –∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–æ—Å—Ç—ñ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ —Å—É–º—É —Ç—Ä—å–æ—Ö –∞–±–æ –±—ñ–ª—å—à–µ –≤–µ–∫—Ç–æ—Ä—ñ–≤ –º–æ–∂–Ω–∞ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –±–µ–∑ –¥—É–∂–æ–∫. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏—Ä–∞–∑–∏ \((\vec{a} + \vec{b}) + \vec{c}\) —ñ \(\vec{a} + (\vec{b} + \vec{c})\) –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω—ñ, —Ç–æ–º—É —ó—Ö –∑–∞–ø–∏—Å—É—é—Ç—å —è–∫ \(\vec{a} + \vec{b} + \vec{c}\).
            <div class="image-row">

<img src="/static/figure7.16.jpg" alt="–ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å: –ø–µ—Ä—à–∏–π –∫—Ä–æ–∫ –¥–æ–¥–∞–≤–∞–Ω–Ω—è" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
                                                 </div>
        </li>
        <li>
            <strong><em>3. –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω—É–ª—å–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞.</strong></em><br>
            –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω—É–ª—å–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{0}\) –¥–æ –±—É–¥—å-—è–∫–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\) –Ω–µ –∑–º—ñ–Ω—é—î –π–æ–≥–æ:<br>
            <p class="math-equation center">\[\vec{a} + \vec{0} = \vec{a}\]</p>
        </li>
        <li>
            <strong><em>4. –°—É–º–∞ –≤–µ–∫—Ç–æ—Ä–∞ —Ç–∞ –π–æ–≥–æ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞.</strong></em><br>
            –°—É–º–∞ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\) —ñ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–æ–≥–æ –π–æ–º—É –≤–µ–∫—Ç–æ—Ä–∞ \(-\vec{a}\) –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—å–æ–≤–æ–º—É –≤–µ–∫—Ç–æ—Ä—É:<br>
            <p class="math-equation center">\[\vec{a} + (-\vec{a}) = \vec{0}\]</p>
        </li>
        <li>
            <strong><em>5. –ú–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ –æ–¥–∏–Ω–∏—Ü—é.</strong></em><br>
            –ú–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\) –Ω–∞ —á–∏—Å–ª–æ 1 –∑–∞–ª–∏—à–∞—î –≤–µ–∫—Ç–æ—Ä –Ω–µ–∑–º—ñ–Ω–Ω–∏–º:<br>
            <p class="math-equation center">\[1 \cdot \vec{a} = \vec{a}\]</p>
        </li>
        <li>
            <strong><em>6. –ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–∞ (—Å–ø–æ–ª—É—á–Ω–∞) –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –º–Ω–æ–∂–µ–Ω–Ω—è –Ω–∞ —á–∏—Å–ª–∞.</strong></em><br>
            –î–ª—è –±—É–¥—å-—è–∫–∏—Ö —á–∏—Å–µ–ª \(\lambda\) —ñ \(\mu\) —Ç–∞ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\):<br>
            <p class="math-equation center">\[\lambda (\mu \vec{a}) = \lambda \mu \vec{a}\]</p>
            –ú–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ –¥–≤–∞ —á–∏—Å–ª–∞ –º–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤ –±—É–¥—å-—è–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É, —Å–ø–æ—á–∞—Ç–∫—É –ø–æ–º–Ω–æ–∂–∏–≤—à–∏ —á–∏—Å–ª–∞ –º—ñ–∂ —Å–æ–±–æ—é.
        </li>
        <li>
            <strong><em>7. –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–∞ (—Ä–æ–∑–ø–æ–¥—ñ–ª—å–Ω–∞) –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å —â–æ–¥–æ —á–∏—Å–ª–æ–≤–∏—Ö –º–Ω–æ–∂–Ω–∏–∫—ñ–≤.</strong></em><br>
            –î–ª—è –±—É–¥—å-—è–∫–∏—Ö —á–∏—Å–µ–ª \(\lambda\) —ñ \(\mu\) —Ç–∞ –≤–µ–∫—Ç–æ—Ä–∞ \(\vec{a}\):<br>
            <p class="math-equation center">\[(\lambda + \mu) \cdot \vec{a} = \lambda \vec{a} + \mu \vec{a}\]</p>
            –°—É–º–∞ —á–∏—Å–µ–ª, –ø–æ–º–Ω–æ–∂–µ–Ω–∞ –Ω–∞ –≤–µ–∫—Ç–æ—Ä, –¥–æ—Ä—ñ–≤–Ω—é—î —Å—É–º—ñ –≤–µ–∫—Ç–æ—Ä—ñ–≤, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –º–Ω–æ–∂–µ–Ω–Ω—è–º —Ü—å–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ –∫–æ–∂–Ω–µ —á–∏—Å–ª–æ –æ–∫—Ä–µ–º–æ.
        </li>
        <li>
            <strong><em>8. –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–∞ (—Ä–æ–∑–ø–æ–¥—ñ–ª—å–Ω–∞) –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å —â–æ–¥–æ –≤–µ–∫—Ç–æ—Ä–Ω–∏—Ö –¥–æ–¥–∞–Ω–∫—ñ–≤.</strong></em><br>
            –î–ª—è –±—É–¥—å-—è–∫–æ–≥–æ —á–∏—Å–ª–∞ \(\mu\) —Ç–∞ –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a}\) —ñ \(\vec{b}\):<br>
            <p class="math-equation center">\[\mu \cdot (\vec{a} + \vec{b}) = \mu \vec{a} + \mu \vec{b}\]</p>
            –ß–∏—Å–ª–æ, –ø–æ–º–Ω–æ–∂–µ–Ω–µ –Ω–∞ —Å—É–º—É –≤–µ–∫—Ç–æ—Ä—ñ–≤, –¥–æ—Ä—ñ–≤–Ω—é—î —Å—É–º—ñ –≤–µ–∫—Ç–æ—Ä—ñ–≤, –∫–æ–∂–µ–Ω —ñ–∑ —è–∫–∏—Ö –ø–æ–º–Ω–æ–∂–µ–Ω–∏–π –Ω–∞ —Ü–µ —á–∏—Å–ª–æ.
        </li>
   
</div>

                
                <button class="tab-button" data-tab="examples" aria-expanded="false">–ü—Ä–∏–∫–ª–∞–¥–∏</button>
                <div id="examples" class="tab-content">
 <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∏–∫–ª–∞–¥ 7.1.</span> 
    –ó–∞ –¥–∞–Ω–∏–º–∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ \(\vec{a}\) —ñ \(\vec{b}\) (—Ä–∏—Å. 7.18) –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –≤–µ–∫—Ç–æ—Ä–∏:
     –∞) \(\vec{c} = 2\vec{a} + 3\vec{b}\); –±) \(\vec{d} = 2\vec{b} - \vec{a}\).
</p>
<img src="/static/figure7.18.jpg" alt="–î–∞–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∏ a —ñ b" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
         <h3>–†–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è</h3>
    <p><strong>–∞)</strong> –í–µ–∫—Ç–æ—Ä \(\vec{c} = 2\vec{a} + 3\vec{b}\) –±—É–¥—É—î–º–æ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞. –°–ø–æ—á–∞—Ç–∫—É –∑–Ω–∞—Ö–æ–¥–∏–º–æ –≤–µ–∫—Ç–æ—Ä \(2\vec{a}\), —è–∫–∏–π —É –¥–≤–∞ —Ä–∞–∑–∏ –¥–æ–≤—à–∏–π –∑–∞ \(\vec{a}\) —ñ —Å–ø—ñ–≤–Ω–∞–ø—Ä—è–º–ª–µ–Ω–∏–π —ñ–∑ –Ω–∏–º. –î–∞–ª—ñ –∑–Ω–∞—Ö–æ–¥–∏–º–æ –≤–µ–∫—Ç–æ—Ä \(3\vec{b}\), —è–∫–∏–π —É —Ç—Ä–∏ —Ä–∞–∑–∏ –¥–æ–≤—à–∏–π –∑–∞ \(\vec{b}\) —ñ —Ç–∞–∫–æ–∂ —Å–ø—ñ–≤–Ω–∞–ø—Ä—è–º–ª–µ–Ω–∏–π —ñ–∑ –Ω–∏–º. –ü–æ—Ç—ñ–º –¥–æ–¥–∞—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏ \(2\vec{a}\) —ñ \(3\vec{b}\), –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—á–∏ –ø—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–±—É–¥–æ–≤–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫—É 7.19.</p>

<img src="/static/figure7.19.jpg" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–±—É–¥–æ–≤–∏ –≤–µ–∫—Ç–æ—Ä–∞ c = 2a + 3b" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
   

 <p><strong>–±)</strong> –í–µ–∫—Ç–æ—Ä \(\vec{d} = 2\vec{b} - \vec{a}\) –±—É–¥—É—î–º–æ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ. –°–ø–æ—á–∞—Ç–∫—É –∑–Ω–∞—Ö–æ–¥–∏–º–æ –≤–µ–∫—Ç–æ—Ä \(2\vec{b}\), —è–∫–∏–π —É –¥–≤–∞ —Ä–∞–∑–∏ –¥–æ–≤—à–∏–π –∑–∞ \(\vec{b}\) —ñ —Å–ø—ñ–≤–Ω–∞–ø—Ä—è–º–ª–µ–Ω–∏–π —ñ–∑ –Ω–∏–º. –î–∞–ª—ñ –∑–Ω–∞—Ö–æ–¥–∏–º–æ –≤–µ–∫—Ç–æ—Ä \(-\vec{a}\), —è–∫–∏–π —î –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–º –¥–æ \(\vec{a}\), —Ç–æ–±—Ç–æ –º–∞—î —Ç–æ–π —Å–∞–º–∏–π —Ä–æ–∑–º—ñ—Ä, –∞–ª–µ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –Ω–∞–ø—Ä—è–º–æ–∫. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –¥–æ–¥–∞—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏ \(2\vec{b}\) —ñ \(-\vec{a}\), –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–±—É–¥–æ–≤–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫—É 7.20.</p>
    <div class="image-row">
<img src="/static/figure7.20.jpg" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–±—É–¥–æ–≤–∏ –≤–µ–∫—Ç–æ—Ä–∞ d = 2b - a" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
       </div>

    <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∏–∫–ª–∞–¥ 7.2.</span>
 –£ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É \(ABC\) –ø—Ä–æ–≤–µ–¥–µ–Ω–æ –º–µ–¥—ñ–∞–Ω—É \(AM\) (—Ä–∏—Å. 7.21). –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏—Ä–∞–∑–∏—Ç–∏ –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{AM}\) —á–µ—Ä–µ–∑ –≤–µ–∫—Ç–æ—Ä–∏ \(\overrightarrow{AB} = \vec{b}\) —ñ \(\overrightarrow{AC} = \vec{c}\).</p>
<img src="/static/figure7.21.jpg" alt="–ú–µ–¥—ñ–∞–Ω–∞ AM —É —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É ABC" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
      
    <h3>–†–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è</h3>
    <p>–©–æ–± –∑–Ω–∞–π—Ç–∏ –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{AM}\), –¥–æ–±—É–¥—É—î–º–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫ \(ABC\) –¥–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ \(ABCD\) (—Ä–∏—Å. 7.22).</p>
<img src="/static/figure7.22.jpg" alt="–ü–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º ABCD –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ AM" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
      
    <p>–£ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º—ñ \(ABCD\) –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{AD}\) —î –¥—ñ–∞–≥–æ–Ω–∞–ª–ª—é, –∞ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ –≤—ñ–Ω –¥–æ—Ä—ñ–≤–Ω—é—î —Å—É–º—ñ –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\overrightarrow{AB}\) —ñ \(\overrightarrow{AC}\):</p>
    <p class="math-equation center">\[\overrightarrow{AD} = \overrightarrow{AB} + \overrightarrow{AC} = \vec{b} + \vec{c}\]</p>
    <p>–û—Å–∫—ñ–ª—å–∫–∏ \(AM\) ‚Äì –º–µ–¥—ñ–∞–Ω–∞ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ \(ABC\), —Ç–æ—á–∫–∞ \(M\) —î —Å–µ—Ä–µ–¥–∏–Ω–æ—é —Å—Ç–æ—Ä–æ–Ω–∏ \(BC\). –£ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º—ñ \(ABCD\) –¥—ñ–∞–≥–æ–Ω–∞–ª—å \(AD\) –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É \(M\), —è–∫–∞ –¥—ñ–ª–∏—Ç—å —ó—ó –Ω–∞–≤–ø—ñ–ª, —Ç–æ–±—Ç–æ \(\overrightarrow{AD} = 2\overrightarrow{AM}\). –û—Ç–∂–µ:</p>
    <p class="math-equation center">\[2\overrightarrow{AM} = \overrightarrow{AD} = \vec{b} + \vec{c}\]</p>
    <p>–ó–≤—ñ–¥—Å–∏, –≤–∏—Ä–∞–∑ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∞ –º–µ–¥—ñ–∞–Ω–∏ –±—É–¥–µ —Ç–∞–∫–∏–º:</p>
    <p class="math-equation center">\[\overrightarrow{AM} = \frac{1}{2} (\vec{b} + \vec{c})\]</p>
    <p class="example-solution">–í—ñ–¥–ø–æ–≤—ñ–¥—å: \(\overrightarrow{AM} = \frac{1}{2} (\vec{b} + \vec{c})\).</p>
    <div class="image-row">
                   </div>

     <p>
  <span style="color:#ffbf00; font-weight:bold;">–ü—Ä–∏–∫–ª–∞–¥ 7.3.</span>
    –î–∞–Ω–æ –∫—É–± \(ABCDA_1B_1C_1D_1\) (—Ä–∏—Å. 7.23). –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏—Ä–∞–∑–∏—Ç–∏ –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{AK}\), –¥–µ \(K\) ‚Äì —Ü–µ–Ω—Ç—Ä –≥—Ä–∞–Ω—ñ \(BCC_1B_1\), —á–µ—Ä–µ–∑ –≤–µ–∫—Ç–æ—Ä–∏ \(\overrightarrow{AB} = \vec{a}\), \(\overrightarrow{AC} = \vec{b}\), \(\overrightarrow{AA_1} = \vec{c}\).</p>
    
    <img src="/static/figure7.23.jpg" alt="–ö—É–± ABCDA1B1C1D1 —ñ–∑ —Ç–æ—á–∫–æ—é K" style="max-width: 100%; display: block; margin: 20px auto;" loading="lazy">
   <h3>–†–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è</h3>
    <p>–†–æ–∑–≥–ª—è–Ω–µ–º–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫ \(\triangle AKL\), –¥–µ \(L\) ‚Äì —Å–µ—Ä–µ–¥–∏–Ω–∞ —Ä–µ–±—Ä–∞ \(BC\), –∞ \(K\) ‚Äì —Ü–µ–Ω—Ç—Ä –≥—Ä–∞–Ω—ñ \(BCC_1B_1\). –ó–∞ –ø—Ä–∞–≤–∏–ª–æ–º —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞:</p>
    <p class="math-equation center">\[\overrightarrow{AK} = \overrightarrow{AL} + \overrightarrow{LK}\]</p>
    <p>–ó–Ω–∞–π–¥–µ–º–æ –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{AL}\). –û—Å–∫—ñ–ª—å–∫–∏ \(L\) ‚Äì —Å–µ—Ä–µ–¥–∏–Ω–∞ —Ä–µ–±—Ä–∞ \(BC\), –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{AL}\) —î –º–µ–¥—ñ–∞–Ω–æ—é —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ \(\triangle ABC\), —â–æ –≤–∏—Ä–∞–∂–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤–µ–∫—Ç–æ—Ä–∏ \(\overrightarrow{AB} = \vec{a}\) —ñ \(\overrightarrow{AC} = \vec{b}\). –Ø–∫ –±—É–ª–æ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ (–¥–ª—è –º–µ–¥—ñ–∞–Ω–∏):</p>
    <p class="math-equation center">\[\overrightarrow{AL} = \frac{\overrightarrow{AB} + \overrightarrow{AC}}{2} = \frac{\vec{a} + \vec{b}}{2}\]</p>
    <p>–ó–Ω–∞–π–¥–µ–º–æ –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{LK}\). –¢–æ—á–∫–∞ \(K\) ‚Äì —Ü–µ–Ω—Ç—Ä –≥—Ä–∞–Ω—ñ \(BCC_1B_1\), –∞ \(L\) ‚Äì —Å–µ—Ä–µ–¥–∏–Ω–∞ —Ä–µ–±—Ä–∞ \(BC\). –£ –∫—É–±—ñ –≥—Ä–∞–Ω—å \(BCC_1B_1\) –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–∞ –¥–æ –æ—Å—ñ, –≤–∏–∑–Ω–∞—á–µ–Ω–æ—ó –≤–µ–∫—Ç–æ—Ä–æ–º \(\overrightarrow{AA_1} = \vec{c}\). –û—Å–∫—ñ–ª—å–∫–∏ \(K\) ‚Äì —Ü–µ–Ω—Ç—Ä –≥—Ä–∞–Ω—ñ, –≤–µ–∫—Ç–æ—Ä \(\overrightarrow{LK}\) –¥–æ—Ä—ñ–≤–Ω—é—î –ø–æ–ª–æ–≤–∏–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∞ \(\overrightarrow{AA_1}\), —Ç–æ–±—Ç–æ:</p>
    <p class="math-equation center">\[\overrightarrow{LK} = \frac{\overrightarrow{AA_1}}{2} = \frac{\vec{c}}{2}\]</p>
    <p>–ü—ñ–¥—Å—Ç–∞–≤–∏–º–æ –∑–Ω–∞–π–¥–µ–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∏ —É –≤–∏—Ä–∞–∑ –¥–ª—è \(\overrightarrow{AK}\):</p>
    <p class="math-equation center">\[\overrightarrow{AK} = \overrightarrow{AL} + \overrightarrow{LK} = \frac{\vec{a} + \vec{b}}{2} + \frac{\vec{c}}{2} = \frac{1}{2} (\vec{a} + \vec{b} + \vec{c})\]</p>
    <p class="example-solution">–í—ñ–¥–ø–æ–≤—ñ–¥—å: \(\overrightarrow{AK} = \frac{1}{2} (\vec{a} + \vec{b} + \vec{c})\).</p>
    <div class="image-row">
            </div>
</div>
            </div>
        </div>
    </div>
    <div id="videoModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="videoTitle">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoBtn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <h2 class="glow-title" id="videoTitle">–û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–µ–æ</h2>
            <div class="video-card-container">
                <div class="video-card" data-video="1">
                    <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞" loading="lazy">
                    <h3>–õ—ñ–Ω—ñ–π–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤ –ø—Ä–æ—Å—Ç–æ—Ä—ñ</h3>
                </div>
                <div class="video-card" data-video="2">
                    <img src="https://img.icons8.com/?size=100&id=o1CR3NjO7Pv8&format=png&color=000000" alt="–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞" loading="lazy">
                    <h3>–î–æ–¥–∞–≤–∞–Ω–Ω—è —ñ –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤</h3>
                </div>
            </div>
        </div>
    </div>
    <div id="videoPlayerModal1" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoPlayerBtn1" aria-label="–ó–∞–∫—Ä–∏—Ç–∏">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="video-player-container">
                <iframe id="youtubePlayer1" width="100%" data-src="https://www.youtube.com/embed/Ksy7XZ1xsR8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    <div id="videoPlayerModal2" class="modal">
        <div class="modal-header">
            <button class="close-btn" id="closeVideoPlayerBtn2" aria-label="–ó–∞–∫—Ä–∏—Ç–∏">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="video-player-container">
                <iframe id="youtubePlayer2" width="100%" data-src="https://www.youtube.com/embed/_4Pfh3N7jWc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    
    <div id="questionsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="questionsTitle">
    <div class="modal-header">
        <button class="close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è" id="closeQuestionsBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <div class="modal-content">
        <div class="flashcard-container">
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>1. –©–æ —Ç–∞–∫–µ –ª—ñ–Ω—ñ–π–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–¶–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è, –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ —ñ –º–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>2. –Ø–∫ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–≤–æ—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤ (–ø—Ä–∞–≤–∏–ª–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞)?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–ö—ñ–Ω–µ—Ü—å –ø–µ—Ä—à–æ–≥–æ –∑‚Äô—î–¥–Ω—É—é—Ç—å —ñ–∑ –ø–æ—á–∞—Ç–∫–æ–º –¥—Ä—É–≥–æ–≥–æ, —Ç–æ–¥—ñ –≤–µ–∫—Ç–æ—Ä —ñ–∑ –ø–æ—á–∞—Ç–∫—É –ø–µ—Ä—à–æ–≥–æ –¥–æ –∫—ñ–Ω—Ü—è –¥—Ä—É–≥–æ–≥–æ —î —ó—Ö–Ω—å–æ—é —Å—É–º–æ—é.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>3. –Ø–∫–µ —Ñ—ñ–∑–∏—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–í–æ–Ω–æ –æ–ø–∏—Å—É—î —Å—É–º–∞—Ä–Ω–µ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è —Ç—ñ–ª–∞ –ø—ñ—Å–ª—è –¥–≤–æ—Ö –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏—Ö –ø–µ—Ä–µ–º—ñ—â–µ–Ω—å.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>4. –Ø–∫ –≤–∏–≥–ª—è–¥–∞—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–í–µ–∫—Ç–æ—Ä–∏ –∑‚Äô—î–¥–Ω—É—é—Ç—å –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ ¬´–ª–∞–Ω—Ü—é–∂–∫–æ–º¬ª, –∞ —Å—É–º–∞—Ä–Ω–∏–π –≤–µ–∫—Ç–æ—Ä —Å–ø–æ–ª—É—á–∞—î –ø–æ—á–∞—Ç–æ–∫ –ø–µ—Ä—à–æ–≥–æ –∑ –∫—ñ–Ω—Ü–µ–º –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>5. –£ —á–æ–º—É –ø–æ–ª—è–≥–∞—î –ø—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–î–≤–∞ –≤–µ–∫—Ç–æ—Ä–∏ –≤—ñ–¥–∫–ª–∞–¥–∞—é—Ç—å —ñ–∑ –æ–¥–Ω—ñ—î—ó —Ç–æ—á–∫–∏, –¥–æ–±—É–¥–æ–≤—É—é—Ç—å –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º, –∞ –¥—ñ–∞–≥–æ–Ω–∞–ª—å —î —ó—Ö–Ω—å–æ—é —Å—É–º–æ—é.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>6. –Ø–∫ –¥–æ–¥–∞—Ç–∏ —Ç—Ä–∏ –Ω–µ–∫–æ–º–ø–ª–∞–Ω–∞—Ä–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∏ (–ø—Ä–∞–≤–∏–ª–æ –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥–∞)?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–í–µ–∫—Ç–æ—Ä–∏ –±–µ—Ä—É—Ç—å –∑—ñ —Å–ø—ñ–ª—å–Ω–æ–≥–æ –ø–æ—á–∞—Ç–∫—É, –±—É–¥—É—é—Ç—å –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥, –∞ –¥—ñ–∞–≥–æ–Ω–∞–ª—å –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –¥–æ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–æ—ó –≤–µ—Ä—à–∏–Ω–∏ —î —ó—Ö–Ω—å–æ—é —Å—É–º–æ—é.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>7. –Ø–∫ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —Ä—ñ–∑–Ω–∏—Ü—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ \(\vec{a} - \vec{b}\)?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–¶–µ –≤–µ–∫—Ç–æ—Ä, —â–æ –∑‚Äô—î–¥–Ω—É—î –∫—ñ–Ω–µ—Ü—å \(\vec{b}\) —ñ–∑ –∫—ñ–Ω—Ü–µ–º \(\vec{a}\), —è–∫—â–æ –≤–æ–Ω–∏ –º–∞—é—Ç—å —Å–ø—ñ–ª—å–Ω–∏–π –ø–æ—á–∞—Ç–æ–∫.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>8. –Ø–∫ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –∑–Ω–∞–π—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –≤–µ–∫—Ç–æ—Ä—ñ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–ë—É–¥—É—é—Ç—å –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –≤–µ–∫—Ç–æ—Ä \(-\vec{b}\) —ñ –¥–æ–¥–∞—é—Ç—å –π–æ–≥–æ –¥–æ \(\vec{a}\).</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>9. –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ –º–Ω–æ–∂–µ–Ω–Ω—ñ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ \(\lambda\)?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–î–æ–≤–∂–∏–Ω–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —É \(|\lambda|\) —Ä–∞–∑—ñ–≤, –∞ –Ω–∞–ø—Ä—è–º–æ–∫ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–Ω–∞–∫–∞ \(\lambda\).</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>10. –Ø–∫–∏–º –±—É–¥–µ –Ω–∞–ø—Ä—è–º–æ–∫ –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä–∏ \(\lambda > 0\) —ñ –ø—Ä–∏ \(\lambda < 0\)?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–ü—Ä–∏ \(\lambda > 0\) –≤—ñ–Ω —Å–ø—ñ–≤–Ω–∞–ø—Ä—è–º–ª–µ–Ω–∏–π –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º, –ø—Ä–∏ \(\lambda < 0\) ‚Äî –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>11. –Ø–∫–∞ –≥–æ–ª–æ–≤–Ω–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –¥–æ–±—É—Ç–∫—É –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>–û—Ç—Ä–∏–º–∞–Ω–∏–π –≤–µ–∫—Ç–æ—Ä –∑–∞–≤–∂–¥–∏ –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–∏–π –ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É.</p>
                    </div>
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>12. –Ø–∫—ñ —î –æ—Å–Ω–æ–≤–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤?</p>
</div>
<div class="flashcard-back">
    <ul>
        <li>–ö–æ–º—É—Ç–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å: \(\vec{a} + \vec{b} = \vec{b} + \vec{a}\)</li>
        <li>–ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å: \((\vec{a} + \vec{b}) + \vec{c} = \vec{a} + (\vec{b} + \vec{c})\)</li>
        <li>–î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω—É–ª—å–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞: \(\vec{a} + \vec{0} = \vec{a}\)</li>
        <li>–°—É–º–∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤: \(\vec{a} + (-\vec{a}) = \vec{0}\)</li>
    </ul>
</div>

                    
                </div>
            </div>
            <div class="flashcard" tabindex="0" role="button" aria-expanded="false">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <p>13. –Ø–∫—ñ —î –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –º–Ω–æ–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —á–∏—Å–ª–æ?</p>
                    </div>
                    <div class="flashcard-back">
                        <p>
                            <ul>
                                <li>–ú–Ω–æ–∂–µ–Ω–Ω—è –Ω–∞ –æ–¥–∏–Ω–∏—Ü—é: \(1 \cdot \vec{a} = \vec{a}\)</li>
                                <li>–ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å: \(\lambda (\mu \vec{a}) = \lambda \mu \vec{a}\)</li>
                                <li>–î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω—ñ—Å—Ç—å —â–æ–¥–æ —á–∏—Å–µ–ª: \((\lambda + \mu) \cdot \vec{a} = \lambda \vec{a} + \mu \vec{a}\)</li>
                                <li>–î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω—ñ—Å—Ç—å —â–æ–¥–æ –≤–µ–∫—Ç–æ—Ä—ñ–≤: \(\mu \cdot (\vec{a} + \vec{b}) = \mu \vec{a} + \mu \vec{b}\)</li>
                            </ul>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    
<div id="trainerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="trainerTitle">
        <div class="modal-header">
            <button class="close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ —Ç—Ä–µ–Ω–∞–∂–µ—Ä" id="closeTrainerBtn">√ó –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="modal-content">
            <div class="trainer-container">
                <div class="question-circle"><h3 id="questionNumber">–ü–∏—Ç–∞–Ω–Ω—è 1</h3></div>
                <div id="questionText"></div>
                <div id="matrixText"></div>
               <div id="canvasWrapper" style="position: relative; display: inline-block;">
  <canvas id="vectorCanvas" width="300" height="300"></canvas>
</div>

                <div class="answer-options">
                    <button class="answer-button" data-answer="0"></button>
                    <button class="answer-button" data-answer="1"></button>
                    <button class="answer-button" data-answer="2"></button>
                    <button class="answer-button" data-answer="3"></button>
                </div>
                <button id="submitAnswerBtn">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                <div class="result-message" id="resultMessage"></div>
                <div class="completion-message" id="completionMessage">
                    <div class="completion-emoji"></div>
                    <h2>–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</h2>
                    <p>–ú–æ–ª–æ–¥–µ—Ü—å!</p>
                    <button id="resetTrainerBtn">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
                </div>
            </div>
        </div>
    </div>

 <script>
    document.addEventListener('DOMContentLoaded', function () {
        const elements = {
            openTheoryBtn: document.getElementById('openTheoryBtn'),
            openVideoBtn: document.getElementById('openVideoBtn'),
            openQuestionsBtn: document.getElementById('openQuestionsBtn'),
            openTrainerBtn: document.getElementById('openTrainerBtn'),
            theoryModal: document.getElementById('theoryModal'),
            videoModal: document.getElementById('videoModal'),
            questionsModal: document.getElementById('questionsModal'),
            trainerModal: document.getElementById('trainerModal'),
            closeTheoryBtn: document.getElementById('closeTheoryBtn'),
            closeVideoBtn: document.getElementById('closeVideoBtn'),
            closeQuestionsBtn: document.getElementById('closeQuestionsBtn'),
            closeTrainerBtn: document.getElementById('closeTrainerBtn'),
            closeVideoPlayerBtn1: document.getElementById('closeVideoPlayerBtn1'),
            closeVideoPlayerBtn2: document.getElementById('closeVideoPlayerBtn2'),
            videoPlayerModal1: document.getElementById('videoPlayerModal1'),
            videoPlayerModal2: document.getElementById('videoPlayerModal2'),
            modalOverlay: document.getElementById('modalOverlay'),
            questionText: document.getElementById('questionText'),
            matrixText: document.getElementById('matrixText'),
            submitAnswerBtn: document.getElementById('submitAnswerBtn'),
            resultMessage: document.getElementById('resultMessage'),
            completionMessage: document.getElementById('completionMessage'),
            resetTrainerBtn: document.getElementById('resetTrainerBtn'),
            youtubePlayer1: document.getElementById('youtubePlayer1'),
            youtubePlayer2: document.getElementById('youtubePlayer2'),
            questionCircle: document.querySelector('.question-circle'),
            vectorCanvas: document.getElementById('vectorCanvas'),
            questionNumber: document.getElementById('questionNumber'),
            answerOptions: document.querySelector('.answer-options')
        };

        // –ú–æ–¥–∞–ª—ñ —Ç–∞ –≤–∫–ª–∞–¥–∫–∏
        const tabButtons = elements.theoryModal?.querySelectorAll('.tab-button');
        const tabContents = elements.theoryModal?.querySelectorAll('.tab-content');

        function closeAllTabs() {
            tabButtons?.forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-expanded', 'false');
            });
            tabContents?.forEach(content => {
                content.classList.remove('active');
            });
        }

        function toggleTab(tabId, button) {
            const targetContent = elements.theoryModal?.querySelector(`#${tabId}`);
            const isActive = button.classList.contains('active');
            closeAllTabs();
            if (!isActive && targetContent) {
                button.classList.add('active');
                button.setAttribute('aria-expanded', 'true');
                targetContent.classList.add('active');
                if (window.MathJax && MathJax.typesetPromise) {
                    MathJax.typesetPromise([targetContent]).then(() => {
                        const modalContent = elements.theoryModal?.querySelector('.modal-content');
                        if (modalContent) modalContent.scrollTop = 0;
                    }).catch(err => console.error('MathJax rendering failed:', err));
                }
            }
        }

        tabButtons?.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');
                toggleTab(tabId, button);
            });
        });

        closeAllTabs();

        let players = {};
        const playerIds = {
            'youtubePlayer1': 'Ksy7XZ1xsR8',
            'youtubePlayer2': '_4Pfh3N7jWc'
        };
        const playerSrcs = {
            'youtubePlayer1': elements.youtubePlayer1?.getAttribute('data-src'),
            'youtubePlayer2': elements.youtubePlayer2?.getAttribute('data-src')
        };

        function loadYouTubeAPI() {
            if (!window.YT) {
                const tag = document.createElement('script');
                tag.src = "https://www.youtube.com/iframe_api";
                const firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            }
        }

        window.onYouTubeIframeAPIReady = function() {
            Object.keys(playerIds).forEach(playerId => {
                const element = elements[playerId];
                if (element) {
                    players[playerId] = new YT.Player(playerId, {
                        videoId: playerIds[playerId],
                        playerVars: { 'autoplay': 0, 'controls': 1, 'rel': 0, 'showinfo': 0 },
                        events: {
                            'onReady': event => {
                                event.target.cueVideoById({ videoId: playerIds[playerId], startSeconds: 0 });
                            }
                        }
                    });
                }
            });
        };

        loadYouTubeAPI();

        function stopAllVideos() {
            Object.keys(players).forEach(playerId => {
                const player = players[playerId];
                const element = elements[playerId];
                if (player && typeof player.stopVideo === 'function') {
                    player.stopVideo();
                }
                if (element) {
                    element.src = '';
                    const parent = element.parentNode;
                    const newIframe = document.createElement('iframe');
                    newIframe.id = playerId;
                    newIframe.setAttribute('data-src', playerSrcs[playerId]);
                    newIframe.setAttribute('frameborder', '0');
                    newIframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                    newIframe.setAttribute('allowfullscreen', '');
                    parent.replaceChild(newIframe, element);
                    elements[playerId] = newIframe;
                    players[playerId] = new YT.Player(playerId, {
                        videoId: playerIds[playerId],
                        playerVars: { 'autoplay': 0, 'controls': 1, 'rel': 0, 'showinfo': 0 },
                        events: {
                            'onReady': event => event.target.cueVideoById({ videoId: playerIds[playerId], startSeconds: 0 })
                        }
                    });
                }
            });
        }

        function openVideoPlayerModal(videoModal, playerId) {
            stopAllVideos();
            toggleModal(elements.videoModal, false);
            toggleModal(videoModal, true);
            const element = elements[playerId];
            if (element && !element.src) {
                element.src = playerSrcs[playerId];
            }
            if (players[playerId] && typeof players[playerId].loadVideoById === 'function') {
                players[playerId].loadVideoById({ videoId: playerIds[playerId], startSeconds: 0 });
            }
        }

        function toggleModal(modal, show) {
            if (!modal) return; // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ null
            const allModals = [
                elements.theoryModal,
                elements.videoModal,
                elements.questionsModal,
                elements.trainerModal,
                elements.videoPlayerModal1,
                elements.videoPlayerModal2
            ].filter(Boolean);
            allModals.forEach(m => {
                if (m && m !== modal) {
                    m.style.display = 'none';
                }
            });
            modal.style.display = show ? 'flex' : 'none';
            elements.modalOverlay.style.display = show ? 'block' : 'none';
            document.body.style.overflow = show ? 'hidden' : 'auto';
            if (show) {
                const closeBtn = modal.querySelector('.close-btn');
                if (closeBtn) closeBtn.focus();
                if (modal === elements.theoryModal) closeAllTabs();
                if (modal === elements.trainerModal) {
                    currentQuestion = generateCubeQuestion();
                    displayQuestion();
                }
                if (window.MathJax && MathJax.typesetPromise) {
                    MathJax.typesetPromise([modal]).then(() => {
                        const modalContent = modal.querySelector('.modal-content');
                        if (modalContent) modalContent.scrollTop = 0;
                    }).catch(err => console.error('MathJax rendering failed:', err));
                }
            }
        }

        // –î–æ–¥–∞—î–º–æ —Å–ª—É—Ö–∞—á—ñ –ø–æ–¥—ñ–π –ª–∏—à–µ –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
        if (elements.openTheoryBtn) elements.openTheoryBtn.addEventListener('click', () => toggleModal(elements.theoryModal, true));
        if (elements.openVideoBtn) elements.openVideoBtn.addEventListener('click', () => toggleModal(elements.videoModal, true));
        if (elements.openQuestionsBtn) elements.openQuestionsBtn.addEventListener('click', () => toggleModal(elements.questionsModal, true));
        if (elements.openTrainerBtn) elements.openTrainerBtn.addEventListener('click', () => toggleModal(elements.trainerModal, true));
        if (elements.closeTheoryBtn) elements.closeTheoryBtn.addEventListener('click', () => toggleModal(elements.theoryModal, false));
        if (elements.closeVideoBtn) elements.closeVideoBtn.addEventListener('click', () => toggleModal(elements.videoModal, false));
        if (elements.closeQuestionsBtn) elements.closeQuestionsBtn.addEventListener('click', () => toggleModal(elements.questionsModal, false));
        if (elements.closeTrainerBtn) elements.closeTrainerBtn.addEventListener('click', () => toggleModal(elements.trainerModal, false));
        if (elements.closeVideoPlayerBtn1) elements.closeVideoPlayerBtn1.addEventListener('click', () => {
            stopAllVideos();
            toggleModal(elements.videoPlayerModal1, false);
            toggleModal(elements.videoModal, true);
        });
        if (elements.closeVideoPlayerBtn2) elements.closeVideoPlayerBtn2.addEventListener('click', () => {
            stopAllVideos();
            toggleModal(elements.videoPlayerModal2, false);
            toggleModal(elements.videoModal, true);
        });
        if (elements.modalOverlay) elements.modalOverlay.addEventListener('click', () => {
            stopAllVideos();
            toggleModal(elements.theoryModal, false);
            toggleModal(elements.videoModal, false);
            toggleModal(elements.questionsModal, false);
            toggleModal(elements.trainerModal, false);
            toggleModal(elements.videoPlayerModal1, false);
            toggleModal(elements.videoPlayerModal2, false);
        });
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') {
                stopAllVideos();
                toggleModal(elements.theoryModal, false);
                toggleModal(elements.videoModal, false);
                toggleModal(elements.questionsModal, false);
                toggleModal(elements.trainerModal, false);
                toggleModal(elements.videoPlayerModal1, false);
                toggleModal(elements.videoPlayerModal2, false);
            }
        });

        document.querySelectorAll('.flashcard').forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('flipped');
                if (window.MathJax && MathJax.typesetPromise) {
                    MathJax.typesetPromise([card]).catch(err => console.error('MathJax rendering failed:', err));
                }
            });
            card.addEventListener('keydown', e => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    card.classList.toggle('flipped');
                    if (window.MathJax && MathJax.typesetPromise) {
                        MathJax.typesetPromise([card]).catch(err => console.error('MathJax rendering failed:', err));
                    }
                }
            });
        });

        document.querySelectorAll('.video-card').forEach(card => {
            card.addEventListener('click', () => {
                const videoNumber = card.getAttribute('data-video');
                const videoModal = elements[`videoPlayerModal${videoNumber}`];
                const playerId = `youtubePlayer${videoNumber}`;
                if (videoModal && playerId) openVideoPlayerModal(videoModal, playerId);
            });
        });

// –ö–æ–¥ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞
let currentQuestionType = 1;
let currentQuestion = null;
let selectedAnswer = null;
let vectorA = null, vectorB = null;
let userVectorC = { start: null, end: null };
let lastDrawTime = 0;

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑–Ω–∞–π–¥–µ–Ω–æ
Object.keys(elements).forEach(key => {
    if (!elements[key]) console.error(`Element ${key} not found in DOM`);
});

function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function generateCubeQuestion() {
    const vertices = {
        A: [0, 0, 0], B: [1, 0, 0], C: [1, 1, 0], D: [0, 1, 0],
        A1: [0, 0, 1], B1: [1, 0, 1], C1: [1, 1, 1], D1: [0, 1, 1]
    };

    const vectorGroups = [
        [
            { name: '\\overrightarrow{AB}', start: 'A', end: 'B' }, // (1, 0, 0)
            { name: '\\overrightarrow{A_1B_1}', start: 'A1', end: 'B1' }, // (1, 0, 0)
            { name: '\\overrightarrow{CD}', start: 'C', end: 'D' }, // (-1, 0, 0)
            { name: '\\overrightarrow{C_1D_1}', start: 'C1', end: 'D1' } // (-1, 0, 0)
        ],
        [
            { name: '\\overrightarrow{BC}', start: 'B', end: 'C' }, // (0, 1, 0)
            { name: '\\overrightarrow{DA}', start: 'D', end: 'A' }, // (0, -1, 0)
            { name: '\\overrightarrow{B_1C_1}', start: 'B1', end: 'C1' }, // (0, 1, 0)
            { name: '\\overrightarrow{D_1A_1}', start: 'D1', end: 'A1' } // (0, -1, 0)
        ],
        [
            { name: '\\overrightarrow{AA_1}', start: 'A', end: 'A1' }, // (0, 0, 1)
            { name: '\\overrightarrow{BB_1}', start: 'B', end: 'B1' }, // (0, 0, 1)
            { name: '\\overrightarrow{CC_1}', start: 'C', end: 'C1' }, // (0, 0, 1)
            { name: '\\overrightarrow{DD_1}', start: 'D', end: 'D1' } // (0, 0, 1)
        ],
        [
            { name: '\\overrightarrow{AC}', start: 'A', end: 'C' }, // (1, 1, 0)
            { name: '\\overrightarrow{BD}', start: 'B', end: 'D' }, // (-1, 1, 0)
            { name: '\\overrightarrow{B_1D_1}', start: 'B1', end: 'D1' } // (-1, 1, 0)
        ]
    ];

    // –í–∏–±–∏—Ä–∞—î–º–æ –æ–¥–Ω—É –≥—Ä—É–ø—É –¥–ª—è –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–∏—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤
    const collinearGroup = vectorGroups[getRandomInt(0, 3)];
    const collinearIndices = shuffle([...Array(collinearGroup.length).keys()]).slice(0, 2);
    const collinearVectors = collinearIndices.map(i => collinearGroup[i]);
    const collinearPair = [collinearVectors[0].name, collinearVectors[1].name];

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–æ—Å—Ç—ñ
    const start1 = vertices[collinearVectors[0].start];
    const end1 = vertices[collinearVectors[0].end];
    const start2 = vertices[collinearVectors[1].start];
    const end2 = vertices[collinearVectors[1].end];
    const vec1 = [end1[0] - start1[0], end1[1] - start1[1], end1[2] - start1[2]];
    const vec2 = [end2[0] - start2[0], end2[1] - start2[1], end2[2] - start2[2]];
    const isCollinear = (vec1[0] * vec2[1] === vec2[0] * vec1[1] && vec1[0] * vec2[2] === vec2[0] * vec1[2] && vec1[1] * vec2[2] === vec2[1] * vec1[2] && (vec1[0] !== 0 || vec1[1] !== 0 || vec1[2] !== 0));

    if (!isCollinear) {
        console.error('Generated non-collinear pair:', collinearPair, vec1, vec2);
        return generateCubeQuestion(); // –ü–æ–≤—Ç–æ—Ä–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è, —è–∫—â–æ –ø–∞—Ä–∞ –Ω–µ –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–∞
    }

    // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –Ω–∞–±—ñ—Ä –≤–µ–∫—Ç–æ—Ä—ñ–≤ - –≤–∫–ª—é—á–∞—î–º–æ –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω—É –ø–∞—Ä—É
    let vectors = [...collinearVectors];
    const usedVectorNames = new Set(collinearVectors.map(v => v.name));
    
    // –î–æ–¥–∞—î–º–æ —â–µ 2 –≤–µ–∫—Ç–æ—Ä–∏ –∑ —ñ–Ω—à–∏—Ö –≥—Ä—É–ø
    while (vectors.length < 4) {
        const groupIndex = getRandomInt(0, vectorGroups.length - 1);
        if (groupIndex !== vectorGroups.indexOf(collinearGroup)) {
            const vec = vectorGroups[groupIndex][getRandomInt(0, vectorGroups[groupIndex].length - 1)];
            if (!usedVectorNames.has(vec.name)) {
                vectors.push(vec);
                usedVectorNames.add(vec.name);
            }
        }
    }
    vectors = shuffle(vectors);

    // –ì–µ–Ω–µ—Ä—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    const answerPairs = [];
    const usedPairs = new Set();
    
    // –î–æ–¥–∞—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É –ø–∞—Ä—É
    const correctPairStr = `${collinearPair[0]}|${collinearPair[1]}`;
    answerPairs.push(collinearPair);
    usedPairs.add(correctPairStr);
    
    // –î–æ–¥–∞—î–º–æ 3 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø–∞—Ä–∏
    while (answerPairs.length < 4) {
        const v1 = vectors[getRandomInt(0, vectors.length - 1)];
        const v2 = vectors[getRandomInt(0, vectors.length - 1)];
        if (v1.name !== v2.name) {
            const pairStr = `${v1.name}|${v2.name}`;
            const reversePairStr = `${v2.name}|${v1.name}`;
            if (!usedPairs.has(pairStr) && !usedPairs.has(reversePairStr)) {
                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ –ø–∞—Ä–∞ –Ω–µ —î –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–æ—é
                const start1 = vertices[v1.start];
                const end1 = vertices[v1.end];
                const start2 = vertices[v2.start];
                const end2 = vertices[v2.end];
                const vec1 = [end1[0] - start1[0], end1[1] - start1[1], end1[2] - start1[2]];
                const vec2 = [end2[0] - start2[0], end2[1] - start2[1], end2[2] - start2[2]];
                const isNonCollinear = !(vec1[0] * vec2[1] === vec2[0] * vec1[1] && vec1[0] * vec2[2] === vec2[0] * vec1[2] && vec1[1] * vec2[2] === vec2[1] * vec1[2] && (vec1[0] !== 0 || vec1[1] !== 0 || vec1[2] !== 0));
                if (isNonCollinear) {
                    answerPairs.push([v1.name, v2.name]);
                    usedPairs.add(pairStr);
                }
            }
        }
    }
    
    const correctAnswer = `(${collinearPair[0]}, ${collinearPair[1]})`;
    const answers = shuffle([...answerPairs.map(pair => `(${pair[0]}, ${pair[1]})`)]);
    const correctIndex = answers.findIndex(answer => answer === correctAnswer);

    console.log('Generated cube question:', {
        collinearPair,
        answers,
        correctIndex,
        vectors: vectors.map(v => ({ name: v.name, start: v.start, end: v.end }))
    });

    const canvas = document.createElement('canvas');
    canvas.width = 300;
    canvas.height = 300;
    const ctx = canvas.getContext('2d');

    const project = (point) => {
        const scale = 100;
        const xOffset = 75;
        const yOffset = 200;
        const x = point[0] * scale + point[2] * scale * 0.5 + xOffset;
        const y = -point[1] * scale - point[2] * scale * 0.5 + yOffset;
        return [x, y];
    };

    // –ú–∞–ª—é—î–º–æ –∫—É–±
    ctx.beginPath();
    const edges = [
        ['A', 'B'], ['B', 'C'], ['C', 'D'], ['D', 'A'],
        ['A1', 'B1'], ['B1', 'C1'], ['C1', 'D1'], ['D1', 'A1'],
        ['A', 'A1'], ['B', 'B1'], ['C', 'C1'], ['D', 'D1']
    ];
    ctx.strokeStyle = 'black';
    ctx.lineWidth = 1.5;
    edges.forEach(([start, end]) => {
        const [x1, y1] = project(vertices[start]);
        const [x2, y2] = project(vertices[end]);
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
    });
    ctx.stroke();

    // –ü—ñ–¥–ø–∏—Å–∏ –≤–µ—Ä—à–∏–Ω
    ctx.fillStyle = 'yellow';
    ctx.font = 'bold 14px Arial';
    ['A', 'B', 'C', 'D', 'A1', 'B1', 'C1', 'D1'].forEach(v => {
        const [x, y] = project(vertices[v]);
        if (v === 'A') ctx.fillText(v, x - 10, y + 20);
        else if (v === 'B') ctx.fillText(v, x, y + 20);
        else if (v === 'C') ctx.fillText(v, x + 10, y);
        else if (v === 'D') ctx.fillText(v, x - 15, y);
        else if (v === 'C1') ctx.fillText(v, x + 10, y);
        else if (v === 'D1') ctx.fillText(v, x - 20, y - 5);
        else ctx.fillText(v, x + 5, y - 5);
    });

    // –ú–∞–ª—é—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏ —á–µ—Ä–≤–æ–Ω–∏–º
    vectors.forEach(v => {
        ctx.beginPath();
        ctx.strokeStyle = 'red';
        ctx.lineWidth = 2;
        const [x1, y1] = project(vertices[v.start]);
        const [x2, y2] = project(vertices[v.end]);
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        const angle = Math.atan2(y2 - y1, x2 - x1);
        ctx.lineTo(x2 - 10 * Math.cos(angle - Math.PI / 6), y2 - 10 * Math.sin(angle - Math.PI / 6));
        ctx.moveTo(x2, y2);
        ctx.lineTo(x2 - 10 * Math.cos(angle + Math.PI / 6), y2 - 10 * Math.sin(angle + Math.PI / 6));
        ctx.stroke();
    });

    return {
        question: '–£ –∫—É–±—ñ \\(ABCDA_{1}B_{1}C_{1}D_{1}\\) –∑–æ–±—Ä–∞–∂–µ–Ω–æ –≤–µ–∫—Ç–æ—Ä–∏. –Ø–∫–∞ –ø–∞—Ä–∞ –≤–µ–∫—Ç–æ—Ä—ñ–≤ —î –∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–æ—é?',
        canvas: canvas.toDataURL(),
        answers: answers,
        correct: correctIndex,
        vectors: vectors
    };
}

           function isValidVectorPair(vecA, vecB) {
    // vecA —ñ vecB ‚Äî —Ü–µ –º–∞—Å–∏–≤–∏ [dx, dy]
    const dotProduct = vecA[0] * vecB[0] + vecA[1] * vecB[1];
    const normA = Math.sqrt(vecA[0] ** 2 + vecA[1] ** 2);
    const normB = Math.sqrt(vecB[0] ** 2 + vecB[1] ** 2);
    
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω–µ–Ω—É–ª—å–æ–≤—ñ –≤–µ–∫—Ç–æ—Ä–∏
    if (normA === 0 || normB === 0) return false;
    
    // –û–±—á–∏—Å–ª—é—î–º–æ –∫–æ—Å–∏–Ω—É—Å –∫—É—Ç–∞
    const cosTheta = dotProduct / (normA * normB);
    
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–µ–∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–æ—Å—Ç—ñ (|cosTheta| < 0.999)
    const isNonCollinear = Math.abs(cosTheta) < 0.999;
    
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥—ñ–∞–ø–∞–∑–æ–Ω—É –∫—É—Ç—ñ–≤: 30¬∞ ‚â§ |Œ∏| ‚â§ 150¬∞ ‚Üí |cos(Œ∏)| ‚â§ ‚àö3/2 ‚âà 0.866
    const isValidAngle = Math.abs(cosTheta) <= Math.sqrt(3) / 2;
    
    // –õ–æ–≥—É–≤–∞–Ω–Ω—è –∫—É—Ç–∞ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
    const angle = Math.acos(Math.min(Math.max(cosTheta, -1), 1)) * 180 / Math.PI;
    console.log('Angle between vectors:', angle.toFixed(2), 'degrees');
    
    return isNonCollinear && isValidAngle;
}
            
function generateVectorQuestion() {
    let tempVectorA, tempVectorB;
    let a_dx, a_dy, b_dx, b_dy;
    let isValid = false;
    let attempts = 0;
    const maxAttempts = 100; // –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª—É

    // –ì–µ–Ω–µ—Ä—É—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏, –¥–æ–∫–∏ –Ω–µ –≤–∏–∫–æ–Ω–∞—é—Ç—å—Å—è –≤—Å—ñ —É–º–æ–≤–∏
    while (!isValid && attempts < maxAttempts) {
        tempVectorA = {
            start: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) },
            end: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) }
        };
        tempVectorB = {
            start: { x: tempVectorA.end.x, y: tempVectorA.end.y },
            end: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) }
        };
        
        a_dx = tempVectorA.end.x - tempVectorA.start.x;
        a_dy = tempVectorA.end.y - tempVectorA.start.y;
        b_dx = tempVectorB.end.x - tempVectorB.start.x;
        b_dy = tempVectorB.end.y - tempVectorB.start.y;
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É—é—á–∏—Ö —É–º–æ–≤
        const isValidExisting = !(
            (a_dx === 0 && a_dy === 0) || // –ù—É–ª—å–æ–≤–∏–π –≤–µ–∫—Ç–æ—Ä a
            (b_dx === 0 && b_dy === 0) || // –ù—É–ª—å–æ–≤–∏–π –≤–µ–∫—Ç–æ—Ä b
            Math.sqrt(a_dx * a_dx + a_dy * a_dy) < 2 || // –ö–æ—Ä–æ—Ç–∫–∏–π –≤–µ–∫—Ç–æ—Ä a
            Math.sqrt(b_dx * b_dx + b_dy * b_dy) < 2 || // –ö–æ—Ä–æ—Ç–∫–∏–π –≤–µ–∫—Ç–æ—Ä b
            Math.abs(a_dx) > 4 || Math.abs(a_dy) > 4 || // –í–µ–ª–∏–∫—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ a
            Math.abs(b_dx) > 4 || Math.abs(b_dy) > 4   // –í–µ–ª–∏–∫—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ b
        );
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–µ–∫–æ–ª—ñ–Ω–µ–∞—Ä–Ω–æ—Å—Ç—ñ —Ç–∞ –∫—É—Ç–∞
        const isValidAngle = isValidVectorPair([a_dx, a_dy], [b_dx, b_dy]);
        
        isValid = isValidExisting && isValidAngle;
        attempts++;
    }
    
    // –Ø–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑–∞ maxAttempts, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥
    if (!isValid) {
        console.warn(`Could not generate valid vector pair after ${maxAttempts} attempts, using fallback vectors`);
        tempVectorA = {
            start: { x: 2, y: 2 },
            end: { x: 4, y: 2 } // \(\vec{a} = (2, 0)\)
        };
        tempVectorB = {
            start: { x: 4, y: 2 },
            end: { x: 4, y: 4 } // \(\vec{b} = (0, 2)\)
        };
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: –∫—É—Ç –º—ñ–∂ (2, 0) —ñ (0, 2) = 90¬∞
        a_dx = tempVectorA.end.x - tempVectorA.start.x;
        a_dy = tempVectorA.end.y - tempVectorA.start.y;
        b_dx = tempVectorB.end.x - tempVectorB.start.x;
        b_dy = tempVectorB.end.y - tempVectorB.start.y;
    }
    
    userVectorC = { start: null, end: null };
    vectorA = tempVectorA; // –û–Ω–æ–≤–ª—é—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É
    vectorB = tempVectorB; // –û–Ω–æ–≤–ª—é—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É
    
    console.log(`Generated vectors: a from (${tempVectorA.start.x}, ${tempVectorA.start.y}) to (${tempVectorA.end.x}, ${tempVectorA.end.y}), b from (${tempVectorB.start.x}, ${tempVectorB.start.y}) to (${tempVectorB.end.x}, ${tempVectorB.end.y})`);
    
    return {
        question: '–ù–∞ —Å—ñ—Ç—Ü—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–æ –≤–µ–∫—Ç–æ—Ä–∏ \\(\\vec{a}\\) —ñ \\(\\vec{b}\\), –∑\'—î–¥–Ω–∞–Ω—ñ —Ç–∞–∫, —â–æ –ø–æ—á–∞—Ç–æ–∫ \\(\\vec{b}\\) –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –∫—ñ–Ω—Ü–µ–º \\(\\vec{a}\\). –ü–æ–±—É–¥—É–π—Ç–µ –≤–µ–∫—Ç–æ—Ä \\(\\vec{c}\\), —â–æ —î —ó—Ö–Ω—å–æ—é —Å—É–º–æ—é \\(\\vec{c} = \\vec{a} + \\vec{b}\\). ',
        vectorA: tempVectorA,
        vectorB: tempVectorB
    };
}

function generateVectorDifferenceQuestion() {
    let tempVectorA, tempVectorB;
    let a_dx, a_dy, b_dx, b_dy;
    let isValid = false;
    let attempts = 0;
    const maxAttempts = 100;

    while (!isValid && attempts < maxAttempts) {
        tempVectorA = {
            start: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) },
            end: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) }
        };
        tempVectorB = {
            start: { x: tempVectorA.start.x, y: tempVectorA.start.y },
            end: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) }
        };

        a_dx = tempVectorA.end.x - tempVectorA.start.x;
        a_dy = tempVectorA.end.y - tempVectorA.start.y;
        b_dx = tempVectorB.end.x - tempVectorB.start.x;
        b_dy = tempVectorB.end.y - tempVectorB.start.y;

        const isValidExisting = !(
            (a_dx === 0 && a_dy === 0) ||
            (b_dx === 0 && b_dy === 0) ||
            Math.sqrt(a_dx * a_dx + a_dy * a_dy) < 2 ||
            Math.sqrt(b_dx * b_dx + b_dy * b_dy) < 2 ||
            Math.abs(a_dx) > 4 || Math.abs(a_dy) > 4 ||
            Math.abs(b_dx) > 4 || Math.abs(b_dy) > 4 ||
            (a_dx === b_dx && a_dy === b_dy)
        );

        const isValidAngle = isValidVectorPair([a_dx, a_dy], [b_dx, b_dy]);
        
        isValid = isValidExisting && isValidAngle;
        attempts++;
    }

    if (!isValid) {
        console.warn(`Could not generate valid vector pair after ${maxAttempts} attempts, using fallback vectors`);
        tempVectorA = {
            start: { x: 2, y: 2 },
            end: { x: 4, y: 2 } // \(\vec{a} = (2, 0)\)
        };
        tempVectorB = {
            start: { x: 2, y: 2 },
            end: { x: 2, y: 4 } // \(\vec{b} = (0, 2)\)
        };
        a_dx = tempVectorA.end.x - tempVectorA.start.x;
        a_dy = tempVectorA.end.y - tempVectorA.start.y;
        b_dx = tempVectorB.end.x - tempVectorB.start.x;
        b_dy = tempVectorB.end.y - tempVectorB.start.y;
    }

    userVectorC = { start: null, end: null };
    vectorA = tempVectorA;
    vectorB = tempVectorB;

    console.log(`Generated vectors for difference: a from (${tempVectorA.start.x}, ${tempVectorA.start.y}) to (${tempVectorA.end.x}, ${tempVectorA.end.y}), b from (${tempVectorB.start.x}, ${tempVectorB.start.y}) to (${tempVectorB.end.x}, ${tempVectorB.end.y})`);

    return {
        question: '–ù–∞ —Å—ñ—Ç—Ü—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–æ –≤–µ–∫—Ç–æ—Ä–∏ \\(\\vec{a}\\) —ñ \\(\\vec{b}\\), –∑\'—î–¥–Ω–∞–Ω—ñ —Ç–∞–∫, —â–æ —ó—Ö –ø–æ—á–∞—Ç–∫–∏ –∑–±—ñ–≥–∞—é—Ç—å—Å—è. –ü–æ–±—É–¥—É–π—Ç–µ –≤–µ–∫—Ç–æ—Ä \\(\\vec{c}\\), —â–æ —î —ó—Ö–Ω—å–æ—é —Ä—ñ–∑–Ω–∏—Ü–µ—é \\(\\vec{c} = \\vec{a} - \\vec{b}\\). ',
        vectorA: tempVectorA,
        vectorB: tempVectorB
    };
}
            
function generateVectorParallelogramQuestion() {
    let tempVectorA, tempVectorB;
    let a_dx, a_dy, b_dx, b_dy;
    let isValid = false;
    let attempts = 0;
    const maxAttempts = 100;

    while (!isValid && attempts < maxAttempts) {
        tempVectorA = {
            start: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) },
            end: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) }
        };
        tempVectorB = {
            start: { x: tempVectorA.start.x, y: tempVectorA.start.y },
            end: { x: getRandomInt(2, 7), y: getRandomInt(2, 7) }
        };

        a_dx = tempVectorA.end.x - tempVectorA.start.x;
        a_dy = tempVectorA.end.y - tempVectorA.start.y;
        b_dx = tempVectorB.end.x - tempVectorB.start.x;
        b_dy = tempVectorB.end.y - tempVectorB.start.y;

        const isValidExisting = !(
            (a_dx === 0 && a_dy === 0) ||
            (b_dx === 0 && b_dy === 0) ||
            Math.sqrt(a_dx * a_dx + a_dy * a_dy) < 2 ||
            Math.sqrt(b_dx * b_dx + b_dy * b_dy) < 2 ||
            Math.abs(a_dx) > 4 || Math.abs(a_dy) > 4 ||
            Math.abs(b_dx) > 4 || Math.abs(b_dy) > 4 ||
            (a_dx === b_dx && a_dy === b_dy)
        );

        const isValidAngle = isValidVectorPair([a_dx, a_dy], [b_dx, b_dy]);
        
        isValid = isValidExisting && isValidAngle;
        attempts++;
    }

    if (!isValid) {
        console.warn(`Could not generate valid vector pair after ${maxAttempts} attempts, using fallback vectors`);
        tempVectorA = {
            start: { x: 2, y: 2 },
            end: { x: 4, y: 2 } // \(\vec{a} = (2, 0)\)
        };
        tempVectorB = {
            start: { x: 2, y: 2 },
            end: { x: 2, y: 4 } // \(\vec{b} = (0, 2)\)
        };
        a_dx = tempVectorA.end.x - tempVectorA.start.x;
        a_dy = tempVectorA.end.y - tempVectorA.start.y;
        b_dx = tempVectorB.end.x - tempVectorB.start.x;
        b_dy = tempVectorB.end.y - tempVectorB.start.y;
    }

    userVectorC = { start: null, end: null };
    vectorA = tempVectorA;
    vectorB = tempVectorB;

    console.log(`Generated vectors for parallelogram: a from (${tempVectorA.start.x}, ${tempVectorA.start.y}) to (${tempVectorA.end.x}, ${tempVectorA.end.y}), b from (${tempVectorB.start.x}, ${tempVectorB.start.y}) to (${tempVectorB.end.x}, ${tempVectorB.end.y})`);

    return {
        question: '–ù–∞ —Å—ñ—Ç—Ü—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–æ –≤–µ–∫—Ç–æ—Ä–∏ \\(\\vec{a}\\) —ñ \\(\\vec{b}\\), —â–æ –º–∞—é—Ç—å —Å–ø—ñ–ª—å–Ω–∏–π –ø–æ—á–∞—Ç–æ–∫. –ü–æ–±—É–¥—É–π—Ç–µ –≤–µ–∫—Ç–æ—Ä \\(\\vec{c}\\), —â–æ —î —ó—Ö–Ω—å–æ—é —Å—É–º–æ—é \\(\\vec{c} = \\vec{a} + \\vec{b}\\) –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞.',
        vectorA: tempVectorA,
        vectorB: tempVectorB
    };
}
          function generateCubeVectorSumQuestion(groupIndex = null) {
    const vertices = {
        A: [0, 0, 0], B: [1, 0, 0], C: [1, 1, 0], D: [0, 1, 0],
        A1: [0, 0, 1], B1: [1, 0, 1], C1: [1, 1, 1], D1: [0, 1, 1]
    };

    const vectorGroups = [
        { vectors: [{ name: '\\overrightarrow{AA_1}', start: 'A', end: 'A1' }, { name: '\\overrightarrow{AB}', start: 'A', end: 'B' }, { name: '\\overrightarrow{AD}', start: 'A', end: 'D' }], result: { name: '\\overrightarrow{AC_1}', start: 'A', end: 'C1' } },
        { vectors: [{ name: '\\overrightarrow{DA}', start: 'D', end: 'A' }, { name: '\\overrightarrow{DD_1}', start: 'D', end: 'D1' }, { name: '\\overrightarrow{DC}', start: 'D', end: 'C' }], result: { name: '\\overrightarrow{DB_1}', start: 'D', end: 'B1' } },
        { vectors: [{ name: '\\overrightarrow{CD}', start: 'C', end: 'D' }, { name: '\\overrightarrow{CB}', start: 'C', end: 'B' }, { name: '\\overrightarrow{CC_1}', start: 'C', end: 'C1' }], result: { name: '\\overrightarrow{CA_1}', start: 'C', end: 'A1' } },
        { vectors: [{ name: '\\overrightarrow{BA}', start: 'B', end: 'A' }, { name: '\\overrightarrow{BC}', start: 'B', end: 'C' }, { name: '\\overrightarrow{BB_1}', start: 'B', end: 'B1' }], result: { name: '\\overrightarrow{BD_1}', start: 'B', end: 'D1' } },
        { vectors: [{ name: '\\overrightarrow{A_1A}', start: 'A1', end: 'A' }, { name: '\\overrightarrow{A_1B_1}', start: 'A1', end: 'B1' }, { name: '\\overrightarrow{A_1D_1}', start: 'A1', end: 'D1' }], result: { name: '\\overrightarrow{A_1C}', start: 'A1', end: 'C' } },
        { vectors: [{ name: '\\overrightarrow{D_1A_1}', start: 'D1', end: 'A1' }, { name: '\\overrightarrow{D_1D}', start: 'D1', end: 'D' }, { name: '\\overrightarrow{D_1C_1}', start: 'D1', end: 'C1' }], result: { name: '\\overrightarrow{D_1B}', start: 'D1', end: 'B' } },
        { vectors: [{ name: '\\overrightarrow{C_1D_1}', start: 'C1', end: 'D1' }, { name: '\\overrightarrow{C_1B_1}', start: 'C1', end: 'B1' }, { name: '\\overrightarrow{C_1C}', start: 'C1', end: 'C' }], result: { name: '\\overrightarrow{C_1A}', start: 'C1', end: 'A' } },
        { vectors: [{ name: '\\overrightarrow{B_1A_1}', start: 'B1', end: 'A1' }, { name: '\\overrightarrow{B_1C_1}', start: 'B1', end: 'C1' }, { name: '\\overrightarrow{B_1B}', start: 'B1', end: 'B' }], result: { name: '\\overrightarrow{B_1D}', start: 'B1', end: 'D' } }
    ];

    let selectedGroupIndex = groupIndex !== null ? groupIndex : getRandomInt(0, vectorGroups.length - 1);
    const selectedGroup = vectorGroups[selectedGroupIndex];

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ –≤–µ–∫—Ç–æ—Ä—ñ–≤
    const vectorNames = selectedGroup.vectors.map(v => v.name);
    const uniqueVectorNames = new Set(vectorNames);
    if (uniqueVectorNames.size !== vectorNames.length) {
        console.error('Duplicate vectors detected in group:', vectorNames);
        selectedGroupIndex = (selectedGroupIndex + 1) % vectorGroups.length;
        return generateCubeVectorSumQuestion(selectedGroupIndex);
    }

    userVectorC = { start: null, end: null };

    const canvas = document.createElement('canvas');
    canvas.width = 300;
    canvas.height = 350;
    const ctx = canvas.getContext('2d');

    const project = (point) => {
        const scale = 100;
        const xOffset = 75;
        const yOffset = 200;
        const x = point[0] * scale + point[2] * scale * 0.5 + xOffset;
        const y = -point[1] * scale - point[2] * scale * 0.5 + yOffset;
        return [x, y];
    };

    // –ú–∞–ª—é—î–º–æ –∫—É–±
    ctx.beginPath();
    const edges = [
        ['A', 'B'], ['B', 'C'], ['C', 'D'], ['D', 'A'],
        ['A1', 'B1'], ['B1', 'C1'], ['C1', 'D1'], ['D1', 'A1'],
        ['A', 'A1'], ['B', 'B1'], ['C', 'C1'], ['D', 'D1']
    ];
    ctx.strokeStyle = 'black';
    ctx.lineWidth = 1.5;
    edges.forEach(([start, end]) => {
        const [x1, y1] = project(vertices[start]);
        const [x2, y2] = project(vertices[end]);
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
    });
    ctx.stroke();

    // –ü—ñ–¥–ø–∏—Å–∏ –≤–µ—Ä—à–∏–Ω
    ctx.fillStyle = 'black';
    ctx.font = 'bold 14px Arial';
    ['A', 'B', 'C', 'D', 'A1', 'B1', 'C1', 'D1'].forEach(v => {
        const [x, y] = project(vertices[v]);
        if (v === 'A') ctx.fillText(v, x - 10, y + 20);
        else if (v === 'B') ctx.fillText(v, x, y + 20);
        else if (v === 'C') ctx.fillText(v, x + 10, y);
        else if (v === 'D') ctx.fillText(v, x - 15, y);
        else if (v === 'C1') ctx.fillText(v, x + 10, y);
        else if (v === 'D1') ctx.fillText(v, x - 20, y - 5);
        else ctx.fillText(v, x + 5, y - 5);
    });

    // –ú–∞–ª—é—î–º–æ —Ç—Ä–∏ –≤–µ–∫—Ç–æ—Ä–∏ —á–µ—Ä–≤–æ–Ω–∏–º
    selectedGroup.vectors.forEach(v => {
        ctx.beginPath();
        ctx.strokeStyle = 'red';
        ctx.lineWidth = 2;
        const [x1, y1] = project(vertices[v.start]);
        const [x2, y2] = project(vertices[v.end]);
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        const angle = Math.atan2(y2 - y1, x2 - x1);
        ctx.lineTo(x2 - 10 * Math.cos(angle - Math.PI / 6), y2 - 10 * Math.sin(angle - Math.PI / 6));
        ctx.moveTo(x2, y2);
        ctx.lineTo(x2 - 10 * Math.cos(angle + Math.PI / 6), y2 - 10 * Math.sin(angle + Math.PI / 6));
        ctx.stroke();

        // –î–æ–¥–∞—î–º–æ –ø—ñ–¥–ø–∏—Å–∏ –¥–æ –≤–µ–∫—Ç–æ—Ä—ñ–≤
        const midX = (x1 + x2) / 2;
        const midY = (y1 + y2) / 2;
        const dx = x2 - x1;
        const dy = y2 - y1;
        const len = Math.sqrt(dx * dx + dy * dy) || 1;
        const offset = 20;
        const offsetX = -dy / len * offset;
        const offsetY = dx / len * offset;

        ctx.fillStyle = 'red';
        ctx.font = 'bold 14px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(v.name.replace(/\\overrightarrow\{([A-Za-z1-9_]+)\}/, '$1'), midX + offsetX, midY + offsetY);
    });

    console.log('Generated cube vector sum question:', {
        groupIndex: selectedGroupIndex,
        vectors: selectedGroup.vectors.map(v => v.name),
        result: selectedGroup.result.name
    });

    // –§–æ—Ä–º—É—î–º–æ —Ç–µ–∫—Å—Ç –ø–∏—Ç–∞–Ω–Ω—è –∑ —è–≤–Ω–∏–º –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è–º –≤–µ–∫—Ç–æ—Ä—ñ–≤ —è–∫ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤
    const vectorList = selectedGroup.vectors.map(v => `\\(${v.name}\\)`).join(', ');
    return {
        question: `–£ –∫—É–±—ñ \\(ABCDA_{1}B_{1}C_{1}D_{1}\\) –∑–æ–±—Ä–∞–∂–µ–Ω–æ –≤–µ–∫—Ç–æ—Ä–∏ ${vectorList}. –ü–æ–±—É–¥—É–π—Ç–µ –≤–µ–∫—Ç–æ—Ä \\(\\vec{c}\\), —â–æ —î —ó—Ö–Ω—å–æ—é —Å—É–º–æ—é.`,
        canvas: canvas.toDataURL(),
        vectors: selectedGroup.vectors,
        correct: selectedGroup.result,
        groupIndex: selectedGroupIndex
    };
}
function generateVectorMultipleQuestion() {
    // –§—ñ–∫—Å–æ–≤–∞–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏
    const examples = [
        // –ü—Ä–∏–∫–ª–∞–¥ 1: –í—ñ–¥–ø–æ–≤—ñ–¥—å -2\vec{a} = \vec{c}
        {
            vectorA: {
                start: { x: 3, y: 2 },
                end: { x: 5, y: 2 } // \vec{a} = (2, 0)
            },
            vectors: [
                {
                    name: '\\overrightarrow{b}',
                    multiplier: 0.5,
                    color: 'green',
                    vector: {
                        start: { x: 6, y: 4 },
                        end: { x: 7, y: 4 } // 0.5\vec{a} = (1, 0)
                    }
                },
                {
                    name: '\\overrightarrow{c}',
                    multiplier: -2,
                    color: 'blue',
                    vector: {
                        start: { x: 5, y: 6 },
                        end: { x: 1, y: 6 } // -2\vec{a} = (-4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{d}',
                    multiplier: 2,
                    color: 'purple',
                    vector: {
                        start: { x: 2, y: 8 },
                        end: { x: 6, y: 8 } // 2\vec{a} = (4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{f}',
                    multiplier: -0.5,
                    color: 'orange',
                    vector: {
                        start: { x: 2, y: 9 },
                        end: { x: 1, y: 9 } // -0.5\vec{a} = (-1, 0)
                    }
                }
            ],
            multiplier: -2, // –í—ñ–¥–ø–æ–≤—ñ–¥—å: \vec{c}
            correctVectorName: '\\overrightarrow{c}' // –ù–∞–∑–≤–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞
        },
        // –ü—Ä–∏–∫–ª–∞–¥ 2: –í—ñ–¥–ø–æ–≤—ñ–¥—å -\vec{a}
        {
            vectorA: {
                start: { x: 3, y: 2 },
                end: { x: 5, y: 4 } // \vec{a} = (2, 2)
            },
            vectors: [
                {
                    name: '\\overrightarrow{b}',
                    multiplier: 0.5,
                    color: 'green',
                    vector: {
                        start: { x: 6, y: 4 },
                        end: { x: 7, y: 5 } // 0.5\vec{a} = (1, 1)
                    }
                },
                {
                    name: '\\overrightarrow{c}',
                    multiplier: -1,
                    color: 'blue',
                    vector: {
                        start: { x: 5, y: 6 },
                        end: { x: 3, y: 4 } // -\vec{a} = (-2, -2)
                    }
                },
                {
                    name: '\\overrightarrow{d}',
                    multiplier: 2,
                    color: 'purple',
                    vector: {
                        start: { x: 2, y: 8 },
                        end: { x: 6, y: 12 } // 2\vec{a} = (4, 4)
                    }
                },
                {
                    name: '\\overrightarrow{f}',
                    multiplier: -0.5,
                    color: 'orange',
                    vector: {
                        start: { x: 2, y: 9 },
                        end: { x: 1, y: 8 } // -0.5\vec{a} = (-1, -1)
                    }
                }
            ],
            multiplier: -1, // –í—ñ–¥–ø–æ–≤—ñ–¥—å: \vec{c}
            correctVectorName: '\\overrightarrow{c}'
        },
        // –ü—Ä–∏–∫–ª–∞–¥ 3: –í—ñ–¥–ø–æ–≤—ñ–¥—å 0.5\vec{a} = \vec{b}
        {
            vectorA: {
                start: { x: 3, y: 2 },
                end: { x: 5, y: 2 } // \vec{a} = (2, 0)
            },
            vectors: [
                {
                    name: '\\overrightarrow{b}',
                    multiplier: 0.5,
                    color: 'green',
                    vector: {
                        start: { x: 6, y: 4 },
                        end: { x: 7, y: 4 } // 0.5\vec{a} = (1, 0)
                    }
                },
                {
                    name: '\\overrightarrow{c}',
                    multiplier: -2,
                    color: 'blue',
                    vector: {
                        start: { x: 5, y: 6 },
                        end: { x: 1, y: 6 } // -2\vec{a} = (-4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{d}',
                    multiplier: 1.5,
                    color: 'purple',
                    vector: {
                        start: { x: 2, y: 8 },
                        end: { x: 5, y: 8 } // 1.5\vec{a} = (3, 0)
                    }
                },
                {
                    name: '\\overrightarrow{f}',
                    multiplier: -0.5,
                    color: 'orange',
                    vector: {
                        start: { x: 2, y: 9 },
                        end: { x: 1, y: 9 } // -0.5\vec{a} = (-1, 0)
                    }
                }
            ],
            multiplier: 0.5, // –í—ñ–¥–ø–æ–≤—ñ–¥—å: \vec{b}
            correctVectorName: '\\overrightarrow{b}'
        },
        // –ü—Ä–∏–∫–ª–∞–¥ 4: –í—ñ–¥–ø–æ–≤—ñ–¥—å -0.5\vec{a} = \vec{f}
        {
            vectorA: {
                start: { x: 3, y: 2 },
                end: { x: 5, y: 2 } // \vec{a} = (2, 0)
            },
            vectors: [
                {
                    name: '\\overrightarrow{b}',
                    multiplier: 0.5,
                    color: 'green',
                    vector: {
                        start: { x: 6, y: 4 },
                        end: { x: 7, y: 4 } // 0.5\vec{a} = (1, 0)
                    }
                },
                {
                    name: '\\overrightarrow{c}',
                    multiplier: -2,
                    color: 'blue',
                    vector: {
                        start: { x: 5, y: 6 },
                        end: { x: 1, y: 6 } // -2\vec{a} = (-4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{d}',
                    multiplier: 1.5,
                    color: 'purple',
                    vector: {
                        start: { x: 2, y: 8 },
                        end: { x: 5, y: 8 } // 1.5\vec{a} = (3, 0)
                    }
                },
                {
                    name: '\\overrightarrow{f}',
                    multiplier: -0.5,
                    color: 'orange',
                    vector: {
                        start: { x: 2, y: 9 },
                        end: { x: 1, y: 9 } // -0.5\vec{a} = (-1, 0)
                    }
                }
            ],
            multiplier: -0.5, // –í—ñ–¥–ø–æ–≤—ñ–¥—å: \vec{f}
            correctVectorName: '\\overrightarrow{f}'
        },
        // –ü—Ä–∏–∫–ª–∞–¥ 5: –í—ñ–¥–ø–æ–≤—ñ–¥—å 2\vec{a} = \vec{d}
        {
            vectorA: {
                start: { x: 3, y: 2 },
                end: { x: 5, y: 2 } // \vec{a} = (2, 0)
            },
            vectors: [
                {
                    name: '\\overrightarrow{b}',
                    multiplier: 0.5,
                    color: 'green',
                    vector: {
                        start: { x: 6, y: 4 },
                        end: { x: 7, y: 4 } // 0.5\vec{a} = (1, 0)
                    }
                },
                {
                    name: '\\overrightarrow{c}',
                    multiplier: -2,
                    color: 'blue',
                    vector: {
                        start: { x: 5, y: 6 },
                        end: { x: 1, y: 6 } // -2\vec{a} = (-4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{d}',
                    multiplier: 2,
                    color: 'purple',
                    vector: {
                        start: { x: 2, y: 8 },
                        end: { x: 6, y: 8 } // 2\vec{a} = (4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{f}',
                    multiplier: -0.5,
                    color: 'orange',
                    vector: {
                        start: { x: 2, y: 9 },
                        end: { x: 1, y: 9 } // -0.5\vec{a} = (-1, 0)
                    }
                }
            ],
            multiplier: 2, // –í—ñ–¥–ø–æ–≤—ñ–¥—å: \vec{d}
            correctVectorName: '\\overrightarrow{d}'
        },
        // –ü—Ä–∏–∫–ª–∞–¥ 6: –í—ñ–¥–ø–æ–≤—ñ–¥—å 1.5\vec{a} = \vec{d}
        {
            vectorA: {
                start: { x: 3, y: 2 },
                end: { x: 5, y: 2 } // \vec{a} = (2, 0)
            },
            vectors: [
                {
                    name: '\\overrightarrow{b}',
                    multiplier: 0.5,
                    color: 'green',
                    vector: {
                        start: { x: 6, y: 4 },
                        end: { x: 7, y: 4 } // 0.5\vec{a} = (1, 0)
                    }
                },
                {
                    name: '\\overrightarrow{c}',
                    multiplier: -2,
                    color: 'blue',
                    vector: {
                        start: { x: 5, y: 6 },
                        end: { x: 1, y: 6 } // -2\vec{a} = (-4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{d}',
                    multiplier: 1.5,
                    color: 'purple',
                    vector: {
                        start: { x: 2, y: 8 },
                        end: { x: 5, y: 8 } // 1.5\vec{a} = (3, 0)
                    }
                },
                {
                    name: '\\overrightarrow{f}',
                    multiplier: -0.5,
                    color: 'orange',
                    vector: {
                        start: { x: 2, y: 9 },
                        end: { x: 1, y: 9 } // -0.5\vec{a} = (-1, 0)
                    }
                }
            ],
            multiplier: 1.5, // –í—ñ–¥–ø–æ–≤—ñ–¥—å: \vec{d}
            correctVectorName: '\\overrightarrow{d}'
        },
        // –ü—Ä–∏–∫–ª–∞–¥ 7: –í—ñ–¥–ø–æ–≤—ñ–¥—å -1.5\vec{a} = \vec{f}
        {
            vectorA: {
                start: { x: 3, y: 2 },
                end: { x: 5, y: 2 } // \vec{a} = (2, 0)
            },
            vectors: [
                {
                    name: '\\overrightarrow{b}',
                    multiplier: 0.5,
                    color: 'green',
                    vector: {
                        start: { x: 6, y: 4 },
                        end: { x: 7, y: 4 } // 0.5\vec{a} = (1, 0)
                    }
                },
                {
                    name: '\\overrightarrow{c}',
                    multiplier: -2,
                    color: 'blue',
                    vector: {
                        start: { x: 5, y: 6 },
                        end: { x: 1, y: 6 } // -2\vec{a} = (-4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{d}',
                    multiplier: 2,
                    color: 'purple',
                    vector: {
                        start: { x: 2, y: 8 },
                        end: { x: 6, y: 8 } // 2\vec{a} = (4, 0)
                    }
                },
                {
                    name: '\\overrightarrow{f}',
                    multiplier: -1.5,
                    color: 'orange',
                    vector: {
                        start: { x: 2, y: 9 },
                        end: { x: -1, y: 9 } // -1.5\vec{a} = (-3, 0)
                    }
                }
            ],
            multiplier: -1.5, // –í—ñ–¥–ø–æ–≤—ñ–¥—å: \vec{f}
            correctVectorName: '\\overrightarrow{f}'
        }
    ];

    // –í–∏–ø–∞–¥–∫–æ–≤–∏–π –≤–∏–±—ñ—Ä –ø—Ä–∏–∫–ª–∞–¥—É
    const selectedExample = examples[Math.floor(Math.random() * examples.length)];
    
    // –°—Ç–≤–æ—Ä—é—î–º–æ –º–∞—Å–∏–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    const answers = selectedExample.vectors.map(v => v.name);
    const originalVectors = [...selectedExample.vectors]; // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫
    const shuffledAnswers = shuffle([...answers]); // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    
    // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –ø—ñ—Å–ª—è –ø–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è
    const correctIndex = shuffledAnswers.indexOf(selectedExample.correctVectorName);

    console.log('Generated vector multiple question:', {
        vectorA: `from (${selectedExample.vectorA.start.x}, ${selectedExample.vectorA.start.y}) to (${selectedExample.vectorA.end.x}, ${selectedExample.vectorA.end.y})`,
        multiplier: selectedExample.multiplier,
        correctAnswer: selectedExample.correctVectorName,
        correctIndex: correctIndex,
        answers: shuffledAnswers,
        vectors: selectedExample.vectors.map(v => ({
            name: v.name,
            start: `(${v.vector.start.x}, ${v.vector.start.y})`,
            end: `(${v.vector.end.x}, ${v.vector.end.y})`,
            color: v.color
        }))
    });

    return {
        question: `–ù–∞ —Å—ñ—Ç—Ü—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–æ –≤–µ–∫—Ç–æ—Ä \\(\\vec{a}\\) —Ç–∞ –≤–µ–∫—Ç–æ—Ä–∏ \\(\\overrightarrow{b}\\), \\(\\overrightarrow{c}\\), \\(\\overrightarrow{d}\\), \\(\\overrightarrow{f}\\). –Ø–∫–∏–π —ñ–∑ –≤–µ–∫—Ç–æ—Ä—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î \\(${selectedExample.multiplier}\\vec{a}\\)?`,
        vectorA: selectedExample.vectorA,
        vectors: originalVectors, // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏ –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
        answers: shuffledAnswers, // –ü–µ—Ä–µ–º—ñ—à–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        correct: correctIndex // –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –ø—ñ—Å–ª—è –ø–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è
    };
}

                        
function drawVectorQuestion() {
    const now = performance.now();
    if (now - lastDrawTime < 50) return;
    lastDrawTime = now;

    const canvas = elements.vectorCanvas;
    if (!canvas) {
        console.error('vectorCanvas is not defined');
        return;
    }
    const ctx = canvas.getContext('2d');
    if (!ctx) {
        console.error('Canvas context is not defined');
        return;
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);

     if (currentQuestionType === 5) {
        // –ö–æ–¥ –¥–ª—è –∫—É–±–∞ (–±–µ–∑ –∑–º—ñ–Ω)
        const vertices = {
            A: [0, 0, 0], B: [1, 0, 0], C: [1, 1, 0], D: [0, 1, 0],
            A1: [0, 0, 1], B1: [1, 0, 1], C1: [1, 1, 1], D1: [0, 1, 1]
        };


        const project = (point) => {
            const scale = 100;
            const xOffset = 75;
            const yOffset = 200;
            const x = point[0] * scale + point[2] * scale * 0.5 + xOffset;
            const y = -point[1] * scale - point[2] * scale * 0.5 + yOffset;
            return [x, y];
        };

        // –ú–∞–ª—é—î–º–æ –∫—É–±
        ctx.beginPath();
        const edges = [
            ['A', 'B'], ['B', 'C'], ['C', 'D'], ['D', 'A'],
            ['A1', 'B1'], ['B1', 'C1'], ['C1', 'D1'], ['D1', 'A1'],
            ['A', 'A1'], ['B', 'B1'], ['C', 'C1'], ['D', 'D1']
        ];
        ctx.strokeStyle = 'black';
        ctx.lineWidth = 1.5;
        edges.forEach(([start, end]) => {
            const [x1, y1] = project(vertices[start]);
            const [x2, y2] = project(vertices[end]);
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
        });
        ctx.stroke();

        // –ú–∞–ª—é—î–º–æ –ø—ñ–¥–ø–∏—Å–∏ –≤–µ—Ä—à–∏–Ω
        ctx.fillStyle = 'yellow';
        ctx.font = 'bold 14px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ['A', 'B', 'C', 'D', 'A1', 'B1', 'C1', 'D1'].forEach(v => {
            const [x, y] = project(vertices[v]);
            if (v === 'A') ctx.fillText(v, x - 10, y + 20);
            else if (v === 'B') ctx.fillText(v, x, y + 20);
            else if (v === 'C') ctx.fillText(v, x + 15, y);
            else if (v === 'D') ctx.fillText(v, x - 15, y);
            else if (v === 'C1') ctx.fillText(v, x + 15, y);
            else if (v === 'D1') ctx.fillText(v, x - 20, y - 5);
            else ctx.fillText(v, x + 15, y - 10);
        });

        // –ú–∞–ª—é—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏ –∑ currentQuestion.vectors
        currentQuestion.vectors.forEach(v => {
            ctx.beginPath();
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 2;
            const [x1, y1] = project(vertices[v.start]);
            const [x2, y2] = project(vertices[v.end]);
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            const angle = Math.atan2(y2 - y1, x2 - x1);
            ctx.lineTo(x2 - 10 * Math.cos(angle - Math.PI / 6), y2 - 10 * Math.sin(angle - Math.PI / 6));
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - 10 * Math.cos(angle + Math.PI / 6), y2 - 10 * Math.sin(angle + Math.PI / 6));
            ctx.stroke();
        });

        // –ú–∞–ª—é—î–º–æ userVectorC.start
        if (userVectorC.start && userVectorC.start.vertex) {
            const [startX, startY] = project(vertices[userVectorC.start.vertex]);
            ctx.beginPath();
            ctx.fillStyle = '#e74c3c';
            ctx.arc(startX, startY, 4, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = 'red';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'bottom';
            ctx.fillText('START', startX, startY - 15);
            console.log(`Drawing START at (${startX}, ${startY}) for vertex ${userVectorC.start.vertex}`);
        }

        // –ú–∞–ª—é—î–º–æ userVectorC —à—Ç—Ä–∏—Ö–ø—É–Ω–∫—Ç–∏—Ä–Ω–æ—é –ª—ñ–Ω—ñ—î—é
        if (userVectorC.start && userVectorC.end && userVectorC.start.vertex && userVectorC.end.vertex) {
            const [x1, y1] = project(vertices[userVectorC.start.vertex]);
            const [x2, y2] = project(vertices[userVectorC.end.vertex]);
            ctx.beginPath();
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            const angle = Math.atan2(y2 - y1, x2 - x1);
            const arrowLength = 12;
            ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI / 4), y2 - arrowLength * Math.sin(angle - Math.PI / 4));
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI / 4), y2 - arrowLength * Math.sin(angle + Math.PI / 4));
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.beginPath();
            ctx.fillStyle = '#e74c3c';
            ctx.arc(x1, y1, 4, 0, 2 * Math.PI);
            ctx.arc(x2, y2, 4, 0, 2 * Math.PI);
            ctx.fill();

            // –î–æ–¥–∞—î–º–æ –ø—ñ–¥–ø–∏—Å –¥–ª—è userVectorC
            const midX = (x1 + x2) / 2;
            const midY = (y1 + y2) / 2;
            const dx = x2 - x1;
            const dy = y2 - y1;
            const len = Math.sqrt(dx * dx + dy * dy) || 1;
            const offset = 10;
            let offsetX = -dy / len * offset;
            let offsetY = dx / len * offset;
            let labelX = midX + offsetX;
            let labelY = midY + offsetY;

            if (Math.abs(dx) < 0.1) { // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π
                labelX = midX + offset;
                labelY = midY;
            } else if (Math.abs(dy) < 0.1) { // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π
                labelX = midX;
                labelY = midY - offset;
            }

            ctx.fillStyle = 'red';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('c', labelX, labelY);

            const textWidth = ctx.measureText('c').width;
            const arrowY = labelY - 8;
            ctx.beginPath();
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 1;
            ctx.moveTo(labelX - textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2 - 4, arrowY - 4);
            ctx.moveTo(labelX + textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2 - 4, arrowY + 4);
            ctx.stroke();

            console.log(`Drawing userVectorC from (${x1}, ${y1}) to (${x2}, ${y2}) with label at (${labelX}, ${labelY})`);
        }
    } else {
        // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–º—ñ—Ä canvas –¥–ª—è —Å—ñ—Ç–∫–∏ (10x10 –∞–±–æ 13x13)
        canvas.width = 300; // –î–ª—è 10x10
        // canvas.width = 390; // –î–ª—è 13x13
        canvas.height = canvas.width;
        ctx.fillStyle = '#ecf0f1';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.strokeStyle = '#bdc3c7';
        ctx.lineWidth = 0.5;
        const gridSize = 10; // –ó–º—ñ–Ω–∏—Ç–∏ –Ω–∞ 13 –¥–ª—è —Å—ñ—Ç–∫–∏ 13x13
        for (let i = 0; i <= gridSize; i++) {
            ctx.beginPath();
            ctx.moveTo(i * 30, 0);
            ctx.lineTo(i * 30, canvas.height);
            ctx.moveTo(0, i * 30);
            ctx.lineTo(canvas.width, i * 30);
            ctx.stroke();
        }

        // –ú–∞–ª—é—î–º–æ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 4
        if (currentQuestionType === 4) {
            const a_dx = vectorA.end.x - vectorA.start.x;
            const a_dy = vectorA.end.y - vectorA.start.y;
            const b_dx = vectorB.end.x - vectorB.start.x;
            const b_dy = vectorB.end.y - vectorB.start.y;

            ctx.beginPath();
            ctx.strokeStyle = '#7f8c8d';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.moveTo(vectorA.end.x * 30, vectorA.end.y * 30);
            ctx.lineTo((vectorA.start.x + a_dx + b_dx) * 30, (vectorA.start.y + a_dy + b_dy) * 30);
            ctx.moveTo(vectorB.end.x * 30, vectorB.end.y * 30);
            ctx.lineTo((vectorA.start.x + a_dx + b_dx) * 30, (vectorA.start.y + a_dy + b_dy) * 30);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.beginPath();
            ctx.fillStyle = '#7f8c8d';
            ctx.arc((vectorA.start.x + a_dx + b_dx) * 30, (vectorA.start.y + a_dy + b_dy) * 30, 4, 0, 2 * Math.PI);
            ctx.fill();
        }

        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ–∑–∏—Ü—ñ—ó –ø—ñ–¥–ø–∏—Å—ñ–≤ –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–µ—Ä–µ–∫—Ä–∏—Ç—Ç—è
        const labelPositions = [];

        const drawVector = (vector, label, color = '#2c3e50', dashed = false) => {
            if (!vector || !vector.start || !vector.end || !vector.start.x || !vector.start.y || !vector.end.x || !vector.end.y) {
                console.warn(`Invalid vector for label ${label}:`, vector);
                return;
            }

            const x1 = vector.start.x * 30;
            const y1 = vector.start.y * 30;
            const x2 = vector.end.x * 30;
            const y2 = vector.end.y * 30;

            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            if (dashed) ctx.setLineDash([5, 5]);
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            const angle = Math.atan2(y2 - y1, x2 - x1);
            const arrowLength = 12;
            ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI / 4), y2 - arrowLength * Math.sin(angle - Math.PI / 4));
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI / 4), y2 - arrowLength * Math.sin(angle + Math.PI / 4));
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.arc(x1, y1, 4, 0, 2 * Math.PI);
            ctx.arc(x2, y2, 4, 0, 2 * Math.PI);
            ctx.fill();

            const midX = (x1 + x2) / 2;
            const midY = (y1 + y2) / 2;
            const dx = x2 - x1;
            const dy = y2 - y1;
            const len = Math.sqrt(dx * dx + dy * dy) || 1;
            const offset = 10;
            let offsetX = -dy / len * offset;
            let offsetY = dx / len * offset;
            let labelX = midX + offsetX;
            let labelY = midY + offsetY;

            if (Math.abs(dx) < 0.1) {
                offsetX = offset;
                offsetY = 0;
                labelX = midX + offset;
                labelY = midY;
            } else if (Math.abs(dy) < 0.1) {
                offsetX = 0;
                offsetY = -offset;
                labelX = midX;
                labelY = midY - offset;
            }

            for (const pos of labelPositions) {
                const dist = Math.sqrt((labelX - pos.x) ** 2 + (labelY - pos.y) ** 2);
                if (dist < 20) {
                    if (Math.abs(dx) < 0.1) {
                        labelX = midX - offset;
                    } else if (Math.abs(dy) < 0.1) {
                        labelY = midY + offset;
                    } else {
                        offsetX = dy / len * offset;
                        offsetY = -dx / len * offset;
                        labelX = midX + offsetX;
                        labelY = midY + offsetY;
                    }
                    break;
                }
            }

            labelPositions.push({ x: labelX, y: labelY, label });

            let simpleLabel = '';
            if (label === '\\(\\vec{a}\\)' || label === '\\overrightarrow{a}') simpleLabel = 'a';
            else if (label === '\\(\\vec{b}\\)' || label === '\\overrightarrow{b}') simpleLabel = 'b';
            else if (label === '\\(\\vec{c}\\)' || label === '\\overrightarrow{c}') simpleLabel = 'c';
            else if (label === '\\(\\vec{d}\\)' || label === '\\overrightarrow{d}') simpleLabel = 'd';
            else if (label === '\\(\\vec{f}\\)' || label === '\\overrightarrow{f}') simpleLabel = 'f';
            else {
                const match = label.match(/\\vec\{([a-zA-Z])\}|\\overrightarrow\{([a-zA-Z])\}/);
                simpleLabel = match ? (match[1] || match[2]) : 'unknown';
                if (simpleLabel === 'unknown') {
                    console.warn(`Failed to parse label: ${label}`);
                }
            }

            ctx.fillStyle = color;
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(simpleLabel, labelX, labelY);

            const textWidth = ctx.measureText(simpleLabel).width;
            const arrowY = labelY - 8;
            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 1;
            ctx.moveTo(labelX - textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2 - 4, arrowY - 4);
            ctx.moveTo(labelX + textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2 - 4, arrowY + 4);
            ctx.stroke();

            console.log(`Drawing label ${simpleLabel} at (${labelX}, ${labelY}) for vector from (${x1}, ${y1}) to (${x2}, ${y2})`);
        };

        if (currentQuestionType === 6) {
            drawVector(vectorA, '\\(\\vec{a}\\)', 'red');
            currentQuestion.vectors.forEach(v => {
                drawVector(v.vector, v.name, v.color, true);
            });
        } else if (vectorA && vectorB) {
            drawVector(vectorA, '\\(\\vec{a}\\)', '#2c3e50');
            drawVector(vectorB, '\\(\\vec{b}\\)', '#2c3e50');
        }

        // –ú–∞–ª—é—î–º–æ userVectorC –¥–ª—è –ø–∏—Ç–∞–Ω—å 2, 3, 4
        if (userVectorC.start && !userVectorC.end && currentQuestionType !== 6 && currentQuestionType !== 5) {
            const startX = userVectorC.start.x * 30;
            const startY = userVectorC.start.y * 30;
            ctx.beginPath();
            ctx.fillStyle = '#e74c3c';
            ctx.arc(startX, startY, 4, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = 'red';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'bottom';
            ctx.fillText('START', startX, startY - 15);
        }
        if (userVectorC.start && userVectorC.end && currentQuestionType !== 6 && currentQuestionType !== 5) {
            const x1 = userVectorC.start.x * 30;
            const y1 = userVectorC.start.y * 30;
            const x2 = userVectorC.end.x * 30;
            const y2 = userVectorC.end.y * 30;

            ctx.beginPath();
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            const angle = Math.atan2(y2 - y1, x2 - x1);
            const arrowLength = 12;
            ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI / 4), y2 - arrowLength * Math.sin(angle - Math.PI / 4));
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI / 4), y2 - arrowLength * Math.sin(angle + Math.PI / 4));
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.beginPath();
            ctx.fillStyle = '#e74c3c';
            ctx.arc(x1, y1, 4, 0, 2 * Math.PI);
            ctx.arc(x2, y2, 4, 0, 2 * Math.PI);
            ctx.fill();

            const midX = (x1 + x2) / 2;
            const midY = (y1 + y2) / 2;
            const dx = x2 - x1;
            const dy = y2 - y1;
            const len = Math.sqrt(dx * dx + dy * dy) || 1;
            const offset = 10;
            let offsetX = -dy / len * offset;
            let offsetY = dx / len * offset;
            let labelX = midX + offsetX;
            let labelY = midY + offsetY;

            if (Math.abs(dx) < 0.1) {
                labelX = midX + offset;
                labelY = midY;
            } else if (Math.abs(dy) < 0.1) {
                labelX = midX;
                labelY = midY - offset;
            }

            for (const pos of labelPositions) {
                const dist = Math.sqrt((labelX - pos.x) ** 2 + (labelY - pos.y) ** 2);
                if (dist < 20) {
                    if (Math.abs(dx) < 0.1) {
                        labelX = midX - offset;
                    } else if (Math.abs(dy) < 0.1) {
                        labelY = midY + offset;
                    } else {
                        offsetX = dy / len * offset;
                        offsetY = -dx / len * offset;
                        labelX = midX + offsetX;
                        labelY = midY + offsetY;
                    }
                    break;
                }
            }

            labelPositions.push({ x: labelX, y: labelY, label: 'c' });

            ctx.fillStyle = 'red';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('c', labelX, labelY);

            const textWidth = ctx.measureText('c').width;
            const arrowY = labelY - 8;
            ctx.beginPath();
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 1;
            ctx.moveTo(labelX - textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2 - 4, arrowY - 4);
            ctx.moveTo(labelX + textWidth / 2, arrowY);
            ctx.lineTo(labelX + textWidth / 2 - 4, arrowY + 4);
            ctx.stroke();
        }
    }

    console.log('Vector question drawn successfully');
}
            
      function checkCubeVectorSum() {
    if (!userVectorC.start || !userVectorC.end || !currentQuestion.correct) {
        console.warn('checkCubeVectorSum: Incomplete data', {
            start: userVectorC.start,
            end: userVectorC.end,
            correct: currentQuestion.correct
        });
        return false;
    }

    const vertices = {
        A: [0, 0, 0], B: [1, 0, 0], C: [1, 1, 0], D: [0, 1, 0],
        A1: [0, 0, 1], B1: [1, 0, 1], C1: [1, 1, 1], D1: [0, 1, 1]
    };

    const project = (point) => {
        const scale = 100;
        const xOffset = 75;
        const yOffset = 200;
        const x = point[0] * scale + point[2] * scale * 0.5 + xOffset;
        const y = -point[1] * scale - point[2] * scale * 0.5 + yOffset;
        return [x, y];
    };

    const [startX, startY] = project(vertices[currentQuestion.correct.start]);
    const [endX, endY] = project(vertices[currentQuestion.correct.end]);
    const canvasStartX = userVectorC.start.x;
    const canvasStartY = userVectorC.start.y;
    const canvasEndX = userVectorC.end.x;
    const canvasEndY = userVectorC.end.y;

    const threshold = 1.5; // –ó–±—ñ–ª—å—à–µ–Ω–æ –ø–æ—Ä—ñ–≥ —á—É—Ç–ª–∏–≤–æ—Å—Ç—ñ
    const isCorrect = (
        Math.abs(canvasStartX - startX / 30) < threshold &&
        Math.abs(canvasStartY - startY / 30) < threshold &&
        Math.abs(canvasEndX - endX / 30) < threshold &&
        Math.abs(canvasEndY - endY / 30) < threshold
    );

    console.log('Checking cube vector sum:', {
        userStart: [canvasStartX, canvasStartY],
        userEnd: [canvasEndX, canvasEndY],
        correctStart: [startX / 30, startY / 30],
        correctEnd: [endX / 30, endY / 30],
        isCorrect
    });

    return isCorrect;
}

function handleCanvasClick(event) {
    if (currentQuestionType !== 2 && currentQuestionType !== 3 && currentQuestionType !== 4 && currentQuestionType !== 5) return;
    if (!elements.vectorCanvas) {
        console.error('vectorCanvas is not defined');
        return;
    }

    const rect = elements.vectorCanvas.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    const thresholdPixel = 15; // –ó–±—ñ–ª—å—à–µ–Ω–æ –ø–æ—Ä—ñ–≥ —É –ø—ñ–∫—Å–µ–ª—è—Ö –¥–ª—è –ø–∏—Ç–∞–Ω–Ω—è 5

    console.log(`Click at canvas: (${x}, ${y})`);

    if (currentQuestionType === 5) {
        const vertices = {
            A: [0, 0, 0], B: [1, 0, 0], C: [1, 1, 0], D: [0, 1, 0],
            A1: [0, 0, 1], B1: [1, 0, 1], C1: [1, 1, 1], D1: [0, 1, 1]
        };

        const project = (point) => {
            const scale = 100;
            const xOffset = 75;
            const yOffset = 200;
            const x = point[0] * scale + point[2] * scale * 0.5 + xOffset;
            const y = -point[1] * scale - point[2] * scale * 0.5 + yOffset;
            return [x, y];
        };

        let closestVertex = null;
        let minDistance = Infinity;
        Object.keys(vertices).forEach(v => {
            const [vx, vy] = project(vertices[v]);
            const distance = Math.sqrt((x - vx) ** 2 + (y - vy) ** 2);
            if (distance < minDistance && distance < thresholdPixel) {
                minDistance = distance;
                closestVertex = v;
            }
        });

        if (!closestVertex) {
            console.log('No vertex selected for question 5');
            return;
        }

        const [canvasX, canvasY] = project(vertices[closestVertex]);
        const gridVertexX = canvasX / 30;
        const gridVertexY = canvasY / 30;

        if (!userVectorC.start) {
            userVectorC.start = { x: gridVertexX, y: gridVertexY, vertex: closestVertex };
            userVectorC.end = null;
            console.log(`Selected start for question 5: ${closestVertex} at (${gridVertexX}, ${gridVertexY})`);
            drawVectorQuestion();
        } else {
            userVectorC.end = { x: gridVertexX, y: gridVertexY, vertex: closestVertex };
            elements.submitAnswerBtn.disabled = false;
            elements.submitAnswerBtn.classList.add('active');
            console.log(`Selected end for question 5: ${closestVertex} at (${gridVertexX}, ${gridVertexY})`);
            drawVectorQuestion();
        }
    } else {
        const gridX = Math.round(x / 30);
        const gridY = Math.round(y / 30);
        const thresholdGrid = 1.0;

        if (!userVectorC.start) {
            let selected = false;
            if (currentQuestionType === 2) {
                console.log(`Checking for question 2: vectorA.start=(${vectorA?.start?.x}, ${vectorA?.start?.y}), vectorB.end=(${vectorB?.end?.x}, ${vectorB?.end?.y})`);
                if (
                    (vectorA && Math.abs(gridX - vectorA.start.x) < thresholdGrid && Math.abs(gridY - vectorA.start.y) < thresholdGrid) ||
                    (vectorB && Math.abs(gridX - vectorB.end.x) < thresholdGrid && Math.abs(gridY - vectorB.end.y) < thresholdGrid)
                ) {
                    userVectorC.start = { x: gridX, y: gridY };
                    userVectorC.end = null;
                    selected = true;
                    console.log(`Selected start for question 2 at (${gridX}, ${gridY})`);
                }
            } else if (currentQuestionType === 3) {
                console.log(`Checking for question 3: vectorA.end=(${vectorA?.end?.x}, ${vectorA?.end?.y}), vectorB.end=(${vectorB?.end?.x}, ${vectorB?.end?.y})`);
                if (
                    (vectorB && Math.abs(gridX - vectorB.end.x) < thresholdGrid && Math.abs(gridY - vectorB.end.y) < thresholdGrid) ||
                    (vectorA && Math.abs(gridX - vectorA.end.x) < thresholdGrid && Math.abs(gridY - vectorA.end.y) < thresholdGrid)
                ) {
                    userVectorC.start = { x: gridX, y: gridY };
                    userVectorC.end = null;
                    selected = true;
                    console.log(`Selected start for question 3 at (${gridX}, ${gridY})`);
                }
            } else if (currentQuestionType === 4) {
                const a_dx = vectorA.end.x - vectorA.start.x;
                const a_dy = vectorA.end.y - vectorA.start.y;
                const b_dx = vectorB.end.x - vectorB.start.x;
                const b_dy = vectorB.end.y - vectorB.start.y;
                const oppositeVertexX = vectorA.start.x + a_dx + b_dx;
                const oppositeVertexY = vectorA.start.y + a_dy + b_dy;

                console.log(`Checking for question 4: vectorA.start=(${vectorA?.start?.x}, ${vectorA?.start?.y}), vectorA.end=(${vectorA?.end?.x}, ${vectorA?.end?.y}), vectorB.end=(${vectorB?.end?.x}, ${vectorB?.end?.y}), opposite=(${oppositeVertexX}, ${oppositeVertexY})`);
                if (
                    (vectorA && Math.abs(gridX - vectorA.start.x) < thresholdGrid && Math.abs(gridY - vectorA.start.y) < thresholdGrid) ||
                    (vectorA && Math.abs(gridX - vectorA.end.x) < thresholdGrid && Math.abs(gridY - vectorA.end.y) < thresholdGrid) ||
                    (vectorB && Math.abs(gridX - vectorB.end.x) < thresholdGrid && Math.abs(gridY - vectorB.end.y) < thresholdGrid) ||
                    (Math.abs(gridX - oppositeVertexX) < thresholdGrid && Math.abs(gridY - oppositeVertexY) < thresholdGrid)
                ) {
                    userVectorC.start = { x: gridX, y: gridY };
                    userVectorC.end = null;
                    selected = true;
                    console.log(`Selected start for question 4 at (${gridX}, ${gridY})`);
                }
            }
            if (selected) {
                drawVectorQuestion();
            } else {
                console.log(`No valid start point selected for question ${currentQuestionType} at (${gridX}, ${gridY})`);
            }
        } else {
            userVectorC.end = { x: gridX, y: gridY };
            elements.submitAnswerBtn.disabled = false;
            elements.submitAnswerBtn.classList.add('active');
            console.log(`Selected end for question ${currentQuestionType} at (${gridX}, ${gridY})`);
            drawVectorQuestion();
        }
    }
}
function handleMouseDown(event) {
    // –í–µ–∫—Ç–æ—Ä–∏ –Ω–µ—Ä—É—Ö–æ–º—ñ
}

function handleMouseMove(event) {
    // –í–µ–∫—Ç–æ—Ä–∏ –Ω–µ—Ä—É—Ö–æ–º—ñ
}

function handleMouseUp() {
    // –í–µ–∫—Ç–æ—Ä–∏ –Ω–µ—Ä—É—Ö–æ–º—ñ
}

function checkVectorSum() {
    if (!vectorA || !vectorB || !userVectorC.start || !userVectorC.end) {
        return false;
    }
    const isCorrect = (
        Math.abs(userVectorC.start.x - vectorA.start.x) < 0.75 &&
        Math.abs(userVectorC.start.y - vectorA.start.y) < 0.75 &&
        Math.abs(userVectorC.end.x - vectorB.end.x) < 0.75 &&
        Math.abs(userVectorC.end.y - vectorB.end.y) < 0.75
    );
    return isCorrect;
}

 function checkVectorDifference() {
    if (!vectorA || !vectorB || !userVectorC.start || !userVectorC.end) {
        return false;
    }
    // –î–ª—è \(\vec{c} = \vec{a} - \vec{b}\), –≤–µ–∫—Ç–æ—Ä \(\vec{c}\) –π–¥–µ –≤—ñ–¥ –∫—ñ–Ω—Ü—è \(\vec{b}\) –¥–æ –∫—ñ–Ω—Ü—è \(\vec{a}\)
    const isCorrect = (
        Math.abs(userVectorC.start.x - vectorB.end.x) < 0.75 &&
        Math.abs(userVectorC.start.y - vectorB.end.y) < 0.75 &&
        Math.abs(userVectorC.end.x - vectorA.end.x) < 0.75 &&
        Math.abs(userVectorC.end.y - vectorA.end.y) < 0.75
    );
    return isCorrect;
}

function checkVectorParallelogram() {
    if (!vectorA || !vectorB || !userVectorC.start || !userVectorC.end) {
        return false;
    }
    // –î–ª—è \(\vec{c} = \vec{a} + \vec{b}\) –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞:
    // –ü–æ—á–∞—Ç–æ–∫ \(\vec{c}\) –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –ø–æ—á–∞—Ç–∫–æ–º \(\vec{a}\) —ñ \(\vec{b}\),
    // –ö—ñ–Ω–µ—Ü—å \(\vec{c}\) –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ç–æ—á—Ü—ñ (vectorA.start.x + a_dx + b_dx, vectorA.start.y + a_dy + b_dy)
    const a_dx = vectorA.end.x - vectorA.start.x;
    const a_dy = vectorA.end.y - vectorA.start.y;
    const b_dx = vectorB.end.x - vectorB.start.x;
    const b_dy = vectorB.end.y - vectorB.start.y;
    const correctEndX = vectorA.start.x + a_dx + b_dx;
    const correctEndY = vectorA.start.y + a_dy + b_dy;

    const isCorrect = (
        Math.abs(userVectorC.start.x - vectorA.start.x) < 0.75 &&
        Math.abs(userVectorC.start.y - vectorA.start.y) < 0.75 &&
        Math.abs(userVectorC.end.x - correctEndX) < 0.75 &&
        Math.abs(userVectorC.end.y - correctEndY) < 0.75
    );
    return isCorrect;
}

function displayQuestion() {
    if (!currentQuestion) {
        console.error('currentQuestion is null');
        return;
    }

    console.log('Displaying question type:', currentQuestionType);
    elements.questionCircle.style.display = 'flex';
    elements.questionNumber.textContent = `–ü–∏—Ç–∞–Ω–Ω—è ${currentQuestionType}`;
    elements.questionText.innerHTML = currentQuestion.question || '–ü–æ–º–∏–ª–∫–∞: –ø–∏—Ç–∞–Ω–Ω—è –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ';
    elements.submitAnswerBtn.disabled = true;
    elements.submitAnswerBtn.classList.remove('active');
    elements.resultMessage.style.opacity = '0';
    elements.resultMessage.className = 'result-message';
    elements.completionMessage.style.display = 'none';
    elements.questionText.style.display = 'block';

    const canvasContainer = elements.vectorCanvas ? (elements.vectorCanvas.parentElement || document.body) : document.body;
    const existingLabels = canvasContainer.querySelectorAll('[id^="vector-label-"]');
    existingLabels.forEach(label => label.remove());

    if (currentQuestionType === 1) {
        elements.matrixText.style.display = 'block';
        elements.vectorCanvas.style.display = 'none';
        elements.answerOptions.style.display = 'grid';
        elements.submitAnswerBtn.style.display = 'block';

        elements.matrixText.innerHTML = currentQuestion.canvas ?
            `<img src="${currentQuestion.canvas}" alt="–ö—É–± —ñ–∑ –≤–µ–∫—Ç–æ—Ä–∞–º–∏" aria-describedby="questionText" style="max-width: 100%; display: block;">` :
            '–ü–æ–º–∏–ª–∫–∞: –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫—É–±–∞ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ';

        const answerButtons = elements.trainerModal.querySelectorAll('.answer-button');
        answerButtons.forEach((btn, index) => {
            btn.innerHTML = currentQuestion.answers && currentQuestion.answers[index] ?
                `\\(${currentQuestion.answers[index]}\\)` : `–í–∞—Ä—ñ–∞–Ω—Ç ${index + 1}`;
            btn.setAttribute('data-answer', index);
            btn.classList.remove('selected', 'correct', 'wrong');
            btn.disabled = false;
        });
    } else if (currentQuestionType === 6) {
        elements.matrixText.style.display = 'none';
        elements.vectorCanvas.style.display = 'block';
        elements.answerOptions.style.display = 'grid';
        elements.submitAnswerBtn.style.display = 'block';

        const answerButtons = elements.trainerModal.querySelectorAll('.answer-button');
        answerButtons.forEach((btn, index) => {
            btn.innerHTML = currentQuestion.answers && currentQuestion.answers[index] ?
                `\\(${currentQuestion.answers[index]}\\)` : `–í–∞—Ä—ñ–∞–Ω—Ç ${index + 1}`;
            btn.setAttribute('data-answer', index);
            btn.classList.remove('selected', 'correct', 'wrong');
            btn.disabled = false;
        });

        drawVectorQuestion();
    } else {
        elements.matrixText.style.display = 'none';
        elements.vectorCanvas.style.display = 'block';
        elements.answerOptions.style.display = 'none';
        elements.submitAnswerBtn.style.display = 'block';
        drawVectorQuestion();
    }

    if (window.MathJax && MathJax.typesetPromise) {
        setTimeout(() => {
            const typesetElements = currentQuestionType === 1 || currentQuestionType === 6 ?
                [elements.questionText, elements.matrixText, ...elements.trainerModal.querySelectorAll('.answer-button')] :
                [elements.questionText, canvasContainer];
            console.log('MathJax typeset elements:', typesetElements.map(el => el.id || el.tagName));
            MathJax.typesetPromise(typesetElements).then(() => {
                console.log('MathJax rendered successfully for question type:', currentQuestionType);
                if (currentQuestionType === 1 || currentQuestionType === 6) {
                    const firstButton = elements.trainerModal.querySelector('.answer-button');
                    if (firstButton) firstButton.focus();
                } else {
                    elements.vectorCanvas.focus();
                }
            }).catch(err => {
                console.error('MathJax rendering failed:', err);
                if (currentQuestionType === 1 || currentQuestionType === 6) {
                    const firstButton = elements.trainerModal.querySelector('.answer-button');
                    if (firstButton) firstButton.focus();
                } else {
                    elements.vectorCanvas.focus();
                }
            });
        }, 100);
    } else {
        console.warn('MathJax –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ');
        if (currentQuestionType === 1 || currentQuestionType === 6) {
            elements.trainerModal.querySelectorAll('.answer-button').forEach((btn, index) => {
                btn.textContent = currentQuestion.answers && currentQuestion.answers[index] ?
                    currentQuestion.answers[index].replace(/\\overrightarrow\{([A-Za-z1-9_]+)\}/g, '$1') : `–í–∞—Ä—ñ–∞–Ω—Ç ${index + 1}`;
            });
        }
        if (currentQuestionType === 6) {
            elements.questionText.textContent = currentQuestion.question.replace(/\\overrightarrow\{([A-Za-z1-9_]+)\}/g, '$1');
        }
    }
}
// –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
if (elements.trainerModal) {
    elements.trainerModal.querySelectorAll('.answer-button').forEach(button => {
        button.addEventListener('click', () => {
            if (currentQuestionType !== 1 && currentQuestionType !== 6) return;
            elements.trainerModal.querySelectorAll('.answer-button').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedAnswer = parseInt(button.getAttribute('data-answer'));
            elements.submitAnswerBtn.disabled = false;
            elements.submitAnswerBtn.classList.add('active');
            console.log('Selected Answer:', selectedAnswer);
        });
        
        button.addEventListener('keydown', e => {
            if (currentQuestionType !== 1 && currentQuestionType !== 6) return;
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                elements.trainerModal.querySelectorAll('.answer-button').forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                selectedAnswer = parseInt(button.getAttribute('data-answer'));
                elements.submitAnswerBtn.disabled = false;
                elements.submitAnswerBtn.classList.add('active');
                console.log('Selected Answer (key):', selectedAnswer);
            }
        });
    });
}

// –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è canvas
if (elements.vectorCanvas) {
    elements.vectorCanvas.addEventListener('mousedown', handleMouseDown);
    elements.vectorCanvas.addEventListener('mousemove', handleMouseMove);
    elements.vectorCanvas.addEventListener('mouseup', handleMouseUp);
    elements.vectorCanvas.addEventListener('mouseleave', handleMouseUp);
    elements.vectorCanvas.addEventListener('click', handleCanvasClick);
}

// –û–±—Ä–æ–±–Ω–∏–∫ –∫–Ω–æ–ø–∫–∏ Submit
if (elements.submitAnswerBtn) {
    elements.submitAnswerBtn.addEventListener('click', () => {
        if (currentQuestionType === 1) {
            if (selectedAnswer === null || elements.submitAnswerBtn.disabled) {
                console.warn('Submit button clicked but no answer selected or button disabled');
                return;
            }

            const isCorrect = selectedAnswer === currentQuestion.correct;
            console.log('Question 1 - isCorrect:', isCorrect, 'Selected:', selectedAnswer, 'Correct:', currentQuestion.correct);

            elements.resultMessage.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
            elements.resultMessage.className = `result-message ${isCorrect ? 'correct' : 'wrong'}`;
            elements.resultMessage.style.display = 'block';
            elements.resultMessage.style.opacity = '1';

            elements.trainerModal.querySelectorAll('.answer-button').forEach(btn => {
                btn.disabled = true;
                const btnIndex = parseInt(btn.getAttribute('data-answer'));
                if (btnIndex === currentQuestion.correct) {
                    btn.classList.add('correct');
                } else if (btnIndex === selectedAnswer) {
                    btn.classList.add('wrong');
                }
            });

            setTimeout(() => {
                elements.resultMessage.style.opacity = '0';
                setTimeout(() => {
                    elements.resultMessage.style.display = 'none';
                    if (isCorrect) {
                        currentQuestionType = 2;
                        currentQuestion = generateVectorQuestion();
                        vectorA = currentQuestion.vectorA;
                        vectorB = currentQuestion.vectorB;
                        selectedAnswer = null;
                        userVectorC = { start: null, end: null };
                        displayQuestion();
                    } else {
                        currentQuestion = generateCubeQuestion();
                        selectedAnswer = null;
                        displayQuestion();
                    }
                }, 500);
            }, 3000);
        } else if (currentQuestionType === 2) {
            if (!userVectorC.start || !userVectorC.end || elements.submitAnswerBtn.disabled) {
                console.warn('Submit button clicked but vectorC incomplete or button disabled');
                return;
            }

            const isCorrect = checkVectorSum();
            elements.resultMessage.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
            elements.resultMessage.className = `result-message ${isCorrect ? 'correct' : 'wrong'}`;
            elements.resultMessage.style.display = 'block';
            elements.resultMessage.style.opacity = '1';

            const ctx = elements.vectorCanvas.getContext('2d');
            drawVectorQuestion(); // –ü–µ—Ä–µ–º–∞–ª—å–æ–≤—É—î–º–æ canvas —ñ–∑ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ a, b
            if (userVectorC.start && userVectorC.end) {
                const x1 = userVectorC.start.x * 30;
                const y1 = userVectorC.start.y * 30;
                const x2 = userVectorC.end.x * 30;
                const y2 = userVectorC.end.y * 30;

                ctx.beginPath();
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.setLineDash([]);
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                const angle = Math.atan2(y2 - y1, x2 - x1);
                const arrowLength = 12;
                ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI / 4), y2 - arrowLength * Math.sin(angle - Math.PI / 4));
                ctx.moveTo(x2, y2);
                ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI / 4), y2 - arrowLength * Math.sin(angle + Math.PI / 4));
                ctx.stroke();

                ctx.beginPath();
                ctx.fillStyle = '#e74c3c';
                ctx.arc(x1, y1, 4, 0, 2 * Math.PI);
                ctx.arc(x2, y2, 4, 0, 2 * Math.PI);
                ctx.fill();

                console.log(`Drawing userVectorC after check: (${x1}, ${y1}) to (${x2}, ${y2}) without label`);
            }

            setTimeout(() => {
                elements.resultMessage.style.opacity = '0';
                setTimeout(() => {
                    elements.resultMessage.style.display = 'none';
                    if (isCorrect) {
                        currentQuestionType = 3;
                        currentQuestion = generateVectorDifferenceQuestion();
                        vectorA = currentQuestion.vectorA;
                        vectorB = currentQuestion.vectorB;
                        userVectorC = { start: null, end: null };
                        displayQuestion();
                    } else {
                        currentQuestion = generateVectorQuestion();
                        vectorA = currentQuestion.vectorA;
                        vectorB = currentQuestion.vectorB;
                        userVectorC = { start: null, end: null };
                        elements.submitAnswerBtn.disabled = true;
                        elements.submitAnswerBtn.classList.remove('active');
                        displayQuestion();
                    }
                }, 500);
            }, 3000);
        } else if (currentQuestionType === 3) {
            if (!userVectorC.start || !userVectorC.end || elements.submitAnswerBtn.disabled) {
                console.warn('Submit button clicked but vectorC incomplete or button disabled');
                return;
            }

            const isCorrect = checkVectorDifference();
            elements.resultMessage.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
            elements.resultMessage.className = `result-message ${isCorrect ? 'correct' : 'wrong'}`;
            elements.resultMessage.style.display = 'block';
            elements.resultMessage.style.opacity = '1';

            const ctx = elements.vectorCanvas.getContext('2d');
            drawVectorQuestion();
            if (userVectorC.start && userVectorC.end) {
                const x1 = userVectorC.start.x * 30;
                const y1 = userVectorC.start.y * 30;
                const x2 = userVectorC.end.x * 30;
                const y2 = userVectorC.end.y * 30;

                ctx.beginPath();
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.setLineDash([]);
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                const angle = Math.atan2(y2 - y1, x2 - x1);
                const arrowLength = 12;
                ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI / 4), y2 - arrowLength * Math.sin(angle - Math.PI / 4));
                ctx.moveTo(x2, y2);
                ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI / 4), y2 - arrowLength * Math.sin(angle + Math.PI / 4));
                ctx.stroke();

                ctx.beginPath();
                ctx.fillStyle = '#e74c3c';
                ctx.arc(x1, y1, 4, 0, 2 * Math.PI);
                ctx.arc(x2, y2, 4, 0, 2 * Math.PI);
                ctx.fill();

                console.log(`Drawing userVectorC after check: (${x1}, ${y1}) to (${x2}, ${y2}) without label`);
            }

            setTimeout(() => {
                elements.resultMessage.style.opacity = '0';
                setTimeout(() => {
                    elements.resultMessage.style.display = 'none';
                    if (isCorrect) {
                        currentQuestionType = 4;
                        currentQuestion = generateVectorParallelogramQuestion();
                        vectorA = currentQuestion.vectorA;
                        vectorB = currentQuestion.vectorB;
                        userVectorC = { start: null, end: null };
                        displayQuestion();
                    } else {
                        currentQuestion = generateVectorDifferenceQuestion();
                        vectorA = currentQuestion.vectorA;
                        vectorB = currentQuestion.vectorB;
                        userVectorC = { start: null, end: null };
                        elements.submitAnswerBtn.disabled = true;
                        elements.submitAnswerBtn.classList.remove('active');
                        displayQuestion();
                    }
                }, 500);
            }, 3000);
        } else if (currentQuestionType === 4) {
            if (!userVectorC.start || !userVectorC.end || elements.submitAnswerBtn.disabled) {
                console.warn('Submit button clicked but vectorC incomplete or button disabled');
                return;
            }

            const isCorrect = checkVectorParallelogram();
            elements.resultMessage.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
            elements.resultMessage.className = `result-message ${isCorrect ? 'correct' : 'wrong'}`;
            elements.resultMessage.style.display = 'block';
            elements.resultMessage.style.opacity = '1';

            const ctx = elements.vectorCanvas.getContext('2d');
            drawVectorQuestion();
            if (userVectorC.start && userVectorC.end) {
                const x1 = userVectorC.start.x * 30;
                const y1 = userVectorC.start.y * 30;
                const x2 = userVectorC.end.x * 30;
                const y2 = userVectorC.end.y * 30;

                ctx.beginPath();
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.setLineDash([]);
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                const angle = Math.atan2(y2 - y1, x2 - x1);
                const arrowLength = 12;
                ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI / 4), y2 - arrowLength * Math.sin(angle - Math.PI / 4));
                ctx.moveTo(x2, y2);
                ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI / 4), y2 - arrowLength * Math.sin(angle + Math.PI / 4));
                ctx.stroke();

                ctx.beginPath();
                ctx.fillStyle = '#e74c3c';
                ctx.arc(x1, y1, 4, 0, 2 * Math.PI);
                ctx.arc(x2, y2, 4, 0, 2 * Math.PI);
                ctx.fill();

                console.log(`Drawing userVectorC after check: (${x1}, ${y1}) to (${x2}, ${y2}) without label`);
            }

            setTimeout(() => {
                elements.resultMessage.style.opacity = '0';
                setTimeout(() => {
                    elements.resultMessage.style.display = 'none';
                    if (isCorrect) {
                        currentQuestionType = 5;
                        currentQuestion = generateCubeVectorSumQuestion();
                        vectorA = null;
                        vectorB = null;
                        userVectorC = { start: null, end: null };
                        displayQuestion();
                    } else {
                        currentQuestion = generateVectorParallelogramQuestion();
                        vectorA = currentQuestion.vectorA;
                        vectorB = currentQuestion.vectorB;
                        userVectorC = { start: null, end: null };
                        elements.submitAnswerBtn.disabled = true;
                        elements.submitAnswerBtn.classList.remove('active');
                        displayQuestion();
                    }
                }, 500);
            }, 3000);
        } else if (currentQuestionType === 5) {
            if (!userVectorC.start || !userVectorC.end || elements.submitAnswerBtn.disabled) {
                console.warn('Submit button clicked but vectorC incomplete or button disabled');
                return;
            }

            const isCorrect = checkCubeVectorSum();
            elements.resultMessage.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
            elements.resultMessage.className = `result-message ${isCorrect ? 'correct' : 'wrong'}`;
            elements.resultMessage.style.display = 'block';
            elements.resultMessage.style.opacity = '1';

            const ctx = elements.vectorCanvas.getContext('2d');
            drawVectorQuestion(); // –ü–µ—Ä–µ–º–∞–ª—å–æ–≤—É—î–º–æ –∫—É–± —ñ –≤–µ–∫—Ç–æ—Ä–∏
            if (userVectorC.start && userVectorC.end && userVectorC.start.vertex && userVectorC.end.vertex) {
                const vertices = {
                    A: [0, 0, 0], B: [1, 0, 0], C: [1, 1, 0], D: [0, 1, 0],
                    A1: [0, 0, 1], B1: [1, 0, 1], C1: [1, 1, 1], D1: [0, 1, 1]
                };
                const project = (point) => {
                    const scale = 100;
                    const xOffset = 75;
                    const yOffset = 200;
                    const x = point[0] * scale + point[2] * scale * 0.5 + xOffset;
                    const y = -point[1] * scale - point[2] * scale * 0.5 + yOffset;
                    return [x, y];
                };
                const [x1, y1] = project(vertices[userVectorC.start.vertex]);
                const [x2, y2] = project(vertices[userVectorC.end.vertex]);

                ctx.beginPath();
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.setLineDash([]);
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                const angle = Math.atan2(y2 - y1, x2 - x1);
                const arrowLength = 12;
                ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI / 4), y2 - arrowLength * Math.sin(angle - Math.PI / 4));
                ctx.moveTo(x2, y2);
                ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI / 4), y2 - arrowLength * Math.sin(angle + Math.PI / 4));
                ctx.stroke();

                ctx.beginPath();
                ctx.fillStyle = '#e74c3c';
                ctx.arc(x1, y1, 4, 0, 2 * Math.PI);
                ctx.arc(x2, y2, 4, 0, 2 * Math.PI);
                ctx.fill();

                console.log(`Drawing userVectorC after check: (${x1}, ${y1}) to (${x2}, ${y2}) without label`);
            }

            setTimeout(() => {
                elements.resultMessage.style.opacity = '0';
                setTimeout(() => {
                    elements.resultMessage.style.display = 'none';
                    if (isCorrect) {
                        currentQuestionType = 6;
                        currentQuestion = generateVectorMultipleQuestion();
                        vectorA = currentQuestion.vectorA;
                        vectorB = null;
                        userVectorC = { start: null, end: null };
                        selectedAnswer = null;
                        displayQuestion();
                    } else {
                        const nextGroupIndex = (currentQuestion.groupIndex + 1) % 8;
                        currentQuestion = generateCubeVectorSumQuestion(nextGroupIndex);
                        userVectorC = { start: null, end: null };
                        elements.submitAnswerBtn.disabled = true;
                        elements.submitAnswerBtn.classList.remove('active');
                        displayQuestion();
                    }
                }, 500);
            }, 3000);
        } else if (currentQuestionType === 6) {
            console.log('Processing question 6 submit. Selected answer:', selectedAnswer, 'Correct answer:', currentQuestion.correct, 'Answers:', currentQuestion.answers);
            if (selectedAnswer === null || selectedAnswer === undefined || isNaN(selectedAnswer) || elements.submitAnswerBtn.disabled) {
                console.warn('Submit button clicked but no valid answer selected or button disabled', {
                    selectedAnswer,
                    buttonDisabled: elements.submitAnswerBtn.disabled
                });
                return;
            }
            

    const isCorrect = selectedAnswer === currentQuestion.correct;

    // –î–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
    const selectedVectorName = currentQuestion.answers[selectedAnswer];
    const correctVectorName = currentQuestion.answers[currentQuestion.correct];
    const selectedVector = currentQuestion.vectors.find(v => v.name === selectedVectorName);
    const a_dx = vectorA.end.x - vectorA.start.x;
    const a_dy = vectorA.end.y - vectorA.start.y;
    const v_dx = selectedVector ? (selectedVector.vector.end.x - selectedVector.vector.start.x) : 0;
    const v_dy = selectedVector ? (selectedVector.vector.end.y - selectedVector.vector.start.y) : 0;
    const expectedMultiplier = currentQuestion.vectors[currentQuestion.correct].multiplier;

    console.log('Question 6 - Checking answer:', {
        selectedAnswer,
        selectedVectorName,
        correctIndex: currentQuestion.correct,
        correctVectorName,
        selectedVector: selectedVector ? { dx: v_dx.toFixed(2), dy: v_dy.toFixed(2) } : 'undefined',
        expected: { dx: (expectedMultiplier * a_dx).toFixed(2), dy: (expectedMultiplier * a_dy).toFixed(2) },
        isCorrect
    });

    elements.resultMessage.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü—å!' : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!';
    elements.resultMessage.className = `result-message ${isCorrect ? 'correct' : 'wrong'}`;
    elements.resultMessage.style.display = 'block';
    elements.resultMessage.style.opacity = '1';

    elements.trainerModal.querySelectorAll('.answer-button').forEach(btn => {
        btn.disabled = true;
        const btnIndex = parseInt(btn.getAttribute('data-answer'));
        if (btnIndex === currentQuestion.correct) {
            btn.classList.add('correct');
        } else if (btnIndex === selectedAnswer) {
            btn.classList.add('wrong');
        }
    });

    setTimeout(() => {
        elements.resultMessage.style.opacity = '0';
        setTimeout(() => {
            elements.resultMessage.style.display = 'none';
            const canvasContainer = elements.vectorCanvas.parentElement || document.body;
            canvasContainer.querySelectorAll('[id^="vector-label-"]').forEach(label => label.remove());
            if (isCorrect) {
                elements.questionCircle.style.display = 'none';
                elements.questionText.style.display = 'none';
                elements.vectorCanvas.style.display = 'none';
                elements.submitAnswerBtn.style.display = 'none';
                elements.matrixText.style.display = 'none';
                elements.matrixText.innerHTML = '';
                elements.answerOptions.style.display = 'none';
                elements.completionMessage.style.display = 'block';
                elements.resetTrainerBtn.focus();
            } else {
                currentQuestion = generateVectorMultipleQuestion();
                vectorA = currentQuestion.vectorA;
                vectorB = null;
                selectedAnswer = null;
                displayQuestion();
            }
        }, 500);
    }, 3000);
}
    });
}
// –û–±—Ä–æ–±–Ω–∏–∫ –∫–Ω–æ–ø–∫–∏ Reset
if (elements.resetTrainerBtn) {
    elements.resetTrainerBtn.addEventListener('click', () => {
        const canvasContainer = elements.vectorCanvas ? (elements.vectorCanvas.parentElement || document.body) : document.body;
        const existingLabels = canvasContainer.querySelectorAll('[id^="vector-label-"]');
        existingLabels.forEach(label => label.remove());
        
        // –°–∫–∏–¥–∞–Ω–Ω—è –¥–æ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É
        currentQuestionType = 1;
        currentQuestion = generateCubeQuestion();
        selectedAnswer = null;
        userVectorC = { start: null, end: null };
        vectorA = null;
        vectorB = null;
        
        elements.answerOptions.style.display = 'grid';
        elements.submitAnswerBtn.style.display = 'block';
        elements.completionMessage.style.display = 'none';
        elements.vectorCanvas.style.display = 'none';
        elements.matrixText.style.display = 'block';
        displayQuestion();
    });
}

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
console.log('Initializing trainer...');
currentQuestion = generateCubeQuestion();
displayQuestion();
           });
    </script>
</body>
</html>


